{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/DashboardHeader.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAuth } from \"@/components/AuthProvider\";\nimport { useState } from \"react\";\nimport { User } from \"@supabase/supabase-js\";\n\ninterface DashboardHeaderProps {\n  user: User;\n}\n\nexport default function DashboardHeader({ user }: DashboardHeaderProps) {\n  const { signOut } = useAuth();\n  const [showUserMenu, setShowUserMenu] = useState(false);\n\n  const handleSignOut = async () => {\n    await signOut();\n  };\n\n  const userInitials = user.user_metadata?.display_name\n    ? user.user_metadata.display_name\n        .split(\" \")\n        .map((n: string) => n[0])\n        .join(\"\")\n        .toUpperCase()\n    : user.email?.charAt(0).toUpperCase() || \"U\";\n\n  return (\n    <header className=\"glass sticky top-0 z-50 border-b border-opacity-20 border-secondary\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo */}\n          <a\n            href=\"/dashboard\"\n            className=\"flex items-center hover:opacity-80 transition-opacity\"\n          >\n            <div className=\"flex-shrink-0\">\n              <h1 className=\"text-2xl font-bold travel-gradient bg-clip-text text-transparent cursor-pointer\">\n                ‚úàÔ∏è TripTimeline\n              </h1>\n            </div>\n          </a>\n\n          {/* Navigation */}\n          <nav className=\"hidden md:flex space-x-8\">\n            <a\n              href=\"/dashboard\"\n              className=\"text-primary hover:text-secondary px-3 py-2 rounded-md text-sm font-medium transition-colors\"\n            >\n              Dashboard\n            </a>\n          </nav>\n\n          {/* User Menu */}\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowUserMenu(!showUserMenu)}\n              className=\"flex items-center space-x-3 text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 hover:bg-accent hover:bg-opacity-20 p-1 transition-colors cursor-pointer\"\n            >\n              <div className=\"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-semibold\">\n                {userInitials}\n              </div>\n              <div className=\"hidden md:block text-left\">\n                <p className=\"text-sm font-medium text-primary\">\n                  {user.user_metadata?.display_name || \"User\"}\n                </p>\n                <p className=\"text-xs text-secondary\">{user.email}</p>\n              </div>\n              <svg\n                className={`w-4 h-4 text-secondary transition-transform ${\n                  showUserMenu ? \"rotate-180\" : \"\"\n                }`}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M19 9l-7 7-7-7\"\n                />\n              </svg>\n            </button>\n\n            {/* Dropdown Menu */}\n            {showUserMenu && (\n              <div className=\"absolute right-0 mt-2 w-56 glass rounded-xl shadow-lg py-2 z-50\">\n                <div className=\"px-4 py-3 border-b border-opacity-20 border-secondary\">\n                  <p className=\"text-sm font-medium text-primary\">\n                    {user.user_metadata?.display_name || \"User\"}\n                  </p>\n                  <p className=\"text-xs text-secondary truncate\">\n                    {user.email}\n                  </p>\n                </div>\n\n                <div className=\"py-1\">\n                  <a\n                    href=\"/dashboard/profile\"\n                    className=\"flex items-center px-4 py-2 text-sm text-primary hover:bg-accent hover:bg-opacity-10 transition-colors\"\n                  >\n                    <svg\n                      className=\"w-4 h-4 mr-3 text-secondary\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                      />\n                    </svg>\n                    Profile Settings\n                  </a>\n                </div>\n\n                <div className=\"border-t border-opacity-20 border-secondary py-1\">\n                  <button\n                    onClick={handleSignOut}\n                    className=\"flex items-center w-full px-4 py-2 text-sm text-primary hover:bg-accent hover:bg-opacity-10 transition-colors\"\n                  >\n                    <svg\n                      className=\"w-4 h-4 mr-3\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth={2}\n                        d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                      />\n                    </svg>\n                    Sign Out\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAUe,SAAS,gBAAgB,EAAE,IAAI,EAAwB;;IACpE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,uMAAO;IAC3B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gOAAQ,EAAC;IAEjD,MAAM,gBAAgB;QACpB,MAAM;IACR;IAEA,MAAM,eAAe,KAAK,aAAa,EAAE,eACrC,KAAK,aAAa,CAAC,YAAY,CAC5B,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,IAAc,CAAC,CAAC,EAAE,EACvB,IAAI,CAAC,IACL,WAAW,KACd,KAAK,KAAK,EAAE,OAAO,GAAG,iBAAiB;IAE3C,qBACE,oPAAC;QAAO,WAAU;kBAChB,cAAA,oPAAC;YAAI,WAAU;sBACb,cAAA,oPAAC;gBAAI,WAAU;;kCAEb,oPAAC;wBACC,MAAK;wBACL,WAAU;kCAEV,cAAA,oPAAC;4BAAI,WAAU;sCACb,cAAA,oPAAC;gCAAG,WAAU;0CAAkF;;;;;;;;;;;;;;;;kCAOpG,oPAAC;wBAAI,WAAU;kCACb,cAAA,oPAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;kCAMH,oPAAC;wBAAI,WAAU;;0CACb,oPAAC;gCACC,SAAS,IAAM,gBAAgB,CAAC;gCAChC,WAAU;;kDAEV,oPAAC;wCAAI,WAAU;kDACZ;;;;;;kDAEH,oPAAC;wCAAI,WAAU;;0DACb,oPAAC;gDAAE,WAAU;0DACV,KAAK,aAAa,EAAE,gBAAgB;;;;;;0DAEvC,oPAAC;gDAAE,WAAU;0DAA0B,KAAK,KAAK;;;;;;;;;;;;kDAEnD,oPAAC;wCACC,WAAW,CAAC,4CAA4C,EACtD,eAAe,eAAe,IAC9B;wCACF,MAAK;wCACL,QAAO;wCACP,SAAQ;kDAER,cAAA,oPAAC;4CACC,eAAc;4CACd,gBAAe;4CACf,aAAa;4CACb,GAAE;;;;;;;;;;;;;;;;;4BAMP,8BACC,oPAAC;gCAAI,WAAU;;kDACb,oPAAC;wCAAI,WAAU;;0DACb,oPAAC;gDAAE,WAAU;0DACV,KAAK,aAAa,EAAE,gBAAgB;;;;;;0DAEvC,oPAAC;gDAAE,WAAU;0DACV,KAAK,KAAK;;;;;;;;;;;;kDAIf,oPAAC;wCAAI,WAAU;kDACb,cAAA,oPAAC;4CACC,MAAK;4CACL,WAAU;;8DAEV,oPAAC;oDACC,WAAU;oDACV,MAAK;oDACL,QAAO;oDACP,SAAQ;8DAER,cAAA,oPAAC;wDACC,eAAc;wDACd,gBAAe;wDACf,aAAa;wDACb,GAAE;;;;;;;;;;;gDAEA;;;;;;;;;;;;kDAKV,oPAAC;wCAAI,WAAU;kDACb,cAAA,oPAAC;4CACC,SAAS;4CACT,WAAU;;8DAEV,oPAAC;oDACC,WAAU;oDACV,MAAK;oDACL,QAAO;oDACP,SAAQ;8DAER,cAAA,oPAAC;wDACC,eAAc;wDACd,gBAAe;wDACf,aAAa;wDACb,GAAE;;;;;;;;;;;gDAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW1B;GAxIwB;;QACF,uMAAO;;;KADL"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/MediaCarousel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\ninterface MediaCarouselProps {\n  media: any[];\n  dayIndex: number;\n  currentIndex: number;\n  onIndexChange: (dayIndex: number, index: number) => void;\n  onDelete?: (mediaId: string) => Promise<void>;\n}\n\nexport default function MediaCarousel({\n  media,\n  dayIndex,\n  currentIndex,\n  onIndexChange,\n  onDelete,\n}: MediaCarouselProps) {\n  const [touchStart, setTouchStart] = useState(0);\n  const [touchEnd, setTouchEnd] = useState(0);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  if (!media || media.length === 0) {\n    return null;\n  }\n\n  const currentMedia = media[currentIndex || 0];\n  const totalMedia = media.length;\n\n  const handlePrevious = () => {\n    const newIndex = currentIndex > 0 ? currentIndex - 1 : totalMedia - 1;\n    onIndexChange(dayIndex, newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = currentIndex < totalMedia - 1 ? currentIndex + 1 : 0;\n    onIndexChange(dayIndex, newIndex);\n  };\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    setTouchStart(e.targetTouches[0].clientX);\n  };\n\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    setTouchEnd(e.changedTouches[0].clientX);\n    handleSwipe();\n  };\n\n  const handleSwipe = () => {\n    if (touchStart - touchEnd > 50) {\n      handleNext();\n    }\n    if (touchEnd - touchStart > 50) {\n      handlePrevious();\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!onDelete || !currentMedia) return;\n    \n    if (confirm('Delete this photo/video?')) {\n      setIsDeleting(true);\n      try {\n        await onDelete(currentMedia.id);\n      } catch (error) {\n        console.error('Error deleting media:', error);\n        alert('Failed to delete media');\n      } finally {\n        setIsDeleting(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative w-full rounded-lg overflow-hidden\" style={{backgroundColor: '#0A400C'}}>\n      {/* Main Image/Video */}\n      <div\n        className=\"relative w-full aspect-video\" style={{backgroundColor: '#0A400C'}}\n        onTouchStart={handleTouchStart}\n        onTouchEnd={handleTouchEnd}\n      >\n        {currentMedia.type === 'image' ? (\n          <img\n            src={currentMedia.url}\n            alt={currentMedia.title}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <video\n            src={currentMedia.url}\n            className=\"w-full h-full object-cover\"\n            controls\n          />\n        )}\n\n        {/* Left Arrow */}\n        <button\n          onClick={handlePrevious}\n          className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full transition-all z-10\"\n        >\n          ‚Äπ\n        </button>\n\n        {/* Right Arrow */}\n        <button\n          onClick={handleNext}\n          className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full transition-all z-10\"\n        >\n          ‚Ä∫\n        </button>\n\n        {/* Counter */}\n        <div className=\"absolute top-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm font-medium\">\n          {currentIndex + 1} / {totalMedia}\n        </div>\n\n        {/* Delete Button */}\n        {onDelete && (\n          <button\n            onClick={handleDelete}\n            disabled={isDeleting}\n            className=\"absolute top-4 left-4 text-white p-2 rounded-full transition-all z-10 disabled:opacity-50\"\n            style={{backgroundColor: 'rgba(10, 64, 12, 0.8)'}}\n            onMouseEnter={(e) => (e.target as HTMLElement).style.backgroundColor = 'rgba(129, 144, 103, 0.9)'}\n            onMouseLeave={(e) => (e.target as HTMLElement).style.backgroundColor = 'rgba(10, 64, 12, 0.8)'}\n            title=\"Delete this photo/video\"\n          >\n            üóëÔ∏è\n          </button>\n        )}\n      </div>\n\n      {/* Thumbnail Strip */}\n      {totalMedia > 1 && (\n        <div className=\"flex gap-2 p-3 overflow-x-auto\" style={{backgroundColor: '#819067'}}>\n          {media.map((item, index) => (\n            <button\n              key={item.id}\n              onClick={() => onIndexChange(dayIndex, index)}\n              className={`flex-shrink-0 w-12 h-12 rounded-md overflow-hidden transition-all ${\n                index === currentIndex\n                  ? 'ring-2 ring-white opacity-100'\n                  : 'opacity-60 hover:opacity-80'\n              }`}\n            >\n              {item.type === 'image' ? (\n                <img\n                  src={item.url}\n                  alt={item.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center\" style={{backgroundColor: '#B1AB86'}}>\n                  <span className=\"text-xl\" style={{color: '#0A400C'}}>‚ñ∂</span>\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/VerticalItinerary.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { ItineraryDay, Activity, ActivityInput } from \"@/types/itinerary\";\nimport { format, parseISO } from \"date-fns\";\nimport MediaCarousel from \"./MediaCarousel\";\n\ninterface VerticalItineraryProps {\n  itinerary: ItineraryDay[];\n  tripId?: string;\n  onAddActivity: (\n    dayIndex: number,\n    activity: ActivityInput\n  ) => Promise<void> | void;\n  onEditActivity: (\n    dayIndex: number,\n    activityId: string,\n    activity: ActivityInput\n  ) => Promise<void> | void;\n  onDeleteActivity: (\n    dayIndex: number,\n    activityId: string\n  ) => Promise<void> | void;\n  onSaveNotes?: (dayIndex: number, notes: string) => Promise<void> | void;\n  onSaveExpense?: (\n    dayIndex: number,\n    expense: {\n      title: string;\n      amount: number;\n      category: string;\n      currency: string;\n      date: string;\n    }\n  ) => Promise<void> | void;\n  onUpdateDay?: (\n    dayIndex: number,\n    updatedDay: Partial<ItineraryDay>\n  ) => void | Promise<void>;\n  onAddDay?: () => void;\n  onDeleteDay?: (dayIndex: number) => void;\n}\n\nexport default function VerticalItinerary({\n  itinerary,\n  tripId,\n  onAddActivity,\n  onEditActivity,\n  onDeleteActivity,\n  onSaveNotes,\n  onSaveExpense,\n  onUpdateDay,\n  onAddDay,\n  onDeleteDay,\n}: VerticalItineraryProps) {\n  const [expandedDays, setExpandedDays] = useState<Set<number>>(new Set([0])); // First day expanded by default\n  const [editingDay, setEditingDay] = useState<{\n    dayIndex: number;\n    field: \"title\" | \"notes\";\n  } | null>(null);\n  const [editValue, setEditValue] = useState(\"\");\n  const [activityModal, setActivityModal] = useState<{\n    dayIndex: number;\n    activity?: Activity;\n  } | null>(null);\n  const [activityTitle, setActivityTitle] = useState(\"\");\n  const [activityTime, setActivityTime] = useState(\"\");\n  const [activityCategory, setActivityCategory] =\n    useState<Activity[\"category\"]>(\"sightseeing\");\n  const [activityType, setActivityType] = useState<Activity[\"type\"]>(\"morning\");\n  const [activityLocation, setActivityLocation] = useState(\"\");\n  const [activityDescription, setActivityDescription] = useState(\"\");\n  const [activityCost, setActivityCost] = useState(\"\");\n  const [notesModal, setNotesModal] = useState<{ dayIndex: number } | null>(\n    null\n  );\n  const [notesValue, setNotesValue] = useState(\"\");\n  const [expenseModal, setExpenseModal] = useState<{ dayIndex: number } | null>(\n    null\n  );\n  const [expenseTitle, setExpenseTitle] = useState(\"\");\n  const [expenseAmount, setExpenseAmount] = useState(\"\");\n  const [expenseCategory, setExpenseCategory] = useState<\n    \"food\" | \"transport\" | \"accommodation\" | \"shopping\" | \"activities\" | \"other\"\n  >(\"food\");\n  const [isActivitySaving, setIsActivitySaving] = useState(false);\n  const [isNotesSaving, setIsNotesSaving] = useState(false);\n  const [isExpenseSaving, setIsExpenseSaving] = useState(false);\n  const [draggedDayIndex, setDraggedDayIndex] = useState<number | null>(null);\n  const [dragOverDayIndex, setDragOverDayIndex] = useState<number | null>(null);\n  const [mediaUploadDayIndex, setMediaUploadDayIndex] = useState<number | null>(\n    null\n  );\n  const [isMediaUploading, setIsMediaUploading] = useState(false);\n  const [dayMedia, setDayMedia] = useState<{ [key: number]: any[] }>({});\n  const [currentMediaIndex, setCurrentMediaIndex] = useState<{\n    [key: number]: number;\n  }>({});\n\n  // Load media for all days on mount\n  useEffect(() => {\n    const loadAllMedia = async () => {\n      if (!tripId || itinerary.length === 0) return;\n\n      try {\n        const { getMediaForDay } = await import(\"@/lib/trip-service\");\n        const mediaMap: { [key: number]: any[] } = {};\n\n        for (let dayIndex = 0; dayIndex < itinerary.length; dayIndex++) {\n          const media = await getMediaForDay(tripId, dayIndex + 1);\n          mediaMap[dayIndex] = media;\n        }\n\n        setDayMedia(mediaMap);\n      } catch (error) {\n        // Error loading media\n      }\n    };\n\n    loadAllMedia();\n  }, [tripId, itinerary.length]);\n\n  const resetActivityForm = () => {\n    setActivityTitle(\"\");\n    setActivityTime(\"\");\n    setActivityCategory(\"sightseeing\");\n    setActivityType(\"morning\");\n    setActivityLocation(\"\");\n    setActivityDescription(\"\");\n    setActivityCost(\"\");\n    setIsActivitySaving(false);\n  };\n\n  const openActivityModal = (dayIndex: number, activity?: Activity) => {\n    setIsActivitySaving(false);\n\n    if (activity) {\n      setActivityModal({ dayIndex, activity });\n      setActivityTitle(activity.title);\n      setActivityTime(activity.time || \"\");\n      setActivityCategory(activity.category);\n      setActivityType(activity.type || \"morning\");\n      setActivityLocation(activity.location || \"\");\n      setActivityDescription(activity.description || \"\");\n      setActivityCost(\n        activity.cost !== undefined && activity.cost !== null\n          ? String(activity.cost)\n          : \"\"\n      );\n    } else {\n      resetActivityForm();\n      setActivityModal({ dayIndex });\n    }\n  };\n\n  const closeActivityModal = () => {\n    setActivityModal(null);\n    resetActivityForm();\n  };\n\n  const handleSubmitActivity = async () => {\n    if (!activityModal || activityTitle.trim() === \"\") return;\n\n    const trimmedTitle = activityTitle.trim();\n    const trimmedTime = activityTime.trim();\n    const costValue =\n      activityCost.trim() === \"\" ? undefined : Number(activityCost);\n    const safeCost =\n      costValue !== undefined && !Number.isNaN(costValue)\n        ? costValue\n        : undefined;\n\n    const payload: ActivityInput = {\n      title: trimmedTitle,\n      time: trimmedTime,\n      type: activityType,\n      category: activityCategory,\n      description: activityDescription.trim() || undefined,\n      location: activityLocation.trim() || undefined,\n      cost: safeCost,\n    };\n\n    setIsActivitySaving(true);\n\n    try {\n      if (activityModal.activity) {\n        await onEditActivity(\n          activityModal.dayIndex,\n          activityModal.activity.id,\n          payload\n        );\n      } else {\n        await onAddActivity(activityModal.dayIndex, payload);\n      }\n      closeActivityModal();\n    } catch (error) {\n      // Error saving activity\n    } finally {\n      setIsActivitySaving(false);\n    }\n  };\n\n  const handleDeleteActivity = async (dayIndex: number, activityId: string) => {\n    const confirmDelete = window.confirm(\"Delete this activity?\");\n    if (!confirmDelete) return;\n\n    try {\n      await onDeleteActivity(dayIndex, activityId);\n    } catch (error) {\n      // Error deleting activity\n    }\n  };\n\n  const openNotesModal = (dayIndex: number) => {\n    setNotesModal({ dayIndex });\n    setNotesValue(itinerary[dayIndex]?.notes || \"\");\n  };\n\n  const closeNotesModal = () => {\n    setNotesModal(null);\n    setNotesValue(\"\");\n  };\n\n  const handleSaveNotes = async () => {\n    if (!notesModal) return;\n    setIsNotesSaving(true);\n\n    try {\n      if (onSaveNotes) {\n        await onSaveNotes(notesModal.dayIndex, notesValue);\n      } else if (onUpdateDay) {\n        await onUpdateDay(notesModal.dayIndex, { notes: notesValue });\n      }\n      closeNotesModal();\n    } catch (error) {\n      // Error saving notes\n    } finally {\n      setIsNotesSaving(false);\n    }\n  };\n\n  const openExpenseModal = (dayIndex: number) => {\n    setExpenseModal({ dayIndex });\n    setExpenseTitle(\"\");\n    setExpenseAmount(\"\");\n    setExpenseCategory(\"food\");\n  };\n\n  const closeExpenseModal = () => {\n    setExpenseModal(null);\n    setExpenseTitle(\"\");\n    setExpenseAmount(\"\");\n    setExpenseCategory(\"food\");\n  };\n\n  const handleSaveExpense = async () => {\n    if (!expenseModal || !expenseTitle.trim() || !expenseAmount.trim()) return;\n    setIsExpenseSaving(true);\n\n    try {\n      const amount = parseFloat(expenseAmount);\n      if (isNaN(amount) || amount < 0) {\n        return;\n      }\n\n      if (onSaveExpense) {\n        await onSaveExpense(expenseModal.dayIndex, {\n          title: expenseTitle.trim(),\n          amount,\n          category: expenseCategory,\n          currency: \"USD\",\n          date: new Date().toISOString().split(\"T\")[0],\n        });\n      }\n      closeExpenseModal();\n    } catch (error) {\n      // Error saving expense\n    } finally {\n      setIsExpenseSaving(false);\n    }\n  };\n\n  const handleMediaUpload = async (dayIndex: number, file: File) => {\n    if (!tripId) {\n      return;\n    }\n\n    setIsMediaUploading(true);\n    try {\n      const { uploadMedia, getMediaForDay } = await import(\n        \"@/lib/trip-service\"\n      );\n      const mediaType = file.type.startsWith(\"video\") ? \"video\" : \"image\";\n\n      await uploadMedia(tripId, dayIndex + 1, file, mediaType, file.name);\n\n      const media = await getMediaForDay(tripId, dayIndex + 1);\n      setDayMedia((prev) => ({ ...prev, [dayIndex]: media }));\n    } catch (error) {\n      // Error uploading media\n    } finally {\n      setIsMediaUploading(false);\n    }\n  };\n\n  const toggleDay = (dayIndex: number) => {\n    const newExpanded = new Set(expandedDays);\n    if (newExpanded.has(dayIndex)) {\n      newExpanded.delete(dayIndex);\n    } else {\n      newExpanded.add(dayIndex);\n    }\n    setExpandedDays(newExpanded);\n  };\n\n  const handleDragStart = (dayIndex: number) => {\n    setDraggedDayIndex(dayIndex);\n  };\n\n  const handleDragOver = (e: React.DragEvent, dayIndex: number) => {\n    e.preventDefault();\n    setDragOverDayIndex(dayIndex);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverDayIndex(null);\n  };\n\n  const handleDrop = async (e: React.DragEvent, dropIndex: number) => {\n    e.preventDefault();\n    setDragOverDayIndex(null);\n\n    if (draggedDayIndex === null || draggedDayIndex === dropIndex) {\n      return;\n    }\n\n    const newItinerary = [...itinerary];\n    const draggedDay = newItinerary[draggedDayIndex];\n    newItinerary.splice(draggedDayIndex, 1);\n    newItinerary.splice(dropIndex, 0, draggedDay);\n\n    const renumberedItinerary = newItinerary.map((day, index) => ({\n      ...day,\n      day: index + 1,\n    }));\n\n    if (onUpdateDay) {\n      for (let i = 0; i < renumberedItinerary.length; i++) {\n        const day = renumberedItinerary[i];\n        if (day.day !== itinerary[i].day) {\n          await onUpdateDay(i, { day: day.day });\n        }\n      }\n    }\n\n    setDraggedDayIndex(null);\n  };\n\n  const getDayTitle = (day: ItineraryDay) => {\n    // Use custom title if set, otherwise generate dynamic titles\n    if (day.customTitle) {\n      return day.customTitle;\n    }\n    if (day.activities.length > 0) {\n      const mainActivity = day.activities[0];\n      return mainActivity.location || mainActivity.title;\n    }\n    return `Day ${day.day}`;\n  };\n\n  const getDayDescription = (day: ItineraryDay) => {\n    // Show day notes if they exist, otherwise show default message\n    return day.notes || \"Explore and enjoy your day!\";\n  };\n\n  const getActivityTypeIcon = (type: string) => {\n    switch (type) {\n      case \"transport\":\n        return \"‚úàÔ∏è\";\n      case \"accommodation\":\n        return \"üè®\";\n      case \"sightseeing\":\n        return \"üóæ\";\n      case \"food\":\n        return \"üçú\";\n      case \"shopping\":\n        return \"üõçÔ∏è\";\n      case \"entertainment\":\n        return \"üé≠\";\n      default:\n        return \"üìç\";\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case \"transport\":\n        return \"bg-primary bg-opacity-10 text-primary border-primary border-opacity-30\";\n      case \"accommodation\":\n        return \"bg-secondary bg-opacity-10 text-secondary border-secondary border-opacity-30\";\n      case \"sightseeing\":\n        return \"bg-accent bg-opacity-10 text-accent border-accent border-opacity-30\";\n      case \"food\":\n        return \"bg-primary bg-opacity-10 text-primary border-primary border-opacity-30\";\n      case \"shopping\":\n        return \"bg-secondary bg-opacity-10 text-secondary border-secondary border-opacity-30\";\n      case \"entertainment\":\n        return \"bg-accent bg-opacity-10 text-accent border-accent border-opacity-30\";\n      default:\n        return \"bg-primary bg-opacity-5 text-primary border-primary border-opacity-20\";\n    }\n  };\n\n  const startEditingDay = (\n    dayIndex: number,\n    field: \"title\" | \"notes\",\n    currentValue: string\n  ) => {\n    setEditingDay({ dayIndex, field });\n    setEditValue(currentValue);\n  };\n\n  const saveEditingDay = () => {\n    if (editingDay && onUpdateDay) {\n      if (editingDay.field === \"title\") {\n        // Update the day's custom title\n        onUpdateDay(editingDay.dayIndex, { customTitle: editValue });\n      } else if (editingDay.field === \"notes\") {\n        onUpdateDay(editingDay.dayIndex, { notes: editValue });\n      }\n    }\n    setEditingDay(null);\n    setEditValue(\"\");\n  };\n\n  const cancelEditingDay = () => {\n    setEditingDay(null);\n    setEditValue(\"\");\n  };\n\n  // Show empty state if no days exist\n  if (itinerary.length === 0) {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"text-center py-16\">\n          <div className=\"w-32 h-32 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-8\">\n            <div className=\"text-6xl\">üìÖ</div>\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">\n            Start Planning Your Journey!\n          </h3>\n          <p className=\"text-gray-600 mb-8 max-w-md mx-auto\">\n            Create your first day to begin building your amazing itinerary. Add\n            activities, plan your schedule, and make memories!\n          </p>\n          {onAddDay && (\n            <button\n              onClick={onAddDay}\n              className=\"btn-primary text-white px-8 py-4 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1\"\n            >\n              ‚ú® Add Your First Day\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      {/* Timeline Container */}\n      <div className=\"relative\">\n        {/* Vertical Line */}\n        <div className=\"absolute left-8 top-0 bottom-0 w-1 rounded-full shadow-sm\" style={{background: 'linear-gradient(to bottom, #0a400c 0%, #819067 50%, #b1ab86 100%)'}}></div>\n\n        {/* Timeline Items */}\n        <div className=\"space-y-8\">\n          {itinerary.map((day, dayIndex) => {\n            const isExpanded = expandedDays.has(dayIndex);\n            const isLast = dayIndex === itinerary.length - 1;\n\n            return (\n              <div key={dayIndex} className=\"relative\">\n                {/* Timeline Dot */}\n                <div className=\"absolute left-6 w-5 h-5 bg-white rounded-full shadow-lg z-10 hover:scale-110 transition-transform duration-200\" style={{border: '4px solid #0a400c'}}></div>\n\n                {/* Day Card */}\n                <div className=\"ml-20\">\n                  <div\n                    draggable\n                    onDragStart={() => handleDragStart(dayIndex)}\n                    onDragOver={(e) => handleDragOver(e, dayIndex)}\n                    onDragLeave={handleDragLeave}\n                    onDrop={(e) => handleDrop(e, dayIndex)}\n                    className={`glass rounded-xl shadow-md border border-secondary border-opacity-20 overflow-hidden hover:shadow-lg transition-all duration-300 cursor-move ${\n                      draggedDayIndex === dayIndex ? \"opacity-50\" : \"\"\n                    } ${\n                      dragOverDayIndex === dayIndex &&\n                      draggedDayIndex !== dayIndex\n                        ? \"border-primary border-2 bg-primary bg-opacity-5\"\n                        : \"\"\n                    }`}\n                  >\n                    {/* Day Header - Always Visible */}\n                    <div\n                      className=\"p-6 cursor-pointer transition-all duration-300\"\n                      onClick={() => toggleDay(dayIndex)}\n                      onMouseEnter={(e) => {\n                        (e.target as HTMLElement).style.background = 'linear-gradient(135deg, rgba(10, 64, 12, 0.1) 0%, rgba(129, 144, 103, 0.1) 100%)';\n                      }}\n                      onMouseLeave={(e) => {\n                        (e.target as HTMLElement).style.background = 'transparent';\n                      }}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg\">\n                            {day.day}\n                          </div>\n                          <div>\n                            {editingDay?.dayIndex === dayIndex &&\n                            editingDay?.field === \"title\" ? (\n                              <div className=\"flex items-center space-x-2\">\n                                <input\n                                  type=\"text\"\n                                  value={editValue}\n                                  onChange={(e) => setEditValue(e.target.value)}\n                                  onKeyDown={(e) => {\n                                    if (e.key === \"Enter\") saveEditingDay();\n                                    if (e.key === \"Escape\") cancelEditingDay();\n                                  }}\n                                  className=\"text-xl font-bold text-gray-900 bg-white rounded-lg px-3 py-1 focus:outline-none\"\n                                  style={{\n                                    border: '1px solid #819067'\n                                  }}\n                                  onFocus={(e) => (e.target as HTMLElement).style.boxShadow = '0 0 0 2px #0a400c'}\n                                  onBlur={(e) => (e.target as HTMLElement).style.boxShadow = 'none'}\n                                  autoFocus\n                                />\n                                <button\n                                  onClick={saveEditingDay}\n                                  className=\"p-1 transition-colors\"\n                                  style={{color: '#819067'}}\n                                  onMouseEnter={(e) => (e.target as HTMLElement).style.color = '#0a400c'}\n                                  onMouseLeave={(e) => (e.target as HTMLElement).style.color = '#819067'}\n                                >\n                                  ‚úì\n                                </button>\n                                <button\n                                  onClick={cancelEditingDay}\n                                  className=\"p-1 transition-colors\"\n                                  style={{color: '#b1ab86'}}\n                                  onMouseEnter={(e) => (e.target as HTMLElement).style.color = '#0a400c'}\n                                  onMouseLeave={(e) => (e.target as HTMLElement).style.color = '#b1ab86'}\n                                >\n                                  ‚úï\n                                </button>\n                              </div>\n                            ) : (\n                              <h3\n                                className=\"text-xl font-bold flex items-center cursor-pointer transition-all duration-200 group bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg shadow-md border border-primary border-opacity-30 hover:shadow-lg hover:scale-105\"\n                                style={{color: '#0a400c'}}\n                                onMouseEnter={(e) => {\n                                  (e.target as HTMLElement).style.color = '#819067';\n                                  (e.target as HTMLElement).style.borderColor = '#819067';\n                                }}\n                                onMouseLeave={(e) => {\n                                  (e.target as HTMLElement).style.color = '#0a400c';\n                                  (e.target as HTMLElement).style.borderColor = 'rgba(10, 64, 12, 0.3)';\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  const currentTitle = getDayTitle(day);\n                                  startEditingDay(\n                                    dayIndex,\n                                    \"title\",\n                                    currentTitle\n                                  );\n                                }}\n                              >\n                                üìç {getDayTitle(day)}\n                                <span className=\"ml-2 opacity-0 group-hover:opacity-100 text-sm transition-opacity\" style={{color: '#819067'}}>\n                                  ‚úèÔ∏è\n                                </span>\n                              </h3>\n                            )}\n                            <p className=\"text-sm font-medium bg-white/90 backdrop-blur-sm px-3 py-1 rounded-lg shadow-sm border border-secondary border-opacity-30\" style={{color: '#819067'}}>\n                              {format(parseISO(day.date), \"EEEE, MMMM d, yyyy\")}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center space-x-4\">\n                          {/* Activity Count */}\n                          <div className=\"flex items-center space-x-2\">\n                            <span className=\"px-3 py-1 text-sm font-medium rounded-full\" style={{backgroundColor: '#b1ab86', color: '#0a400c'}}>\n                              {day.activities.length}{\" \"}\n                              {day.activities.length === 1\n                                ? \"Activity\"\n                                : \"Activities\"}\n                            </span>\n                            {day.accommodation && (\n                              <span className=\"px-3 py-1 text-sm font-medium rounded-full\" style={{backgroundColor: '#819067', color: '#fefae0'}}>\n                                üè® Hotel\n                              </span>\n                            )}\n                            {/* Delete Day Button */}\n                            {onDeleteDay && itinerary.length > 1 && (\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  if (\n                                    window.confirm(\n                                      `Are you sure you want to delete ${getDayTitle(\n                                        day\n                                      )}?`\n                                    )\n                                  ) {\n                                    onDeleteDay(dayIndex);\n                                  }\n                                }}\n                                className=\"p-2 rounded-full transition-colors\"\n                                style={{color: '#b1ab86'}}\n                                onMouseEnter={(e) => {\n                                  (e.target as HTMLElement).style.color = '#0a400c';\n                                  (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                                }}\n                                onMouseLeave={(e) => {\n                                  (e.target as HTMLElement).style.color = '#b1ab86';\n                                  (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                                }}\n                                title=\"Delete Day\"\n                              >\n                                üóëÔ∏è\n                              </button>\n                            )}\n                          </div>\n\n                          {/* Expand/Collapse Icon */}\n                          <svg\n                            className={`w-6 h-6 text-gray-400 transition-transform duration-200 ${\n                              isExpanded ? \"rotate-180\" : \"\"\n                            }`}\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={2}\n                              d=\"M19 9l-7 7-7-7\"\n                            />\n                          </svg>\n                        </div>\n                      </div>\n\n                      {/* Brief Description - Always Visible */}\n                      <div className=\"mt-4\">\n                        {editingDay?.dayIndex === dayIndex &&\n                        editingDay?.field === \"notes\" ? (\n                          <div className=\"flex items-start space-x-2\">\n                            <textarea\n                              value={editValue}\n                              onChange={(e) => setEditValue(e.target.value)}\n                              onKeyDown={(e) => {\n                                if (e.key === \"Enter\" && e.ctrlKey)\n                                  saveEditingDay();\n                                if (e.key === \"Escape\") cancelEditingDay();\n                              }}\n                              className=\"flex-1 px-3 py-2 text-gray-700 bg-white rounded-lg focus:outline-none\"\n                              style={{\n                                border: '1px solid #819067'\n                              }}\n                              onFocus={(e) => (e.target as HTMLElement).style.boxShadow = '0 0 0 2px #0a400c'}\n                              onBlur={(e) => (e.target as HTMLElement).style.boxShadow = 'none'}\n                              rows={2}\n                              autoFocus\n                            />\n                            <div className=\"flex space-x-1 pt-2\">\n                              <button\n                                onClick={saveEditingDay}\n                                className=\"p-1 transition-colors\"\n                                style={{color: '#819067'}}\n                                onMouseEnter={(e) => (e.target as HTMLElement).style.color = '#0a400c'}\n                                onMouseLeave={(e) => (e.target as HTMLElement).style.color = '#819067'}\n                              >\n                                ‚úì\n                              </button>\n                              <button\n                                onClick={cancelEditingDay}\n                                className=\"p-1 transition-colors\"\n                                style={{color: '#b1ab86'}}\n                                onMouseEnter={(e) => (e.target as HTMLElement).style.color = '#0a400c'}\n                                onMouseLeave={(e) => (e.target as HTMLElement).style.color = '#b1ab86'}\n                              >\n                                ‚úï\n                              </button>\n                            </div>\n                          </div>\n                        ) : (\n                          <p\n                            className=\"leading-relaxed cursor-pointer transition-all duration-200 group bg-white/90 backdrop-blur-sm px-4 py-2 rounded-lg shadow-md border border-accent border-opacity-30 hover:shadow-lg hover:scale-105\"\n                            style={{color: '#0a400c'}}\n                            onMouseEnter={(e) => {\n                              (e.target as HTMLElement).style.color = '#819067';\n                              (e.target as HTMLElement).style.borderColor = '#819067';\n                            }}\n                            onMouseLeave={(e) => {\n                              (e.target as HTMLElement).style.color = '#0a400c';\n                              (e.target as HTMLElement).style.borderColor = 'rgba(177, 171, 134, 0.3)';\n                            }}\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              startEditingDay(\n                                dayIndex,\n                                \"notes\",\n                                getDayDescription(day)\n                              );\n                            }}\n                          >\n                            {getDayDescription(day)}\n                            <span className=\"ml-2 opacity-0 group-hover:opacity-100 text-sm transition-opacity\" style={{color: '#819067'}}>\n                              ‚úèÔ∏è\n                            </span>\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Expanded Content */}\n                    {isExpanded && (\n                      <div className=\"border-t border-gray-100\">\n                        {/* Media Gallery as Hero Section */}\n                        {dayMedia[dayIndex] && dayMedia[dayIndex].length > 0 ? (\n                          <div className=\"p-6 bg-gray-900 border-b border-gray-200\">\n                            <MediaCarousel\n                              media={dayMedia[dayIndex]}\n                              dayIndex={dayIndex}\n                              currentIndex={currentMediaIndex[dayIndex] || 0}\n                              onIndexChange={(idx, mediaIdx) => {\n                                setCurrentMediaIndex((prev) => ({\n                                  ...prev,\n                                  [idx]: mediaIdx,\n                                }));\n                              }}\n                              onDelete={async (mediaId) => {\n                                try {\n                                  const { deleteMedia } = await import(\n                                    \"@/lib/trip-service\"\n                                  );\n                                  await deleteMedia(mediaId);\n                                  setDayMedia((prev) => ({\n                                    ...prev,\n                                    [dayIndex]: prev[dayIndex].filter(\n                                      (m) => m.id !== mediaId\n                                    ),\n                                  }));\n                                  setCurrentMediaIndex((prev) => ({\n                                    ...prev,\n                                    [dayIndex]: 0,\n                                  }));\n                                } catch (error) {\n                                  throw error;\n                                }\n                              }}\n                            />\n                          </div>\n                        ) : (\n                          <div className=\"h-64 relative overflow-hidden\" style={{background: 'linear-gradient(135deg, #0a400c 0%, #819067 50%, #b1ab86 100%)'}}>\n                            <div className=\"absolute inset-0 bg-black/20\"></div>\n                            <div className=\"absolute inset-0 flex items-center justify-center\">\n                              <div className=\"text-center text-white\">\n                                <div className=\"text-6xl mb-4\">üóæ</div>\n                                <h4 className=\"text-2xl font-bold\">\n                                  Day {day.day} Adventure\n                                </h4>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Day Notes Section */}\n                        {day.notes && (\n                          <div className=\"p-6 border-b\" style={{backgroundColor: '#fefae0', borderColor: '#b1ab86'}}>\n                            <h5 className=\"font-semibold text-gray-900 mb-2 flex items-center\">\n                              üìù Day Notes\n                            </h5>\n                            <p className=\"text-gray-700 text-sm leading-relaxed whitespace-pre-wrap\">\n                              {day.notes}\n                            </p>\n                          </div>\n                        )}\n\n                        {/* Media Upload Button */}\n                        <div className=\"p-6 border-b\" style={{backgroundColor: '#fefae0', borderColor: '#b1ab86'}}>\n                          <label \n                            className=\"flex items-center justify-center w-full px-4 py-3 border-2 border-dashed rounded-xl cursor-pointer transition-colors\"\n                            style={{borderColor: '#819067'}}\n                            onMouseEnter={(e) => {\n                              (e.target as HTMLElement).style.borderColor = '#0a400c';\n                              (e.target as HTMLElement).style.backgroundColor = '#b1ab86';\n                            }}\n                            onMouseLeave={(e) => {\n                              (e.target as HTMLElement).style.borderColor = '#819067';\n                              (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                            }}\n                          >\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"text-2xl\">üì∏</span>\n                              <span className=\"text-sm font-medium text-gray-700\">\n                                Upload Photo or Video\n                              </span>\n                            </div>\n                            <input\n                              type=\"file\"\n                              accept=\"image/*,video/*\"\n                              multiple\n                              className=\"hidden\"\n                              onChange={(e) => {\n                                if (e.target.files) {\n                                  Array.from(e.target.files).forEach((file) => {\n                                    handleMediaUpload(dayIndex, file);\n                                  });\n                                }\n                              }}\n                              disabled={isMediaUploading}\n                            />\n                          </label>\n                        </div>\n\n                        {/* Activities Section */}\n                        <div className=\"p-6 space-y-6\">\n                          {day.activities.length > 0 ? (\n                            day.activities.map((activity) => (\n                              <div\n                                key={activity.id}\n                                className=\"border border-gray-200 rounded-xl p-4 transition-colors\"\n                                style={{borderColor: '#b1ab86'}}\n                                onMouseEnter={(e) => (e.target as HTMLElement).style.borderColor = '#819067'}\n                                onMouseLeave={(e) => (e.target as HTMLElement).style.borderColor = '#b1ab86'}\n                              >\n                                <div className=\"flex items-start justify-between mb-3\">\n                                  <div className=\"flex items-center space-x-3\">\n                                    <div className=\"text-2xl\">\n                                      {getActivityTypeIcon(activity.category)}\n                                    </div>\n                                    <div>\n                                      <h5 className=\"font-semibold text-gray-900\">\n                                        {activity.title}\n                                      </h5>\n                                      <p className=\"text-sm text-gray-600\">\n                                        {activity.time}\n                                      </p>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center space-x-2\">\n                                    <span\n                                      className={`px-3 py-1 text-xs font-medium rounded-full border ${getCategoryColor(\n                                        activity.category\n                                      )}`}\n                                    >\n                                      {activity.category}\n                                    </span>\n                                    {activity.cost !== undefined &&\n                                      activity.cost !== null && (\n                                        <span className=\"px-3 py-1 text-xs font-medium rounded-full\" style={{backgroundColor: '#b1ab86', color: '#0a400c'}}>\n                                          ${activity.cost}\n                                        </span>\n                                      )}\n                                    <button\n                                      onClick={() =>\n                                        openActivityModal(dayIndex, activity)\n                                      }\n                                      className=\"p-2 rounded-full transition-colors\"\n                                      style={{color: '#819067'}}\n                                      onMouseEnter={(e) => {\n                                        (e.target as HTMLElement).style.color = '#0a400c';\n                                        (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                                      }}\n                                      onMouseLeave={(e) => {\n                                        (e.target as HTMLElement).style.color = '#819067';\n                                        (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                                      }}\n                                      title=\"Edit Activity\"\n                                    >\n                                      ‚úèÔ∏è\n                                    </button>\n                                    <button\n                                      onClick={() =>\n                                        handleDeleteActivity(\n                                          dayIndex,\n                                          activity.id\n                                        )\n                                      }\n                                      className=\"p-2 rounded-full transition-colors\"\n                                      style={{color: '#b1ab86'}}\n                                      onMouseEnter={(e) => {\n                                        (e.target as HTMLElement).style.color = '#0a400c';\n                                        (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                                      }}\n                                      onMouseLeave={(e) => {\n                                        (e.target as HTMLElement).style.color = '#b1ab86';\n                                        (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                                      }}\n                                      title=\"Delete Activity\"\n                                    >\n                                      üóëÔ∏è\n                                    </button>\n                                  </div>\n                                </div>\n\n                                {activity.description && (\n                                  <p className=\"text-gray-700 text-sm leading-relaxed mb-3\">\n                                    {activity.description}\n                                  </p>\n                                )}\n\n                                {activity.location && (\n                                  <div className=\"flex items-center text-sm text-gray-600\">\n                                    <svg\n                                      className=\"w-4 h-4 mr-1\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth={2}\n                                        d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\n                                      />\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth={2}\n                                        d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\n                                      />\n                                    </svg>\n                                    {activity.location}\n                                  </div>\n                                )}\n                              </div>\n                            ))\n                          ) : (\n                            <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-xl\">\n                              <div className=\"text-4xl mb-4\">üìù</div>\n                              <h5 className=\"font-medium text-primary mb-2\">\n                                No activities planned\n                              </h5>\n                              <p className=\"text-secondary text-sm mb-4\">\n                                Add activities to make the most of this day\n                              </p>\n                              <button\n                                onClick={() => openActivityModal(dayIndex)}\n                                className=\"btn-primary text-white px-6 py-2 rounded-lg font-medium transition-all duration-200\"\n                              >\n                                + Add Activity\n                              </button>\n                            </div>\n                          )}\n\n                          {/* Accommodation Section */}\n                          {day.accommodation && (\n                            <div className=\"rounded-xl p-4\" style={{backgroundColor: '#fefae0', border: '1px solid #819067'}}>\n                              <h5 className=\"font-semibold text-gray-900 mb-2 flex items-center\">\n                                üè® Accommodation\n                              </h5>\n                              <div className=\"space-y-2\">\n                                <p className=\"font-medium text-gray-900\">\n                                  {day.accommodation.name}\n                                </p>\n                                <p className=\"text-sm text-gray-600\">\n                                  {day.accommodation.address}\n                                </p>\n                                <div className=\"flex items-center space-x-4 text-sm\">\n                                  <span className=\"text-gray-600\">\n                                    Check-in:{\" \"}\n                                    {format(\n                                      parseISO(day.accommodation.checkIn),\n                                      \"MMM d\"\n                                    )}\n                                  </span>\n                                  <span className=\"text-gray-600\">\n                                    Check-out:{\" \"}\n                                    {format(\n                                      parseISO(day.accommodation.checkOut),\n                                      \"MMM d\"\n                                    )}\n                                  </span>\n                                  <span className=\"font-medium\" style={{color: '#819067'}}>\n                                    ${day.accommodation.cost}\n                                  </span>\n                                </div>\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Day Stats */}\n                          <div className=\"grid grid-cols-3 gap-4 pt-4 border-t border-gray-100\">\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold\" style={{color: '#0a400c'}}>\n                                ${day.actualSpent || 0}\n                              </div>\n                              <div className=\"text-xs text-gray-600\">Spent</div>\n                            </div>\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold\" style={{color: '#819067'}}>\n                                {day.activities.reduce(\n                                  (sum, activity) =>\n                                    sum + (activity.duration || 0),\n                                  0\n                                )}\n                                m\n                              </div>\n                              <div className=\"text-xs text-gray-600\">\n                                Duration\n                              </div>\n                            </div>\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold\" style={{color: '#819067'}}>\n                                {\n                                  day.activities.filter(\n                                    (activity) => activity.completed\n                                  ).length\n                                }\n                                /{day.activities.length}\n                              </div>\n                              <div className=\"text-xs text-gray-600\">\n                                Complete\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Quick Actions */}\n                          <div className=\"flex space-x-3 pt-4\">\n                            <button\n                              onClick={() => openActivityModal(dayIndex)}\n                              className=\"flex-1 btn-primary text-white py-2 px-4 rounded-lg font-medium transition-all duration-200\"\n                            >\n                              + Add Activity\n                            </button>\n                            <button\n                              onClick={() => openNotesModal(dayIndex)}\n                              className=\"flex-1 glass text-primary py-2 px-4 rounded-lg font-medium hover:bg-accent hover:bg-opacity-10 transition-colors\"\n                            >\n                              üìù Add Notes\n                            </button>\n                            <button\n                              onClick={() => openExpenseModal(dayIndex)}\n                              className=\"flex-1 glass text-primary py-2 px-4 rounded-lg font-medium hover:bg-accent hover:bg-opacity-10 transition-colors\"\n                            >\n                              üí∞ Add Expense\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Add Another Day Button */}\n        {onAddDay && (\n          <div className=\"relative ml-20 mt-8\">\n            <div className=\"absolute left-[-52px] w-5 h-5 bg-primary border-4 border-bg rounded-full shadow-lg\"></div>\n            <div className=\"glass rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 border border-secondary border-opacity-20\">\n              <div className=\"text-center\">\n                <div className=\"text-4xl mb-4\">‚ûï</div>\n                <h3 className=\"text-xl font-bold text-primary mb-2\">\n                  Add Another Day\n                </h3>\n                <p className=\"text-secondary mb-4\">\n                  Continue your adventure with more activities!\n                </p>\n                <button\n                  onClick={onAddDay}\n                  className=\"btn-primary text-white px-6 py-3 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n                >\n                  + Add Day {itinerary.length + 1}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* End of Timeline */}\n        <div className=\"relative ml-20 mt-8\">\n          <div className=\"absolute left-[-52px] w-5 h-5 border-4 border-white rounded-full shadow-lg\" style={{backgroundColor: '#819067'}}></div>\n          <div className=\"text-white p-6 rounded-2xl shadow-lg\" style={{background: 'linear-gradient(135deg, #819067 0%, #0a400c 100%)'}}>\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-4\">üéâ</div>\n              <h3 className=\"text-xl font-bold mb-2\">Journey Complete!</h3>\n              <p style={{color: '#fefae0', opacity: 0.9}}>\n                What an amazing adventure you've had!\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Add Activity Modal */}\n      {activityModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                {activityModal.activity ? \"Edit Activity\" : \"Add Activity\"} ¬∑\n                Day {activityModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeActivityModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Title *\n                </label>\n                <input\n                  type=\"text\"\n                  value={activityTitle}\n                  onChange={(e) => setActivityTitle(e.target.value)}\n                  placeholder=\"e.g., Morning Hike\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Time & Location\n                </label>\n                <input\n                  type=\"text\"\n                  value={activityTime}\n                  onChange={(e) => setActivityTime(e.target.value)}\n                  placeholder=\"e.g., 9:00 AM ¬∑ Zion National Park\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Type of Day\n                  </label>\n                  <select\n                    value={activityType}\n                    onChange={(e) =>\n                      setActivityType(e.target.value as Activity[\"type\"])\n                    }\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"morning\">Morning</option>\n                    <option value=\"afternoon\">Afternoon</option>\n                    <option value=\"evening\">Evening</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Category\n                  </label>\n                  <select\n                    value={activityCategory}\n                    onChange={(e) =>\n                      setActivityCategory(\n                        e.target.value as Activity[\"category\"]\n                      )\n                    }\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"sightseeing\">Sightseeing</option>\n                    <option value=\"food\">Food</option>\n                    <option value=\"transport\">Transport</option>\n                    <option value=\"accommodation\">Accommodation</option>\n                    <option value=\"shopping\">Shopping</option>\n                    <option value=\"entertainment\">Entertainment</option>\n                    <option value=\"other\">Other</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Location\n                </label>\n                <input\n                  type=\"text\"\n                  value={activityLocation}\n                  onChange={(e) => setActivityLocation(e.target.value)}\n                  placeholder=\"Optional location details\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Description\n                </label>\n                <textarea\n                  value={activityDescription}\n                  onChange={(e) => setActivityDescription(e.target.value)}\n                  rows={3}\n                  placeholder=\"Share details to remember\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Estimated Cost\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  value={activityCost}\n                  onChange={(e) => setActivityCost(e.target.value)}\n                  placeholder=\"Optional cost\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeActivityModal}\n                  className=\"flex-1 px-4 py-3 border border-secondary border-opacity-30 text-secondary rounded-lg hover:bg-secondary hover:bg-opacity-5 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSubmitActivity}\n                  className=\"flex-1 btn-primary py-3 px-4 rounded-lg font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={activityTitle.trim() === \"\" || isActivitySaving}\n                >\n                  {isActivitySaving ? \"Saving...\" : \"Save Activity\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Notes Modal */}\n      {notesModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                üìù Day Notes ¬∑ Day {notesModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeNotesModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Notes\n                </label>\n                <textarea\n                  value={notesValue}\n                  onChange={(e) => setNotesValue(e.target.value)}\n                  rows={5}\n                  placeholder=\"Add notes about this day...\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeNotesModal}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveNotes}\n                  className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={isNotesSaving}\n                >\n                  {isNotesSaving ? \"Saving...\" : \"Save Notes\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Expense Modal */}\n      {expenseModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                üí∞ Add Expense ¬∑ Day {expenseModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeExpenseModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Description *\n                </label>\n                <input\n                  type=\"text\"\n                  value={expenseTitle}\n                  onChange={(e) => setExpenseTitle(e.target.value)}\n                  placeholder=\"e.g., Lunch at restaurant\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Amount *\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={expenseAmount}\n                    onChange={(e) => setExpenseAmount(e.target.value)}\n                    placeholder=\"0.00\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Category\n                  </label>\n                  <select\n                    value={expenseCategory}\n                    onChange={(e) => setExpenseCategory(e.target.value as any)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"food\">üçΩÔ∏è Food</option>\n                    <option value=\"transport\">üöó Transport</option>\n                    <option value=\"accommodation\">üè® Accommodation</option>\n                    <option value=\"shopping\">üõçÔ∏è Shopping</option>\n                    <option value=\"activities\">üé≠ Activities</option>\n                    <option value=\"other\">üìå Other</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeExpenseModal}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveExpense}\n                  className=\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={\n                    !expenseTitle.trim() ||\n                    !expenseAmount.trim() ||\n                    isExpenseSaving\n                  }\n                >\n                  {isExpenseSaving ? \"Saving...\" : \"Add Expense\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2908, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/PackingList.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { PackingItem } from '@/types/itinerary';\n\ninterface PackingListProps {\n  packingList: PackingItem[];\n  onUpdatePackingList: (packingList: PackingItem[]) => void;\n}\n\nexport default function PackingList({ packingList, onUpdatePackingList }: PackingListProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newItem, setNewItem] = useState({\n    name: '',\n    category: 'other' as PackingItem['category'],\n    quantity: 1,\n    essential: false,\n    notes: ''\n  });\n  const [filter, setFilter] = useState<'all' | 'packed' | 'unpacked' | 'essential'>('all');\n\n  const categories = [\n    { id: 'clothing', name: 'Clothing', icon: 'üëï', color: 'text-primary', bgColor: '#fefae0' },\n    { id: 'electronics', name: 'Electronics', icon: 'üì±', color: 'text-secondary', bgColor: '#fefae0' },\n    { id: 'toiletries', name: 'Toiletries', icon: 'üß¥', color: 'text-accent', bgColor: '#fefae0' },\n    { id: 'documents', name: 'Documents', icon: 'üìÑ', color: 'text-primary', bgColor: '#b1ab86' },\n    { id: 'medications', name: 'Medications', icon: 'üíä', color: 'text-secondary', bgColor: '#b1ab86' },\n    { id: 'accessories', name: 'Accessories', icon: 'üëú', color: 'text-accent', bgColor: '#819067' },\n    { id: 'other', name: 'Other', icon: 'üì¶', color: 'text-primary', bgColor: '#819067' },\n  ];\n\n  const getCategoryInfo = (categoryId: string) => \n    categories.find(cat => cat.id === categoryId) || categories[categories.length - 1];\n\n  const togglePacked = (itemId: string) => {\n    const updatedList = packingList.map(item =>\n      item.id === itemId ? { ...item, packed: !item.packed } : item\n    );\n    onUpdatePackingList(updatedList);\n  };\n\n  const addItem = () => {\n    if (!newItem.name.trim()) return;\n    \n    const item: PackingItem = {\n      id: Date.now().toString(),\n      ...newItem,\n      name: newItem.name.trim(),\n      packed: false\n    };\n    \n    onUpdatePackingList([...packingList, item]);\n    setNewItem({ name: '', category: 'other', quantity: 1, essential: false, notes: '' });\n    setShowAddForm(false);\n  };\n\n  const removeItem = (itemId: string) => {\n    onUpdatePackingList(packingList.filter(item => item.id !== itemId));\n  };\n\n  const filteredItems = packingList.filter(item => {\n    switch (filter) {\n      case 'packed': return item.packed;\n      case 'unpacked': return !item.packed;\n      case 'essential': return item.essential;\n      default: return true;\n    }\n  });\n\n  const groupedItems = categories.reduce((acc, category) => {\n    acc[category.id] = filteredItems.filter(item => item.category === category.id);\n    return acc;\n  }, {} as Record<string, PackingItem[]>);\n\n  const packedCount = packingList.filter(item => item.packed).length;\n  const totalCount = packingList.length;\n  const essentialCount = packingList.filter(item => item.essential && !item.packed).length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header Stats */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Packing List</h2>\n            <p className=\"text-gray-600\">Keep track of everything you need</p>\n          </div>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"btn-primary px-6 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 border-2 border-primary hover:border-secondary\"\n            style={{\n              background: 'linear-gradient(to right, #0A400C, #819067)',\n              color: '#FEFAE0'\n            }}\n          >\n            + Add Item\n          </button>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-6\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-sm font-medium text-gray-700\">\n              Progress: {packedCount}/{totalCount} items packed\n            </span>\n            <span className=\"text-sm font-medium text-primary\">\n              {totalCount > 0 ? Math.round((packedCount / totalCount) * 100) : 0}%\n            </span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n            <div \n              className=\"bg-primary h-3 rounded-full transition-all duration-300\"\n              style={{ width: `${totalCount > 0 ? (packedCount / totalCount) * 100 : 0}%` }}\n            ></div>\n          </div>\n          {essentialCount > 0 && (\n            <p className=\"text-sm mt-2\" style={{color: '#0a400c'}}>\n              ‚ö†Ô∏è {essentialCount} essential item{essentialCount > 1 ? 's' : ''} still need{essentialCount === 1 ? 's' : ''} to be packed\n            </p>\n          )}\n        </div>\n\n        {/* Filter Buttons */}\n        <div className=\"flex flex-wrap gap-2\">\n          {[\n            { id: 'all', name: 'All Items', count: packingList.length },\n            { id: 'unpacked', name: 'To Pack', count: packingList.length - packedCount },\n            { id: 'packed', name: 'Packed', count: packedCount },\n            { id: 'essential', name: 'Essential', count: packingList.filter(item => item.essential).length },\n          ].map(filterOption => (\n            <button\n              key={filterOption.id}\n              onClick={() => setFilter(filterOption.id as any)}\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n                filter === filterOption.id\n                  ? 'bg-primary text-white shadow-lg'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {filterOption.name} ({filterOption.count})\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Add Item Modal */}\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-md w-full p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add Packing Item</h3>\n              <button\n                onClick={() => setShowAddForm(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <input\n                type=\"text\"\n                value={newItem.name}\n                onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}\n                placeholder=\"Item name\"\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n\n              <select\n                value={newItem.category}\n                onChange={(e) => setNewItem({ ...newItem, category: e.target.value as PackingItem['category'] })}\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                {categories.map(category => (\n                  <option key={category.id} value={category.id}>\n                    {category.icon} {category.name}\n                  </option>\n                ))}\n              </select>\n\n              <input\n                type=\"number\"\n                value={newItem.quantity}\n                onChange={(e) => setNewItem({ ...newItem, quantity: Math.max(1, parseInt(e.target.value) || 1) })}\n                placeholder=\"Quantity\"\n                min=\"1\"\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n\n              <textarea\n                value={newItem.notes}\n                onChange={(e) => setNewItem({ ...newItem, notes: e.target.value })}\n                placeholder=\"Notes (optional)\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\n              />\n\n              <label className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={newItem.essential}\n                  onChange={(e) => setNewItem({ ...newItem, essential: e.target.checked })}\n                  className=\"w-5 h-5 text-primary border-secondary border-opacity-30 rounded focus:ring-primary\"\n                />\n                <span className=\"text-sm font-medium text-gray-700\">Mark as essential</span>\n              </label>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"flex-1 px-4 py-3 border border-secondary border-opacity-30 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={addItem}\n                  className=\"flex-1 bg-gradient-to-r from-primary to-secondary text-white py-3 px-4 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n                >\n                  Add Item\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Packing Items by Category */}\n      <div className=\"space-y-6\">\n        {categories.map(category => {\n          const items = groupedItems[category.id];\n          if (items.length === 0) return null;\n\n          return (\n            <div key={category.id} className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-2xl\">{category.icon}</span>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{category.name}</h3>\n                  <span \n                    className=\"px-2 py-1 rounded-full text-xs font-medium\"\n                    style={{\n                      backgroundColor: category.bgColor,\n                      color: category.color === 'text-primary' ? '#0a400c' : \n                             category.color === 'text-secondary' ? '#819067' : '#b1ab86'\n                    }}\n                  >\n                    {items.filter(item => item.packed).length}/{items.length}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                {items.map(item => (\n                  <div\n                    key={item.id}\n                    className={`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 ${\n                      item.packed\n                        ? 'opacity-75'\n                        : item.essential\n                        ? 'border-primary'\n                        : ''\n                    }`}\n                    style={{\n                      backgroundColor: item.packed ? '#b1ab86' : item.essential ? '#fefae0' : '#fefae0',\n                      borderColor: item.packed ? '#819067' : item.essential ? '#0a400c' : '#819067'\n                    }}\n                  >\n                    <div className=\"flex items-center space-x-4\">\n                      <button\n                        onClick={() => togglePacked(item.id)}\n                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${\n                          item.packed\n                            ? 'text-white'\n                            : 'hover:border-secondary'\n                        }`}\n                        style={{\n                          backgroundColor: item.packed ? '#819067' : 'transparent',\n                          borderColor: item.packed ? '#819067' : '#B1AB86'\n                        }}\n                      >\n                        {item.packed && (\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                          </svg>\n                        )}\n                      </button>\n\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className={`font-medium ${item.packed ? 'line-through text-gray-500' : 'text-gray-900'}`}>\n                            {item.name}\n                          </span>\n                          {item.essential && (\n                            <span className=\"px-2 py-1 text-xs font-medium rounded-full\" style={{backgroundColor: '#b1ab86', color: '#0a400c'}}>\n                              Essential\n                            </span>\n                          )}\n                          {item.quantity > 1 && (\n                            <span className=\"px-2 py-1 text-xs font-medium rounded-full\" style={{backgroundColor: '#FEFAE0', color: '#819067'}}>\n                              x{item.quantity}\n                            </span>\n                          )}\n                        </div>\n                        {item.notes && (\n                          <p className=\"text-sm text-gray-500 mt-1\">{item.notes}</p>\n                        )}\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={() => removeItem(item.id)}\n                      className=\"p-2 rounded-lg transition-colors\"\n                      style={{color: '#b1ab86'}}\n                      onMouseEnter={(e) => {\n                        (e.target as HTMLElement).style.color = '#0a400c';\n                        (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                      }}\n                      onMouseLeave={(e) => {\n                        (e.target as HTMLElement).style.color = '#b1ab86';\n                        (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                      }}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {filteredItems.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-4xl\">üß≥</span>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No items found</h3>\n          <p className=\"text-gray-600 mb-6\">\n            {filter === 'all' ? 'Start by adding items to your packing list' : `No ${filter} items to show`}\n          </p>\n          {filter === 'all' && (\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n            >\n              Add Your First Item\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3700, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/ExpenseTracker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Expense } from \"@/types/itinerary\";\nimport { format, parseISO } from \"date-fns\";\n\ninterface ExpenseTrackerProps {\n  expenses: Expense[];\n  budget: number;\n  currency: string;\n  onUpdateExpenses: (expenses: Expense[]) => void;\n}\n\nexport default function ExpenseTracker({\n  expenses,\n  budget,\n  currency,\n  onUpdateExpenses,\n}: ExpenseTrackerProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newExpense, setNewExpense] = useState({\n    title: \"\",\n    amount: 0,\n    category: \"other\" as Expense[\"category\"],\n    date: new Date().toISOString().split(\"T\")[0],\n    description: \"\",\n  });\n  const [filter, setFilter] = useState<\"all\" | Expense[\"category\"]>(\"all\");\n\n  const categories = [\n    {\n      id: \"accommodation\",\n      name: \"Accommodation\", \n      icon: \"üè®\",\n      color: \"text-primary\",\n      bgColor: \"#fefae0\",\n    },\n    {\n      id: \"food\",\n      name: \"Food & Drinks\",\n      icon: \"üçΩÔ∏è\", \n      color: \"text-secondary\",\n      bgColor: \"#fefae0\",\n    },\n    {\n      id: \"transport\",\n      name: \"Transport\",\n      icon: \"üöó\",\n      color: \"text-accent\",\n      bgColor: \"#fefae0\",\n    },\n    {\n      id: \"activities\",\n      name: \"Activities\",\n      icon: \"üéØ\",\n      color: \"text-primary\",\n      bgColor: \"#b1ab86\",\n    },\n    {\n      id: \"shopping\",\n      name: \"Shopping\", \n      icon: \"üõçÔ∏è\",\n      color: \"text-secondary\",\n      bgColor: \"#b1ab86\",\n    },\n    {\n      id: \"other\",\n      name: \"Other\",\n      icon: \"üì¶\",\n      color: \"text-accent\",\n      bgColor: \"#819067\",\n    },\n  ];\n\n  const getCategoryInfo = (categoryId: string) =>\n    categories.find((cat) => cat.id === categoryId) ||\n    categories[categories.length - 1];\n\n  const addExpense = () => {\n    if (!newExpense.title.trim() || newExpense.amount <= 0) return;\n\n    const expense: Expense = {\n      id: Date.now().toString(),\n      ...newExpense,\n      currency,\n      title: newExpense.title.trim(),\n    };\n\n    onUpdateExpenses([...expenses, expense]);\n    setNewExpense({\n      title: \"\",\n      amount: 0,\n      category: \"other\",\n      date: new Date().toISOString().split(\"T\")[0],\n      description: \"\",\n    });\n    setShowAddForm(false);\n  };\n\n  const removeExpense = async (expenseId: string) => {\n    // Remove from local state first\n    const updatedExpenses = expenses.filter(\n      (expense) => expense.id !== expenseId\n    );\n    onUpdateExpenses(updatedExpenses);\n\n    // Delete from database\n    try {\n      const { deleteExpense } = await import(\"@/lib/trip-service\");\n      await deleteExpense(expenseId);\n      console.log(\"Expense deleted successfully\");\n    } catch (error) {\n      console.error(\"Error deleting expense:\", error);\n    }\n  };\n\n  const filteredExpenses = expenses.filter(\n    (expense) => filter === \"all\" || expense.category === filter\n  );\n\n  const totalSpent = expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  const remaining = budget - totalSpent;\n  const spentPercentage = budget > 0 ? (totalSpent / budget) * 100 : 0;\n\n  const expensesByCategory = categories\n    .map((category) => ({\n      ...category,\n      total: expenses\n        .filter((expense) => expense.category === category.id)\n        .reduce((sum, expense) => sum + expense.amount, 0),\n      count: expenses.filter((expense) => expense.category === category.id)\n        .length,\n    }))\n    .filter((category) => category.count > 0);\n\n  const getBudgetStatus = () => {\n    if (spentPercentage > 100)\n      return {\n        color: \"#0a400c\",\n        bg: \"#0a400c\", \n        status: \"Over Budget!\",\n      };\n    if (spentPercentage > 80)\n      return {\n        color: \"#819067\",\n        bg: \"#b1ab86\",\n        status: \"Close to Limit\",\n      };\n    return { color: \"#819067\", bg: \"#819067\", status: \"On Track\" };\n  };\n\n  const budgetStatus = getBudgetStatus();\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Budget Overview */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">\n              Expense Tracker\n            </h2>\n            <p className=\"text-gray-600\">\n              Monitor your spending and stay on budget\n            </p>\n          </div>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"btn-primary px-6 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 border-2 border-primary hover:border-secondary\"\n            style={{\n              background: 'linear-gradient(to right, #0A400C, #819067)',\n              color: '#FEFAE0'\n            }}\n          >\n            + Add Expense\n          </button>\n        </div>\n\n        {/* Budget Progress */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-accent border-opacity-30\">\n            <div className=\"text-3xl font-bold text-primary mb-1\">\n              {budget.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Total Budget</div>\n          </div>\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-primary border-opacity-30\">\n            <div className=\"text-3xl font-bold text-primary mb-1\">\n              {totalSpent.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Total Spent</div>\n          </div>\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-secondary border-opacity-30\">\n            <div\n              className=\"text-3xl font-bold mb-1\"\n              style={{color: remaining >= 0 ? '#819067' : '#0a400c'}}\n            >\n              {remaining.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Remaining</div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-sm font-medium text-gray-700\">\n              Budget Usage\n            </span>\n            <span className=\"text-sm font-bold bg-white/90 text-primary px-2 py-1 rounded-full border border-primary border-opacity-30 shadow-sm backdrop-blur-sm\">\n              {Math.round(spentPercentage)}% ‚Ä¢ {budgetStatus.status}\n            </span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n            <div\n              className={`h-3 rounded-full transition-all duration-500 ${budgetStatus.bg}`}\n              style={{ width: `${Math.min(spentPercentage, 100)}%` }}\n            ></div>\n          </div>\n        </div>\n\n        {/* Category Breakdown */}\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n          {expensesByCategory.map((category) => (\n            <div\n              key={category.id}\n              className=\"text-center p-3 bg-gray-50 rounded-xl\"\n            >\n              <div className=\"text-2xl mb-1\">{category.icon}</div>\n              <div className=\"text-sm font-medium text-gray-900\">\n                {category.total.toLocaleString()} {currency}\n              </div>\n              <div className=\"text-xs text-gray-600\">{category.name}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Add Expense Modal */}\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-md w-full p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add Expense</h3>\n              <button\n                onClick={() => setShowAddForm(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <input\n                type=\"text\"\n                value={newExpense.title}\n                onChange={(e) =>\n                  setNewExpense({ ...newExpense, title: e.target.value })\n                }\n                placeholder=\"Expense title\"\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n\n              <div className=\"flex space-x-3\">\n                <input\n                  type=\"number\"\n                  value={newExpense.amount || \"\"}\n                  onChange={(e) =>\n                    setNewExpense({\n                      ...newExpense,\n                      amount: parseFloat(e.target.value) || 0,\n                    })\n                  }\n                  placeholder=\"Amount\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  className=\"flex-1 px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n                <div className=\"px-4 py-3 bg-gray-100 rounded-xl text-gray-700 font-medium\">\n                  {currency}\n                </div>\n              </div>\n\n              <select\n                value={newExpense.category}\n                onChange={(e) =>\n                  setNewExpense({\n                    ...newExpense,\n                    category: e.target.value as Expense[\"category\"],\n                  })\n                }\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                {categories.map((category) => (\n                  <option key={category.id} value={category.id}>\n                    {category.icon} {category.name}\n                  </option>\n                ))}\n              </select>\n\n              <input\n                type=\"date\"\n                value={newExpense.date}\n                onChange={(e) =>\n                  setNewExpense({ ...newExpense, date: e.target.value })\n                }\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n\n              <textarea\n                value={newExpense.description}\n                onChange={(e) =>\n                  setNewExpense({ ...newExpense, description: e.target.value })\n                }\n                placeholder=\"Description (optional)\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\n              />\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"flex-1 px-4 py-3 border border-secondary border-opacity-30 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={addExpense}\n                  className=\"flex-1 bg-gradient-to-r from-primary to-secondary text-white py-3 px-4 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n                >\n                  Add Expense\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Filter Buttons */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/20\">\n        <div className=\"flex flex-wrap gap-2\">\n          <button\n            onClick={() => setFilter(\"all\")}\n            className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n              filter === \"all\"\n                ? \"text-white shadow-lg\"\n                : \"text-gray-700 hover:bg-gray-200\"\n            }`}\n            style={{\n              backgroundColor: filter === \"all\" ? \"#0a400c\" : \"#fefae0\",\n            }}\n          >\n            All Expenses ({expenses.length})\n          </button>\n          {categories.map((category) => {\n            const count = expenses.filter(\n              (expense) => expense.category === category.id\n            ).length;\n            if (count === 0) return null;\n\n            return (\n              <button\n                key={category.id}\n                onClick={() => setFilter(category.id as Expense[\"category\"])}\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n                  filter === category.id\n                    ? \"text-white shadow-lg\"\n                    : \"text-gray-700 hover:bg-gray-200\"\n                }`}\n                style={{\n                  backgroundColor: filter === category.id ? \"#819067\" : \"#fefae0\",\n                }}\n              >\n                {category.icon} {category.name} ({count})\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"space-y-4\">\n        {filteredExpenses.length > 0 ? (\n          filteredExpenses\n            .sort(\n              (a, b) => parseISO(b.date).getTime() - parseISO(a.date).getTime()\n            )\n            .map((expense) => {\n              const categoryInfo = getCategoryInfo(expense.category);\n              return (\n                <div\n                  key={expense.id}\n                  className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-200\"\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className=\"text-3xl\">{categoryInfo.icon}</div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-lg font-semibold text-gray-900\">\n                          {expense.title}\n                        </h3>\n                        <div className=\"flex items-center space-x-4 mt-1\">\n                          <span\n                            className={`px-3 py-1 rounded-full text-xs font-medium ${categoryInfo.color}`}\n                            style={{\n                              backgroundColor: categoryInfo.bgColor,\n                              color: categoryInfo.color === 'text-primary' ? '#0a400c' : \n                                     categoryInfo.color === 'text-secondary' ? '#819067' : '#b1ab86'\n                            }}\n                          >\n                            {categoryInfo.name}\n                          </span>\n                          <span className=\"text-sm text-gray-600\">\n                            {format(parseISO(expense.date), \"MMM d, yyyy\")}\n                          </span>\n                        </div>\n                        {expense.description && (\n                          <p className=\"text-sm text-gray-600 mt-2\">\n                            {expense.description}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"text-right\">\n                        <div className=\"text-2xl font-bold text-gray-900\">\n                          {expense.amount.toLocaleString()} {expense.currency}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => removeExpense(expense.id)}\n                        className=\"p-2 text-gray-400 rounded-lg transition-colors\"\n                        style={{\n                          color: '#b1ab86'\n                        }}\n                        onMouseEnter={(e) => {\n                          (e.target as HTMLElement).style.color = '#0a400c';\n                          (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                        }}\n                        onMouseLeave={(e) => {\n                          (e.target as HTMLElement).style.color = '#b1ab86';\n                          (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                        }}\n                      >\n                        <svg\n                          className=\"w-5 h-5\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                          />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-4xl\">üí∞</span>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              No expenses found\n            </h3>\n            <p className=\"text-gray-600 mb-6\">\n              {filter === \"all\"\n                ? \"Start tracking your trip expenses\"\n                : `No ${getCategoryInfo(\n                    filter\n                  ).name.toLowerCase()} expenses to show`}\n            </p>\n            {filter === \"all\" && (\n              <button\n                onClick={() => setShowAddForm(true)}\n                className=\"bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n              >\n                Add Your First Expense\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4566, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/lib/trip-service.ts"],"sourcesContent":["import { createClient } from './auth';\nimport { DbTrip, DbTripDay, DbEvent, DbPackingItem, DbExpense } from './supabase-client';\nimport { Trip, ItineraryDay, Activity, ActivityInput, PackingItem, Expense } from '@/types/itinerary';\n\n// Create a shared Supabase client instance\nconst supabase = createClient();\n\nconst parseFlexibleTime = (input?: string | null): string | null => {\n  if (!input) return null;\n\n  const trimmed = input.trim().toLowerCase();\n  if (!trimmed) return null;\n\n  const match = trimmed.match(/^(\\d{1,2})(?::(\\d{2}))?\\s*(am|pm)?$/i);\n  if (!match) return null;\n\n  let hours = parseInt(match[1], 10);\n  const minutes = match[2] ? parseInt(match[2], 10) : 0;\n  const meridiem = match[3]?.toLowerCase();\n\n  if (Number.isNaN(hours) || Number.isNaN(minutes) || minutes < 0 || minutes > 59) {\n    return null;\n  }\n\n  if (meridiem === 'am') {\n    hours = hours % 12;\n  } else if (meridiem === 'pm') {\n    hours = (hours % 12) + 12;\n  }\n\n  if (hours < 0 || hours > 23) {\n    return null;\n  }\n\n  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n};\n\nconst inferActivityType = (time?: string | null): Activity['type'] => {\n  if (!time) return 'morning';\n\n  const [hoursString] = time.split(':');\n  const hours = parseInt(hoursString, 10);\n  if (Number.isNaN(hours)) return 'morning';\n\n  if (hours >= 17) return 'evening';\n  if (hours >= 12) return 'afternoon';\n  return 'morning';\n};\n\n// Helper function to create trip days\nasync function createTripDays(tripId: string, startDate: string, endDate: string): Promise<void> {\n  const start = new Date(startDate);\n  const end = new Date(endDate);\n  const dayCount = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n  \n  const tripDays = [];\n  for (let i = 0; i < dayCount; i++) {\n    const dayDate = new Date(start);\n    dayDate.setDate(start.getDate() + i);\n    \n    const title = i === 0 ? 'Arrival Day' : \n                  i === dayCount - 1 ? 'Departure Day' : \n                  `Day ${i + 1}`;\n    \n    tripDays.push({\n      trip_id: tripId,\n      date: dayDate.toISOString().split('T')[0],\n      day_index: i + 1,\n      title: title\n    });\n  }\n  \n  const { error } = await (supabase as any)\n    .from('trip_days')\n    .insert(tripDays);\n  \n  if (error) {\n    if (error.message && error.message.includes('duplicate key')) {\n      return;\n    }\n    throw new Error(`Failed to create trip days: ${error.message}`);\n  }\n}\n\n// Convert database types to app types\nfunction dbTripToTrip(dbTrip: DbTrip, days: ItineraryDay[], packingList: PackingItem[], expenses: Expense[]): Trip {\n  return {\n    id: dbTrip.id,\n    title: dbTrip.title,\n    destination: dbTrip.destination,\n    start_date: dbTrip.start_date,\n    end_date: dbTrip.end_date,\n    description: dbTrip.description || '',\n    budget: dbTrip.budget || 0,\n    currency: dbTrip.currency,\n    travelers: 1, // Default, can be added to DB later\n    packingList,\n    expenses,\n    itinerary: days,\n    created_at: dbTrip.created_at,\n    updated_at: dbTrip.updated_at\n  };\n}\n\nfunction dbEventToActivity(dbEvent: DbEvent): Activity {\n  const normalizedTime = parseFlexibleTime(dbEvent.start_time) ?? dbEvent.start_time ?? '';\n\n  return {\n    id: dbEvent.id,\n    title: dbEvent.title,\n    time: normalizedTime,\n    description: dbEvent.notes ?? undefined,\n    location: dbEvent.location_name ?? undefined,\n    type: inferActivityType(normalizedTime),\n    category: (dbEvent.category as Activity['category']) || 'other',\n    cost: dbEvent.cost_amount ?? undefined,\n    duration: 60,\n    notes: dbEvent.notes ?? undefined,\n    completed: false\n  };\n}\n\nfunction dbPackingItemToPackingItem(dbItem: DbPackingItem): PackingItem {\n  return {\n    id: dbItem.id,\n    name: dbItem.name,\n    category: (dbItem.category as any) || 'other',\n    quantity: 1,\n    packed: dbItem.is_checked,\n    essential: dbItem.priority === 1,\n    notes: ''\n  };\n}\n\nfunction dbExpenseToExpense(dbExpense: DbExpense): Expense {\n  return {\n    id: dbExpense.id,\n    title: dbExpense.label,\n    amount: dbExpense.amount,\n    currency: dbExpense.currency,\n    category: (dbExpense.category as any) || 'other',\n    date: dbExpense.created_at.split('T')[0],\n    description: '',\n    shared: false\n  };\n}\n\n// Trip CRUD operations\nexport async function createTrip(tripData: Omit<Trip, 'id' | 'created_at' | 'updated_at' | 'itinerary' | 'packingList' | 'expenses'>): Promise<string> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated - please log in again');\n  }\n\n  const { data, error } = await (supabase as any)\n    .from('trips')\n    .insert({\n      user_id: user.id,\n      title: tripData.title,\n      destination: tripData.destination,\n      start_date: tripData.start_date,\n      end_date: tripData.end_date,\n      description: tripData.description,\n      currency: tripData.currency\n      // Note: budget and travelers fields may not exist in DB yet\n    })\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Database error: ${error.message}`);\n  }\n  \n  if (!data) {\n    throw new Error('No data returned from trip creation');\n  }\n  \n  // Manually create trip days since the database trigger might not exist\n  try {\n    await createTripDays(data.id, tripData.start_date, tripData.end_date);\n  } catch (dayError) {\n    // Don't fail the entire trip creation if day creation fails\n    // Trip days will be created on-demand when needed\n  }\n  \n  return data.id;\n}\n\nexport async function getTrip(tripId: string): Promise<Trip | null> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return null;\n  }\n\n  // Get trip - check if user is owner OR collaborator\n  const { data: trip, error: tripError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .eq('id', tripId)\n    .single();\n\n  if (tripError || !trip) return null;\n\n  // Check if user is owner or accepted collaborator\n  if (trip.user_id !== user.id) {\n    const { data: collaborator } = await (supabase as any)\n      .from('trip_collaborators')\n      .select('id')\n      .eq('trip_id', tripId)\n      .eq('user_id', user.id)\n      .eq('status', 'accepted')\n      .single();\n    \n    if (!collaborator) return null; // User is not owner or collaborator\n  }\n\n  // Get trip days\n  const { data: dbDays, error: daysError } = await (supabase as any)\n    .from('trip_days')\n    .select('*')\n    .eq('trip_id', tripId)\n    .order('day_index');\n\n  if (daysError) throw daysError;\n\n  // Get events for each day\n  const days: ItineraryDay[] = [];\n  for (const dbDay of dbDays || []) {\n    const { data: dbEvents, error: eventsError } = await (supabase as any)\n      .from('events')\n      .select('*')\n      .eq('trip_day_id', dbDay.id)\n      .order('order_index');\n\n    if (eventsError) throw eventsError;\n\n    const activities = (dbEvents || []).map(dbEventToActivity);\n    \n    days.push({\n      day: dbDay.day_index,\n      date: dbDay.date,\n      activities,\n      notes: dbDay.notes || '',\n      actualSpent: 0,\n      customTitle: dbDay.title\n    });\n  }\n\n  // Get packing items\n  const { data: dbPackingItems, error: packingError } = await (supabase as any)\n    .from('packing_items')\n    .select('*')\n    .eq('trip_id', tripId);\n\n  if (packingError) throw packingError;\n\n  const packingList = (dbPackingItems || []).map(dbPackingItemToPackingItem);\n\n  // Get expenses\n  const { data: dbExpenses, error: expensesError } = await (supabase as any)\n    .from('expenses')\n    .select('*')\n    .eq('trip_id', tripId);\n\n  if (expensesError) throw expensesError;\n\n  const expenses = (dbExpenses || []).map(dbExpenseToExpense);\n\n  return dbTripToTrip(trip, days, packingList, expenses);\n}\n\nexport async function getUserTrips(): Promise<Trip[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return [];\n  }\n\n  // Get trips owned by user\n  const { data: ownedTrips, error: ownedError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .eq('user_id', user.id)\n    .order('created_at', { ascending: false });\n\n  if (ownedError) throw ownedError;\n\n  // Get trips where user is an accepted collaborator\n  const { data: collaboratorTrips, error: collabError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .in('id', \n      (await (supabase as any)\n        .from('trip_collaborators')\n        .select('trip_id')\n        .eq('user_id', user.id)\n        .eq('status', 'accepted')\n      ).data?.map((c: any) => c.trip_id) || []\n    )\n    .order('created_at', { ascending: false });\n\n  if (collabError && collabError.code !== 'PGRST116') throw collabError; // Ignore \"no rows\" error\n\n  // Combine and deduplicate trips\n  const allTrips = [...(ownedTrips || []), ...(collaboratorTrips || [])];\n  const uniqueTrips = Array.from(new Map(allTrips.map((t: DbTrip) => [t.id, t])).values());\n\n  // For now, return trips without full details (for performance)\n  return uniqueTrips.map((trip: DbTrip) => dbTripToTrip(trip, [], [], []));\n}\n\nexport async function updateTripDay(tripId: string, dayIndex: number, updates: Partial<ItineraryDay>): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return;\n  }\n\n  // Find the trip day\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('*')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    \n    // Try to create the missing trip day\n    try {\n      // Get trip info to calculate the date\n      const { data: trip } = await (supabase as any)\n        .from('trips')\n        .select('start_date')\n        .eq('id', tripId)\n        .single();\n      \n      if (trip) {\n        // Instead of creating the trip day, let's just skip the update\n        // The day will be created when the trip is properly initialized\n        return; // Skip the update instead of failing\n      } else {\n        throw new Error('Trip not found');\n      }\n    } catch (createError) {\n      throw new Error(`Trip day not found and could not be created: ${createError}`);\n    }\n  }\n\n  // Update the trip day\n  const updateData: any = {};\n  if (updates.customTitle !== undefined) {\n    updateData.title = updates.customTitle;\n  }\n  if (updates.notes !== undefined) {\n    updateData.notes = updates.notes;\n  }\n\n  if (Object.keys(updateData).length > 0) {\n    const { error } = await (supabase as any)\n      .from('trip_days')\n      .update(updateData)\n      .eq('id', tripDay?.id);\n\n    if (error) {\n      throw new Error(`Failed to update trip day: ${error.message || JSON.stringify(error)}`);\n    }\n  }\n}\n\nexport async function deleteTripDay(tripId: string, dayIndex: number): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    return;\n  }\n\n  const { error } = await (supabase as any)\n    .from('trip_days')\n    .delete()\n    .eq('id', tripDay.id);\n\n  if (error) {\n    throw new Error(`Failed to delete trip day: ${error.message}`);\n  }\n\n}\n\nexport async function addActivity(tripId: string, dayIndex: number, activity: ActivityInput): Promise<Activity> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const startTime = parseFlexibleTime(activity.time);\n\n  const { data, error } = await (supabase as any)\n    .from('events')\n    .insert({\n      trip_day_id: tripDay.id,\n      title: activity.title,\n      start_time: startTime,\n      category: activity.category || 'other',\n      location_name: activity.location ?? null,\n      cost_amount: activity.cost ?? null,\n      cost_currency: activity.cost ? 'USD' : null,\n      notes: activity.description ?? null,\n      order_index: 0\n    })\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Failed to add activity: ${error.message}`);\n  }\n\n  if (!data) {\n    throw new Error('No data returned when creating activity');\n  }\n\n  return dbEventToActivity(data as DbEvent);\n}\n\nexport async function updateActivity(\n  tripId: string,\n  dayIndex: number,\n  activityId: string,\n  updates: ActivityInput\n): Promise<Activity> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const startTime = parseFlexibleTime(updates.time);\n\n  const { data, error } = await (supabase as any)\n    .from('events')\n    .update({\n      title: updates.title,\n      start_time: startTime,\n      category: updates.category || 'other',\n      location_name: updates.location ?? null,\n      cost_amount: updates.cost ?? null,\n      notes: updates.description ?? null\n    })\n    .eq('id', activityId)\n    .eq('trip_day_id', tripDay.id)\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Failed to update activity: ${error.message}`);\n  }\n\n  if (!data) {\n    throw new Error('No data returned when updating activity');\n  }\n\n  return dbEventToActivity(data as DbEvent);\n}\n\nexport async function deleteActivity(tripId: string, dayIndex: number, activityId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const { error } = await (supabase as any)\n    .from('events')\n    .delete()\n    .eq('id', activityId)\n    .eq('trip_day_id', tripDay.id);\n\n  if (error) {\n    throw new Error(`Failed to delete activity: ${error.message}`);\n  }\n}\n\nexport async function deleteTrip(tripId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  // Delete the trip (cascade should handle related records)\n  const { error } = await (supabase as any)\n    .from('trips')\n    .delete()\n    .eq('id', tripId)\n    .eq('user_id', user.id); // Ensure user can only delete their own trips\n\n  if (error) {\n    throw new Error(`Failed to delete trip: ${error.message}`);\n  }\n\n}\n\nexport async function addPackingItem(tripId: string, item: PackingItem): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('packing_items')\n    .insert({\n      trip_id: tripId,\n      name: item.name,\n      category: item.category,\n      is_checked: item.packed,\n      priority: item.essential ? 1 : 2\n    });\n\n  if (error) throw error;\n}\n\nexport async function savePackingList(tripId: string, packingList: PackingItem[]): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  // Delete all existing packing items for this trip\n  await (supabase as any)\n    .from('packing_items')\n    .delete()\n    .eq('trip_id', tripId);\n\n  // Insert new packing items\n  if (packingList.length > 0) {\n    const itemsToInsert = packingList.map(item => ({\n      trip_id: tripId,\n      name: item.name,\n      category: item.category,\n      is_checked: item.packed,\n      priority: item.essential ? 1 : 2\n    }));\n\n    const { error } = await (supabase as any)\n      .from('packing_items')\n      .insert(itemsToInsert);\n\n    if (error) throw error;\n  }\n}\n\nexport async function addExpense(tripId: string, expense: Expense): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n\n  const { error } = await (supabase as any)\n    .from('expenses')\n    .insert({\n      trip_id: tripId,\n      label: expense.title,\n      amount: expense.amount,\n      currency: expense.currency,\n      category: expense.category\n    });\n\n  if (error) {\n    throw new Error(`Failed to add expense: ${error.message || JSON.stringify(error)}`);\n  }\n}\n\nexport async function uploadMedia(\n  tripId: string,\n  dayIndex: number,\n  file: File,\n  mediaType: 'image' | 'video',\n  title?: string,\n  description?: string\n): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${tripId}/${tripDay.id}/${Date.now()}.${fileExt}`;\n  const storagePath = `media/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('trip-media')\n    .upload(storagePath, file, { upsert: false });\n\n  if (uploadError) {\n    throw new Error(`Failed to upload file: ${uploadError.message}`);\n  }\n\n  const { data } = supabase.storage\n    .from('trip-media')\n    .getPublicUrl(storagePath);\n\n  const mediaUrl = data.publicUrl;\n  const { error: dbError } = await (supabase as any)\n    .from('media')\n    .insert({\n      trip_day_id: tripDay.id,\n      type: mediaType,\n      url: mediaUrl,\n      title: title || file.name,\n      description: description || ''\n    });\n  if (dbError) {\n    throw new Error(`Failed to save media record: ${dbError.message || JSON.stringify(dbError)}`);\n  }\n\n}\n\nexport async function deleteMedia(mediaId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data: media, error: fetchError } = await (supabase as any)\n    .from('media')\n    .select('url')\n    .eq('id', mediaId)\n    .single();\n\n  if (fetchError || !media) {\n    throw new Error('Media not found');\n  }\n\n  const url = new URL(media.url);\n  const filePath = url.pathname.split('/storage/v1/object/public/trip-media/')[1];\n\n  const { error: storageError } = await supabase.storage\n    .from('trip-media')\n    .remove([filePath]);\n\n  if (storageError) {\n    // File deletion from storage failed, but continue with DB deletion\n  }\n\n  const { error: dbError } = await (supabase as any)\n    .from('media')\n    .delete()\n    .eq('id', mediaId);\n\n  if (dbError) {\n    throw new Error(`Failed to delete media: ${dbError.message}`);\n  }\n\n}\n\nexport async function getMediaForDay(tripId: string, dayIndex: number): Promise<any[]> {\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    return [];\n  }\n\n  const { data: media, error } = await (supabase as any)\n    .from('media')\n    .select('*')\n    .eq('trip_day_id', tripDay.id)\n    .order('created_at', { ascending: false });\n\n  if (error) {\n    return [];\n  }\n\n  return media || [];\n}\n\nexport async function updateTrip(tripId: string, updates: Partial<Trip>): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const updateData: any = {};\n  if (updates.title !== undefined) updateData.title = updates.title;\n  if (updates.description !== undefined) updateData.description = updates.description;\n  if (updates.budget !== undefined) updateData.budget = updates.budget;\n  if (updates.currency !== undefined) updateData.currency = updates.currency;\n  if (updates.start_date !== undefined) updateData.start_date = updates.start_date;\n  if (updates.end_date !== undefined) updateData.end_date = updates.end_date;\n\n  const { error } = await (supabase as any)\n    .from('trips')\n    .update(updateData)\n    .eq('id', tripId)\n    .eq('user_id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to update trip: ${error.message}`);\n  }\n}\n\nexport async function deleteExpense(expenseId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('expenses')\n    .delete()\n    .eq('id', expenseId);\n\n  if (error) {\n    throw new Error(`Failed to delete expense: ${error.message}`);\n  }\n\n}\n\nexport async function uploadTripCoverImage(tripId: string, file: File): Promise<string> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${tripId}/cover-${Date.now()}.${fileExt}`;\n  const storagePath = `trip-covers/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('trip-media')\n    .upload(storagePath, file, { upsert: true });\n\n  if (uploadError) {\n    throw new Error(`Failed to upload cover image: ${uploadError.message}`);\n  }\n\n  const { data } = supabase.storage\n    .from('trip-media')\n    .getPublicUrl(storagePath);\n\n  const coverImageUrl = data.publicUrl;\n\n  const { error: dbError } = await (supabase as any)\n    .from('trips')\n    .update({ cover_image: coverImageUrl })\n    .eq('id', tripId);\n\n  if (dbError) {\n    throw new Error(`Failed to save cover image: ${dbError.message}`);\n  }\n\n  return coverImageUrl;\n}\n\n// Accommodation functions\nexport async function saveAccommodation(tripId: string, dayIndex: number, accommodation: any): Promise<void> {\n  console.log('saveAccommodation called with:', { tripId, dayIndex, accommodation });\n  \n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  // Get the trip day\n  console.log('Looking for trip_day with tripId:', tripId, 'dayIndex:', dayIndex);\n  \n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('*')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  console.log('Trip day query result:', { tripDay, findError });\n\n  if (findError || !tripDay) {\n    console.error('Trip day not found:', findError);\n    throw new Error(`Trip day not found: ${findError?.message || 'No matching day'}`);\n  }\n\n  // Save accommodation to database\n  const accommodationData = {\n    trip_day_id: tripDay.id,\n    name: accommodation.name,\n    type: accommodation.type,\n    address: accommodation.address,\n    check_in: accommodation.checkIn,\n    check_out: accommodation.checkOut,\n    cost: accommodation.cost,\n    currency: accommodation.currency,\n    rating: accommodation.rating,\n    notes: accommodation.notes,\n    booking_reference: accommodation.bookingReference,\n    contact_info: accommodation.contactInfo\n  };\n  \n  console.log('Inserting accommodation data:', accommodationData);\n  \n  const { data: insertResult, error: dbError } = await (supabase as any)\n    .from('accommodations')\n    .insert(accommodationData)\n    .select();\n\n  console.log('Insert result:', { insertResult, dbError });\n\n  if (dbError) {\n    console.error('Database insert error:', dbError);\n    throw new Error(`Failed to save accommodation: ${dbError.message}`);\n  }\n  \n  console.log('Accommodation saved successfully to database');\n}\n\nexport async function updateAccommodation(accommodationId: string, accommodation: any): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error: dbError } = await (supabase as any)\n    .from('accommodations')\n    .update({\n      name: accommodation.name,\n      type: accommodation.type,\n      address: accommodation.address,\n      check_in: accommodation.checkIn,\n      check_out: accommodation.checkOut,\n      cost: accommodation.cost,\n      currency: accommodation.currency,\n      rating: accommodation.rating,\n      notes: accommodation.notes,\n      booking_reference: accommodation.bookingReference,\n      contact_info: accommodation.contactInfo\n    })\n    .eq('id', accommodationId);\n\n  if (dbError) {\n    throw new Error(`Failed to update accommodation: ${dbError.message}`);\n  }\n}\n\nexport async function deleteAccommodation(accommodationId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error: dbError } = await (supabase as any)\n    .from('accommodations')\n    .delete()\n    .eq('id', accommodationId);\n\n  if (dbError) {\n    throw new Error(`Failed to delete accommodation: ${dbError.message}`);\n  }\n}\n\nexport async function getAccommodationsForTrip(tripId: string): Promise<any[]> {\n  console.log('getAccommodationsForTrip called with tripId:', tripId);\n  \n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data: accommodations, error } = await (supabase as any)\n    .from('accommodations')\n    .select(`\n      *,\n      trip_days!inner(day_index, trip_id)\n    `)\n    .eq('trip_days.trip_id', tripId);\n\n  console.log('getAccommodationsForTrip result:', { accommodations, error });\n\n  if (error) {\n    console.error('Error fetching accommodations:', error);\n    throw new Error(`Failed to fetch accommodations: ${error.message}`);\n  }\n\n  return accommodations || [];\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAIA,2CAA2C;AAC3C,MAAM,WAAW,IAAA,4LAAY;AAE7B,MAAM,oBAAoB,CAAC;IACzB,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,UAAU,MAAM,IAAI,GAAG,WAAW;IACxC,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI,QAAQ,SAAS,KAAK,CAAC,EAAE,EAAE;IAC/B,MAAM,UAAU,KAAK,CAAC,EAAE,GAAG,SAAS,KAAK,CAAC,EAAE,EAAE,MAAM;IACpD,MAAM,WAAW,KAAK,CAAC,EAAE,EAAE;IAE3B,IAAI,OAAO,KAAK,CAAC,UAAU,OAAO,KAAK,CAAC,YAAY,UAAU,KAAK,UAAU,IAAI;QAC/E,OAAO;IACT;IAEA,IAAI,aAAa,MAAM;QACrB,QAAQ,QAAQ;IAClB,OAAO,IAAI,aAAa,MAAM;QAC5B,QAAQ,AAAC,QAAQ,KAAM;IACzB;IAEA,IAAI,QAAQ,KAAK,QAAQ,IAAI;QAC3B,OAAO;IACT;IAEA,OAAO,GAAG,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,QAAQ,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACtF;AAEA,MAAM,oBAAoB,CAAC;IACzB,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,CAAC,YAAY,GAAG,KAAK,KAAK,CAAC;IACjC,MAAM,QAAQ,SAAS,aAAa;IACpC,IAAI,OAAO,KAAK,CAAC,QAAQ,OAAO;IAEhC,IAAI,SAAS,IAAI,OAAO;IACxB,IAAI,SAAS,IAAI,OAAO;IACxB,OAAO;AACT;AAEA,sCAAsC;AACtC,eAAe,eAAe,MAAc,EAAE,SAAiB,EAAE,OAAe;IAC9E,MAAM,QAAQ,IAAI,KAAK;IACvB,MAAM,MAAM,IAAI,KAAK;IACrB,MAAM,WAAW,KAAK,IAAI,CAAC,CAAC,IAAI,OAAO,KAAK,MAAM,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE,KAAK;IAExF,MAAM,WAAW,EAAE;IACnB,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,IAAK;QACjC,MAAM,UAAU,IAAI,KAAK;QACzB,QAAQ,OAAO,CAAC,MAAM,OAAO,KAAK;QAElC,MAAM,QAAQ,MAAM,IAAI,gBACV,MAAM,WAAW,IAAI,kBACrB,CAAC,IAAI,EAAE,IAAI,GAAG;QAE5B,SAAS,IAAI,CAAC;YACZ,SAAS;YACT,MAAM,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACzC,WAAW,IAAI;YACf,OAAO;QACT;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,aACL,MAAM,CAAC;IAEV,IAAI,OAAO;QACT,IAAI,MAAM,OAAO,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,kBAAkB;YAC5D;QACF;QACA,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,MAAM,OAAO,EAAE;IAChE;AACF;AAEA,sCAAsC;AACtC,SAAS,aAAa,MAAc,EAAE,IAAoB,EAAE,WAA0B,EAAE,QAAmB;IACzG,OAAO;QACL,IAAI,OAAO,EAAE;QACb,OAAO,OAAO,KAAK;QACnB,aAAa,OAAO,WAAW;QAC/B,YAAY,OAAO,UAAU;QAC7B,UAAU,OAAO,QAAQ;QACzB,aAAa,OAAO,WAAW,IAAI;QACnC,QAAQ,OAAO,MAAM,IAAI;QACzB,UAAU,OAAO,QAAQ;QACzB,WAAW;QACX;QACA;QACA,WAAW;QACX,YAAY,OAAO,UAAU;QAC7B,YAAY,OAAO,UAAU;IAC/B;AACF;AAEA,SAAS,kBAAkB,OAAgB;IACzC,MAAM,iBAAiB,kBAAkB,QAAQ,UAAU,KAAK,QAAQ,UAAU,IAAI;IAEtF,OAAO;QACL,IAAI,QAAQ,EAAE;QACd,OAAO,QAAQ,KAAK;QACpB,MAAM;QACN,aAAa,QAAQ,KAAK,IAAI;QAC9B,UAAU,QAAQ,aAAa,IAAI;QACnC,MAAM,kBAAkB;QACxB,UAAU,AAAC,QAAQ,QAAQ,IAA6B;QACxD,MAAM,QAAQ,WAAW,IAAI;QAC7B,UAAU;QACV,OAAO,QAAQ,KAAK,IAAI;QACxB,WAAW;IACb;AACF;AAEA,SAAS,2BAA2B,MAAqB;IACvD,OAAO;QACL,IAAI,OAAO,EAAE;QACb,MAAM,OAAO,IAAI;QACjB,UAAU,AAAC,OAAO,QAAQ,IAAY;QACtC,UAAU;QACV,QAAQ,OAAO,UAAU;QACzB,WAAW,OAAO,QAAQ,KAAK;QAC/B,OAAO;IACT;AACF;AAEA,SAAS,mBAAmB,SAAoB;IAC9C,OAAO;QACL,IAAI,UAAU,EAAE;QAChB,OAAO,UAAU,KAAK;QACtB,QAAQ,UAAU,MAAM;QACxB,UAAU,UAAU,QAAQ;QAC5B,UAAU,AAAC,UAAU,QAAQ,IAAY;QACzC,MAAM,UAAU,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;QACxC,aAAa;QACb,QAAQ;IACV;AACF;AAGO,eAAe,WAAW,QAAmG;IAClI,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SAC5B,IAAI,CAAC,SACL,MAAM,CAAC;QACN,SAAS,KAAK,EAAE;QAChB,OAAO,SAAS,KAAK;QACrB,aAAa,SAAS,WAAW;QACjC,YAAY,SAAS,UAAU;QAC/B,UAAU,SAAS,QAAQ;QAC3B,aAAa,SAAS,WAAW;QACjC,UAAU,SAAS,QAAQ;IAE7B,GACC,MAAM,GACN,MAAM;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE,MAAM,OAAO,EAAE;IACpD;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,uEAAuE;IACvE,IAAI;QACF,MAAM,eAAe,KAAK,EAAE,EAAE,SAAS,UAAU,EAAE,SAAS,QAAQ;IACtE,EAAE,OAAO,UAAU;IACjB,4DAA4D;IAC5D,kDAAkD;IACpD;IAEA,OAAO,KAAK,EAAE;AAChB;AAEO,eAAe,QAAQ,MAAc;IAC1C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,oDAAoD;IACpD,MAAM,EAAE,MAAM,IAAI,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAC7C,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;IAET,IAAI,aAAa,CAAC,MAAM,OAAO;IAE/B,kDAAkD;IAClD,IAAI,KAAK,OAAO,KAAK,KAAK,EAAE,EAAE;QAC5B,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,AAAC,SACnC,IAAI,CAAC,sBACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,UAAU,YACb,MAAM;QAET,IAAI,CAAC,cAAc,OAAO,MAAM,oCAAoC;IACtE;IAEA,gBAAgB;IAChB,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAC/C,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC;IAET,IAAI,WAAW,MAAM;IAErB,0BAA0B;IAC1B,MAAM,OAAuB,EAAE;IAC/B,KAAK,MAAM,SAAS,UAAU,EAAE,CAAE;QAChC,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,AAAC,SACnD,IAAI,CAAC,UACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,MAAM,EAAE,EAC1B,KAAK,CAAC;QAET,IAAI,aAAa,MAAM;QAEvB,MAAM,aAAa,CAAC,YAAY,EAAE,EAAE,GAAG,CAAC;QAExC,KAAK,IAAI,CAAC;YACR,KAAK,MAAM,SAAS;YACpB,MAAM,MAAM,IAAI;YAChB;YACA,OAAO,MAAM,KAAK,IAAI;YACtB,aAAa;YACb,aAAa,MAAM,KAAK;QAC1B;IACF;IAEA,oBAAoB;IACpB,MAAM,EAAE,MAAM,cAAc,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,AAAC,SAC1D,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;IAEjB,IAAI,cAAc,MAAM;IAExB,MAAM,cAAc,CAAC,kBAAkB,EAAE,EAAE,GAAG,CAAC;IAE/C,eAAe;IACf,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,AAAC,SACvD,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;IAEjB,IAAI,eAAe,MAAM;IAEzB,MAAM,WAAW,CAAC,cAAc,EAAE,EAAE,GAAG,CAAC;IAExC,OAAO,aAAa,MAAM,MAAM,aAAa;AAC/C;AAEO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,OAAO,EAAE;IACX;IAEA,0BAA0B;IAC1B,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,AAAC,SACpD,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,YAAY,MAAM;IAEtB,mDAAmD;IACnD,MAAM,EAAE,MAAM,iBAAiB,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,AAAC,SAC5D,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MACF,CAAC,MAAM,AAAC,SACL,IAAI,CAAC,sBACL,MAAM,CAAC,WACP,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,UAAU,WAChB,EAAE,IAAI,EAAE,IAAI,CAAC,IAAW,EAAE,OAAO,KAAK,EAAE,EAEzC,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,eAAe,YAAY,IAAI,KAAK,YAAY,MAAM,aAAa,yBAAyB;IAEhG,gCAAgC;IAChC,MAAM,WAAW;WAAK,cAAc,EAAE;WAAO,qBAAqB,EAAE;KAAE;IACtE,MAAM,cAAc,MAAM,IAAI,CAAC,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,IAAc;YAAC,EAAE,EAAE;YAAE;SAAE,GAAG,MAAM;IAErF,+DAA+D;IAC/D,OAAO,YAAY,GAAG,CAAC,CAAC,OAAiB,aAAa,MAAM,EAAE,EAAE,EAAE,EAAE,EAAE;AACxE;AAEO,eAAe,cAAc,MAAc,EAAE,QAAgB,EAAE,OAA8B;IAClG,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT;IACF;IAEA,oBAAoB;IACpB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QAEzB,qCAAqC;QACrC,IAAI;YACF,sCAAsC;YACtC,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,AAAC,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,cACP,EAAE,CAAC,MAAM,QACT,MAAM;YAET,IAAI,MAAM;gBACR,+DAA+D;gBAC/D,gEAAgE;gBAChE,QAAQ,qCAAqC;YAC/C,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,aAAa;YACpB,MAAM,IAAI,MAAM,CAAC,6CAA6C,EAAE,aAAa;QAC/E;IACF;IAEA,sBAAsB;IACtB,MAAM,aAAkB,CAAC;IACzB,IAAI,QAAQ,WAAW,KAAK,WAAW;QACrC,WAAW,KAAK,GAAG,QAAQ,WAAW;IACxC;IACA,IAAI,QAAQ,KAAK,KAAK,WAAW;QAC/B,WAAW,KAAK,GAAG,QAAQ,KAAK;IAClC;IAEA,IAAI,OAAO,IAAI,CAAC,YAAY,MAAM,GAAG,GAAG;QACtC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,aACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,SAAS;QAErB,IAAI,OAAO;YACT,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,MAAM,OAAO,IAAI,KAAK,SAAS,CAAC,QAAQ;QACxF;IACF;AACF;AAEO,eAAe,cAAc,MAAc,EAAE,QAAgB;IAClE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,aACL,MAAM,GACN,EAAE,CAAC,MAAM,QAAQ,EAAE;IAEtB,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,MAAM,OAAO,EAAE;IAC/D;AAEF;AAEO,eAAe,YAAY,MAAc,EAAE,QAAgB,EAAE,QAAuB;IACzF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,YAAY,kBAAkB,SAAS,IAAI;IAEjD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SAC5B,IAAI,CAAC,UACL,MAAM,CAAC;QACN,aAAa,QAAQ,EAAE;QACvB,OAAO,SAAS,KAAK;QACrB,YAAY;QACZ,UAAU,SAAS,QAAQ,IAAI;QAC/B,eAAe,SAAS,QAAQ,IAAI;QACpC,aAAa,SAAS,IAAI,IAAI;QAC9B,eAAe,SAAS,IAAI,GAAG,QAAQ;QACvC,OAAO,SAAS,WAAW,IAAI;QAC/B,aAAa;IACf,GACC,MAAM,GACN,MAAM;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,MAAM,OAAO,EAAE;IAC5D;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,kBAAkB;AAC3B;AAEO,eAAe,eACpB,MAAc,EACd,QAAgB,EAChB,UAAkB,EAClB,OAAsB;IAEtB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,YAAY,kBAAkB,QAAQ,IAAI;IAEhD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SAC5B,IAAI,CAAC,UACL,MAAM,CAAC;QACN,OAAO,QAAQ,KAAK;QACpB,YAAY;QACZ,UAAU,QAAQ,QAAQ,IAAI;QAC9B,eAAe,QAAQ,QAAQ,IAAI;QACnC,aAAa,QAAQ,IAAI,IAAI;QAC7B,OAAO,QAAQ,WAAW,IAAI;IAChC,GACC,EAAE,CAAC,MAAM,YACT,EAAE,CAAC,eAAe,QAAQ,EAAE,EAC5B,MAAM,GACN,MAAM;IAET,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,MAAM,OAAO,EAAE;IAC/D;IAEA,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,kBAAkB;AAC3B;AAEO,eAAe,eAAe,MAAc,EAAE,QAAgB,EAAE,UAAkB;IACvF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,UACL,MAAM,GACN,EAAE,CAAC,MAAM,YACT,EAAE,CAAC,eAAe,QAAQ,EAAE;IAE/B,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,MAAM,OAAO,EAAE;IAC/D;AACF;AAEO,eAAe,WAAW,MAAc;IAC7C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,0DAA0D;IAC1D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,SACL,MAAM,GACN,EAAE,CAAC,MAAM,QACT,EAAE,CAAC,WAAW,KAAK,EAAE,GAAG,8CAA8C;IAEzE,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;IAC3D;AAEF;AAEO,eAAe,eAAe,MAAc,EAAE,IAAiB;IACpE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,iBACL,MAAM,CAAC;QACN,SAAS;QACT,MAAM,KAAK,IAAI;QACf,UAAU,KAAK,QAAQ;QACvB,YAAY,KAAK,MAAM;QACvB,UAAU,KAAK,SAAS,GAAG,IAAI;IACjC;IAEF,IAAI,OAAO,MAAM;AACnB;AAEO,eAAe,gBAAgB,MAAc,EAAE,WAA0B;IAC9E,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,kDAAkD;IAClD,MAAM,AAAC,SACJ,IAAI,CAAC,iBACL,MAAM,GACN,EAAE,CAAC,WAAW;IAEjB,2BAA2B;IAC3B,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,MAAM,gBAAgB,YAAY,GAAG,CAAC,CAAA,OAAQ,CAAC;gBAC7C,SAAS;gBACT,MAAM,KAAK,IAAI;gBACf,UAAU,KAAK,QAAQ;gBACvB,YAAY,KAAK,MAAM;gBACvB,UAAU,KAAK,SAAS,GAAG,IAAI;YACjC,CAAC;QAED,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,iBACL,MAAM,CAAC;QAEV,IAAI,OAAO,MAAM;IACnB;AACF;AAEO,eAAe,WAAW,MAAc,EAAE,OAAgB;IAC/D,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAG3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,YACL,MAAM,CAAC;QACN,SAAS;QACT,OAAO,QAAQ,KAAK;QACpB,QAAQ,QAAQ,MAAM;QACtB,UAAU,QAAQ,QAAQ;QAC1B,UAAU,QAAQ,QAAQ;IAC5B;IAEF,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,IAAI,KAAK,SAAS,CAAC,QAAQ;IACpF;AACF;AAEO,eAAe,YACpB,MAAc,EACd,QAAgB,EAChB,IAAU,EACV,SAA4B,EAC5B,KAAc,EACd,WAAoB;IAEpB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;IACxC,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;IACnE,MAAM,cAAc,CAAC,MAAM,EAAE,UAAU;IAEvC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAClD,IAAI,CAAC,cACL,MAAM,CAAC,aAAa,MAAM;QAAE,QAAQ;IAAM;IAE7C,IAAI,aAAa;QACf,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,YAAY,OAAO,EAAE;IACjE;IAEA,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAC9B,IAAI,CAAC,cACL,YAAY,CAAC;IAEhB,MAAM,WAAW,KAAK,SAAS;IAC/B,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SAC/B,IAAI,CAAC,SACL,MAAM,CAAC;QACN,aAAa,QAAQ,EAAE;QACvB,MAAM;QACN,KAAK;QACL,OAAO,SAAS,KAAK,IAAI;QACzB,aAAa,eAAe;IAC9B;IACF,IAAI,SAAS;QACX,MAAM,IAAI,MAAM,CAAC,6BAA6B,EAAE,QAAQ,OAAO,IAAI,KAAK,SAAS,CAAC,UAAU;IAC9F;AAEF;AAEO,eAAe,YAAY,OAAe;IAC/C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,MAAM,KAAK,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,AAAC,SAC/C,IAAI,CAAC,SACL,MAAM,CAAC,OACP,EAAE,CAAC,MAAM,SACT,MAAM;IAET,IAAI,cAAc,CAAC,OAAO;QACxB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,MAAM,IAAI,IAAI,MAAM,GAAG;IAC7B,MAAM,WAAW,IAAI,QAAQ,CAAC,KAAK,CAAC,wCAAwC,CAAC,EAAE;IAE/E,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAAS,OAAO,CACnD,IAAI,CAAC,cACL,MAAM,CAAC;QAAC;KAAS;IAEpB,IAAI,cAAc;IAChB,mEAAmE;IACrE;IAEA,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SAC/B,IAAI,CAAC,SACL,MAAM,GACN,EAAE,CAAC,MAAM;IAEZ,IAAI,SAAS;QACX,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,QAAQ,OAAO,EAAE;IAC9D;AAEF;AAEO,eAAe,eAAe,MAAc,EAAE,QAAgB;IACnE,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,MACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,IAAI,aAAa,CAAC,SAAS;QACzB,OAAO,EAAE;IACX;IAEA,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACnC,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,eAAe,QAAQ,EAAE,EAC5B,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM;IAE1C,IAAI,OAAO;QACT,OAAO,EAAE;IACX;IAEA,OAAO,SAAS,EAAE;AACpB;AAEO,eAAe,WAAW,MAAc,EAAE,OAAsB;IACrE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,aAAkB,CAAC;IACzB,IAAI,QAAQ,KAAK,KAAK,WAAW,WAAW,KAAK,GAAG,QAAQ,KAAK;IACjE,IAAI,QAAQ,WAAW,KAAK,WAAW,WAAW,WAAW,GAAG,QAAQ,WAAW;IACnF,IAAI,QAAQ,MAAM,KAAK,WAAW,WAAW,MAAM,GAAG,QAAQ,MAAM;IACpE,IAAI,QAAQ,QAAQ,KAAK,WAAW,WAAW,QAAQ,GAAG,QAAQ,QAAQ;IAC1E,IAAI,QAAQ,UAAU,KAAK,WAAW,WAAW,UAAU,GAAG,QAAQ,UAAU;IAChF,IAAI,QAAQ,QAAQ,KAAK,WAAW,WAAW,QAAQ,GAAG,QAAQ,QAAQ;IAE1E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,SACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,QACT,EAAE,CAAC,WAAW,KAAK,EAAE;IAExB,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;IAC3D;AACF;AAEO,eAAe,cAAc,SAAiB;IACnD,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SACtB,IAAI,CAAC,YACL,MAAM,GACN,EAAE,CAAC,MAAM;IAEZ,IAAI,OAAO;QACT,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,MAAM,OAAO,EAAE;IAC9D;AAEF;AAEO,eAAe,qBAAqB,MAAc,EAAE,IAAU;IACnE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;IACxC,MAAM,WAAW,GAAG,OAAO,OAAO,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;IAC3D,MAAM,cAAc,CAAC,YAAY,EAAE,UAAU;IAE7C,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAClD,IAAI,CAAC,cACL,MAAM,CAAC,aAAa,MAAM;QAAE,QAAQ;IAAK;IAE5C,IAAI,aAAa;QACf,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,YAAY,OAAO,EAAE;IACxE;IAEA,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,OAAO,CAC9B,IAAI,CAAC,cACL,YAAY,CAAC;IAEhB,MAAM,gBAAgB,KAAK,SAAS;IAEpC,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SAC/B,IAAI,CAAC,SACL,MAAM,CAAC;QAAE,aAAa;IAAc,GACpC,EAAE,CAAC,MAAM;IAEZ,IAAI,SAAS;QACX,MAAM,IAAI,MAAM,CAAC,4BAA4B,EAAE,QAAQ,OAAO,EAAE;IAClE;IAEA,OAAO;AACT;AAGO,eAAe,kBAAkB,MAAc,EAAE,QAAgB,EAAE,aAAkB;IAC1F,QAAQ,GAAG,CAAC,kCAAkC;QAAE;QAAQ;QAAU;IAAc;IAEhF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,mBAAmB;IACnB,QAAQ,GAAG,CAAC,qCAAqC,QAAQ,aAAa;IAEtE,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,AAAC,SAChD,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,MAAM;IAET,QAAQ,GAAG,CAAC,0BAA0B;QAAE;QAAS;IAAU;IAE3D,IAAI,aAAa,CAAC,SAAS;QACzB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,WAAW,WAAW,mBAAmB;IAClF;IAEA,iCAAiC;IACjC,MAAM,oBAAoB;QACxB,aAAa,QAAQ,EAAE;QACvB,MAAM,cAAc,IAAI;QACxB,MAAM,cAAc,IAAI;QACxB,SAAS,cAAc,OAAO;QAC9B,UAAU,cAAc,OAAO;QAC/B,WAAW,cAAc,QAAQ;QACjC,MAAM,cAAc,IAAI;QACxB,UAAU,cAAc,QAAQ;QAChC,QAAQ,cAAc,MAAM;QAC5B,OAAO,cAAc,KAAK;QAC1B,mBAAmB,cAAc,gBAAgB;QACjD,cAAc,cAAc,WAAW;IACzC;IAEA,QAAQ,GAAG,CAAC,iCAAiC;IAE7C,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SACnD,IAAI,CAAC,kBACL,MAAM,CAAC,mBACP,MAAM;IAET,QAAQ,GAAG,CAAC,kBAAkB;QAAE;QAAc;IAAQ;IAEtD,IAAI,SAAS;QACX,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,QAAQ,OAAO,EAAE;IACpE;IAEA,QAAQ,GAAG,CAAC;AACd;AAEO,eAAe,oBAAoB,eAAuB,EAAE,aAAkB;IACnF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SAC/B,IAAI,CAAC,kBACL,MAAM,CAAC;QACN,MAAM,cAAc,IAAI;QACxB,MAAM,cAAc,IAAI;QACxB,SAAS,cAAc,OAAO;QAC9B,UAAU,cAAc,OAAO;QAC/B,WAAW,cAAc,QAAQ;QACjC,MAAM,cAAc,IAAI;QACxB,UAAU,cAAc,QAAQ;QAChC,QAAQ,cAAc,MAAM;QAC5B,OAAO,cAAc,KAAK;QAC1B,mBAAmB,cAAc,gBAAgB;QACjD,cAAc,cAAc,WAAW;IACzC,GACC,EAAE,CAAC,MAAM;IAEZ,IAAI,SAAS;QACX,MAAM,IAAI,MAAM,CAAC,gCAAgC,EAAE,QAAQ,OAAO,EAAE;IACtE;AACF;AAEO,eAAe,oBAAoB,eAAuB;IAC/D,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,AAAC,SAC/B,IAAI,CAAC,kBACL,MAAM,GACN,EAAE,CAAC,MAAM;IAEZ,IAAI,SAAS;QACX,MAAM,IAAI,MAAM,CAAC,gCAAgC,EAAE,QAAQ,OAAO,EAAE;IACtE;AACF;AAEO,eAAe,yBAAyB,MAAc;IAC3D,QAAQ,GAAG,CAAC,gDAAgD;IAE5D,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,MAAM,cAAc,EAAE,KAAK,EAAE,GAAG,MAAM,AAAC,SAC5C,IAAI,CAAC,kBACL,MAAM,CAAC,CAAC;;;IAGT,CAAC,EACA,EAAE,CAAC,qBAAqB;IAE3B,QAAQ,GAAG,CAAC,oCAAoC;QAAE;QAAgB;IAAM;IAExE,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM,IAAI,MAAM,CAAC,gCAAgC,EAAE,MAAM,OAAO,EAAE;IACpE;IAEA,OAAO,kBAAkB,EAAE;AAC7B"}},
    {"offset": {"line": 5209, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/AccommodationManager.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { ItineraryDay, Accommodation } from \"@/types/itinerary\";\nimport { format, differenceInDays, parseISO } from \"date-fns\";\nimport { saveAccommodation, updateAccommodation as updateAccommodationDB, deleteAccommodation as deleteAccommodationDB, getAccommodationsForTrip } from \"@/lib/trip-service\";\n\ninterface AccommodationManagerProps {\n  tripId: string;\n  itinerary: ItineraryDay[];\n  onUpdateItinerary: (itinerary: ItineraryDay[]) => void;\n}\n\nexport default function AccommodationManager({\n  tripId,\n  itinerary,\n  onUpdateItinerary,\n}: AccommodationManagerProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingAccommodation, setEditingAccommodation] = useState<{\n    dayIndex: number;\n    accommodation: Accommodation;\n  } | null>(null);\n  const [newAccommodation, setNewAccommodation] = useState({\n    name: \"\",\n    type: \"hotel\" as Accommodation[\"type\"],\n    address: \"\",\n    checkIn: \"\",\n    checkOut: \"\",\n    cost: 0,\n    currency: \"USD\",\n    rating: 5,\n    notes: \"\",\n    bookingReference: \"\",\n    contactInfo: \"\",\n  });\n\n  const accommodationTypes = [\n    { id: \"hotel\", name: \"Hotel\", icon: \"üè®\" },\n    { id: \"airbnb\", name: \"Airbnb\", icon: \"üè†\" },\n    { id: \"hostel\", name: \"Hostel\", icon: \"üè¢\" },\n    { id: \"resort\", name: \"Resort\", icon: \"üèñÔ∏è\" },\n    { id: \"apartment\", name: \"Apartment\", icon: \"üè†\" },\n    { id: \"other\", name: \"Other\", icon: \"üèòÔ∏è\" },\n  ];\n\n\n  const getTypeInfo = (type: string) =>\n    accommodationTypes.find((t) => t.id === type) || accommodationTypes[0];\n\n  // Load accommodations from database when component mounts\n  useEffect(() => {\n    const loadAccommodations = async () => {\n      try {\n        console.log('Loading accommodations for trip:', tripId);\n        const accommodations = await getAccommodationsForTrip(tripId);\n        console.log('Loaded accommodations:', accommodations);\n        \n        if (accommodations.length > 0) {\n          // Merge accommodations with itinerary\n          const updatedItinerary = [...itinerary];\n          \n          accommodations.forEach((acc: any) => {\n            const dayIndex = acc.trip_days.day_index;\n            if (updatedItinerary[dayIndex]) {\n              updatedItinerary[dayIndex] = {\n                ...updatedItinerary[dayIndex],\n                accommodation: {\n                  id: acc.id,\n                  name: acc.name,\n                  type: acc.type,\n                  address: acc.address,\n                  checkIn: acc.check_in,\n                  checkOut: acc.check_out,\n                  cost: acc.cost,\n                  currency: acc.currency,\n                  rating: acc.rating,\n                  notes: acc.notes,\n                  photos: [],\n                  bookingReference: acc.booking_reference,\n                  contactInfo: acc.contact_info\n                }\n              };\n            }\n          });\n          \n          onUpdateItinerary(updatedItinerary);\n        }\n      } catch (error) {\n        console.error('Error loading accommodations:', error);\n      }\n    };\n\n    if (tripId) {\n      loadAccommodations();\n    }\n  }, [tripId]); // Only run when tripId changes\n\n  const addAccommodation = async () => {\n    console.log('addAccommodation called');\n    console.log('newAccommodation:', newAccommodation);\n    \n    if (\n      !newAccommodation.name.trim() ||\n      !newAccommodation.checkIn ||\n      !newAccommodation.checkOut\n    ) {\n      console.log('Validation failed - missing required fields');\n      alert('Please fill in all required fields: Name, Check-in date, and Check-out date');\n      return;\n    }\n\n    try {\n      const accommodation: Accommodation = {\n        id: Date.now().toString(),\n        ...newAccommodation,\n        name: newAccommodation.name.trim(),\n        photos: [],\n      };\n\n      // Find the day that matches the check-in date\n      const checkInDate = new Date(newAccommodation.checkIn)\n        .toISOString()\n        .split(\"T\")[0];\n      console.log('Looking for day with date:', checkInDate);\n      console.log('Available itinerary days:', itinerary.map(d => ({ day: d.day, date: d.date })));\n      \n      const dayIndex = itinerary.findIndex((day) => day.date === checkInDate);\n      console.log('Found dayIndex:', dayIndex);\n\n      if (dayIndex !== -1) {\n        // Save to database first\n        await saveAccommodation(tripId, dayIndex, accommodation);\n        \n        // Then update local state\n        const updatedItinerary = [...itinerary];\n        updatedItinerary[dayIndex] = {\n          ...updatedItinerary[dayIndex],\n          accommodation,\n        };\n        onUpdateItinerary(updatedItinerary);\n        console.log('Accommodation added successfully');\n      } else {\n        console.log('No matching day found for check-in date');\n        alert(`No trip day found for check-in date ${checkInDate}. Please make sure your trip includes this date.`);\n        return;\n      }\n\n      resetForm();\n    } catch (error) {\n      console.error('Error adding accommodation:', error);\n      alert(`Failed to add accommodation: ${error instanceof Error ? error.message : String(error)}`);\n    }\n  };\n\n  const updateAccommodation = async () => {\n    if (!editingAccommodation) return;\n\n    try {\n      // Update in database first\n      await updateAccommodationDB(editingAccommodation.accommodation.id, editingAccommodation.accommodation);\n      \n      // Then update local state\n      const updatedItinerary = [...itinerary];\n      updatedItinerary[editingAccommodation.dayIndex] = {\n        ...updatedItinerary[editingAccommodation.dayIndex],\n        accommodation: {\n          ...editingAccommodation.accommodation,\n          name: editingAccommodation.accommodation.name.trim(),\n        },\n      };\n      onUpdateItinerary(updatedItinerary);\n      setEditingAccommodation(null);\n      setShowAddForm(false);\n    } catch (error) {\n      console.error('Error updating accommodation:', error);\n      alert('Failed to update accommodation. Please try again.');\n    }\n  };\n\n  const removeAccommodation = async (dayIndex: number) => {\n    try {\n      // Remove from database first\n      await deleteAccommodationDB(itinerary[dayIndex].accommodation!.id);\n      \n      // Then update local state\n      const updatedItinerary = [...itinerary];\n      delete updatedItinerary[dayIndex].accommodation;\n      onUpdateItinerary(updatedItinerary);\n    } catch (error) {\n      console.error('Error removing accommodation:', error);\n      alert('Failed to remove accommodation. Please try again.');\n    }\n  };\n\n  const resetForm = () => {\n    setNewAccommodation({\n      name: \"\",\n      type: \"hotel\",\n      address: \"\",\n      checkIn: \"\",\n      checkOut: \"\",\n      cost: 0,\n      currency: \"USD\",\n      rating: 5,\n      notes: \"\",\n      bookingReference: \"\",\n      contactInfo: \"\",\n    });\n    setShowAddForm(false);\n  };\n\n\n  const accommodationsWithDays = itinerary\n    .map((day, index) => ({ ...day, dayIndex: index }))\n    .filter((day) => day.accommodation);\n\n  const totalAccommodationCost = accommodationsWithDays.reduce(\n    (sum, day) => sum + (day.accommodation?.cost || 0),\n    0\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Accommodation</h2>\n            <p className=\"text-gray-600\">\n              Manage your hotels and places to stay\n            </p>\n          </div>\n          <button\n            onClick={() => {\n              console.log('Add Accommodation button clicked');\n              setShowAddForm(true);\n            }}\n            className=\"btn-primary px-6 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 border-2 border-primary hover:border-secondary\"\n            style={{\n              background: 'linear-gradient(to right, #0A400C, #819067)',\n              color: '#FEFAE0'\n            }}\n          >\n            + Add Accommodation\n          </button>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-accent border-opacity-30\">\n            <div className=\"text-2xl font-bold text-primary mb-1\">\n              {accommodationsWithDays.length}\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Bookings</div>\n          </div>\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-secondary border-opacity-30\">\n            <div className=\"text-2xl font-bold text-secondary mb-1\">\n              {totalAccommodationCost.toLocaleString()} USD\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Total Cost</div>\n          </div>\n          <div className=\"text-center p-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg border border-primary border-opacity-30\">\n            <div className=\"text-2xl font-bold text-primary mb-1\">\n              {accommodationsWithDays.reduce((sum, day) => {\n                const accommodation = day.accommodation!;\n                return (\n                  sum +\n                  differenceInDays(\n                    parseISO(accommodation.checkOut),\n                    parseISO(accommodation.checkIn)\n                  )\n                );\n              }, 0)}\n            </div>\n            <div className=\"text-sm font-semibold text-gray-800\">Total Nights</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Add/Edit Accommodation Modal */}\n      {(showAddForm || editingAccommodation) && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">\n                {editingAccommodation\n                  ? \"Edit Accommodation\"\n                  : \"Add Accommodation\"}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowAddForm(false);\n                  setEditingAccommodation(null);\n                }}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg\n                  className=\"w-5 h-5 text-gray-500\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M6 18L18 6M6 6l12 12\"\n                  />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Basic Info */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input\n                  type=\"text\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.name\n                      : newAccommodation.name\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            name: e.target.value,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          name: e.target.value,\n                        })\n                  }\n                  placeholder=\"Accommodation name\"\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n\n                <select\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.type\n                      : newAccommodation.type\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            type: e.target.value as Accommodation[\"type\"],\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          type: e.target.value as Accommodation[\"type\"],\n                        })\n                  }\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                >\n                  {accommodationTypes.map((type) => (\n                    <option key={type.id} value={type.id}>\n                      {type.icon} {type.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <textarea\n                value={\n                  editingAccommodation\n                    ? editingAccommodation.accommodation.address\n                    : newAccommodation.address\n                }\n                onChange={(e) =>\n                  editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: {\n                          ...editingAccommodation.accommodation,\n                          address: e.target.value,\n                        },\n                      })\n                    : setNewAccommodation({\n                        ...newAccommodation,\n                        address: e.target.value,\n                      })\n                }\n                placeholder=\"Address\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\n              />\n\n              {/* Dates and Cost */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <input\n                  type=\"date\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.checkIn\n                      : newAccommodation.checkIn\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            checkIn: e.target.value,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          checkIn: e.target.value,\n                        })\n                  }\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n\n                <input\n                  type=\"date\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.checkOut\n                      : newAccommodation.checkOut\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            checkOut: e.target.value,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          checkOut: e.target.value,\n                        })\n                  }\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n\n                <input\n                  type=\"number\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.cost\n                      : newAccommodation.cost\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            cost: parseFloat(e.target.value) || 0,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          cost: parseFloat(e.target.value) || 0,\n                        })\n                  }\n                  placeholder=\"Total cost\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n\n              {/* Rating */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Rating\n                </label>\n                <div className=\"flex space-x-2\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <button\n                      key={star}\n                      type=\"button\"\n                      onClick={() =>\n                        editingAccommodation\n                          ? setEditingAccommodation({\n                              ...editingAccommodation,\n                              accommodation: {\n                                ...editingAccommodation.accommodation,\n                                rating: star,\n                              },\n                            })\n                          : setNewAccommodation({\n                              ...newAccommodation,\n                              rating: star,\n                            })\n                      }\n                      className={`text-2xl transition-colors ${\n                        star <=\n                        (editingAccommodation\n                          ? editingAccommodation.accommodation.rating || 0\n                          : newAccommodation.rating)\n                          ? \"text-accent\"\n                          : \"text-gray-300\"\n                      }`}\n                    >\n                      ‚≠ê\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n\n              {/* Additional Info */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input\n                  type=\"text\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.bookingReference ||\n                        \"\"\n                      : newAccommodation.bookingReference\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            bookingReference: e.target.value,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          bookingReference: e.target.value,\n                        })\n                  }\n                  placeholder=\"Booking reference\"\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n\n                <input\n                  type=\"text\"\n                  value={\n                    editingAccommodation\n                      ? editingAccommodation.accommodation.contactInfo || \"\"\n                      : newAccommodation.contactInfo\n                  }\n                  onChange={(e) =>\n                    editingAccommodation\n                      ? setEditingAccommodation({\n                          ...editingAccommodation,\n                          accommodation: {\n                            ...editingAccommodation.accommodation,\n                            contactInfo: e.target.value,\n                          },\n                        })\n                      : setNewAccommodation({\n                          ...newAccommodation,\n                          contactInfo: e.target.value,\n                        })\n                  }\n                  placeholder=\"Contact info\"\n                  className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n\n              <textarea\n                value={\n                  editingAccommodation\n                    ? editingAccommodation.accommodation.notes || \"\"\n                    : newAccommodation.notes\n                }\n                onChange={(e) =>\n                  editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: {\n                          ...editingAccommodation.accommodation,\n                          notes: e.target.value,\n                        },\n                      })\n                    : setNewAccommodation({\n                        ...newAccommodation,\n                        notes: e.target.value,\n                      })\n                }\n                placeholder=\"Notes\"\n                rows={3}\n                className=\"w-full px-4 py-3 border border-secondary border-opacity-30 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\n              />\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowAddForm(false);\n                    setEditingAccommodation(null);\n                  }}\n                  className=\"flex-1 px-4 py-3 border border-secondary border-opacity-30 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={\n                    editingAccommodation\n                      ? updateAccommodation\n                      : addAccommodation\n                  }\n                  className=\"flex-1 bg-gradient-to-r from-primary to-secondary text-white py-3 px-4 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n                >\n                  {editingAccommodation ? \"Update\" : \"Add\"} Accommodation\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Accommodations List */}\n      <div className=\"space-y-6\">\n        {accommodationsWithDays.length > 0 ? (\n          accommodationsWithDays.map((day) => {\n            const accommodation = day.accommodation!;\n            const typeInfo = getTypeInfo(accommodation.type);\n            const nights = differenceInDays(\n              parseISO(accommodation.checkOut),\n              parseISO(accommodation.checkIn)\n            );\n\n            return (\n              <div\n                key={day.dayIndex}\n                className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-200\"\n              >\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"text-4xl\">{typeInfo.icon}</div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-1\">\n                        {accommodation.name}\n                      </h3>\n                      <p className=\"text-gray-600 mb-2\">\n                        {accommodation.address}\n                      </p>\n\n                      <div className=\"flex items-center space-x-4 mb-3\">\n                        <span className=\"px-3 py-1 bg-white/90 text-secondary border-2 border-secondary border-opacity-30 text-sm font-bold rounded-full shadow-md backdrop-blur-sm\">\n                          {typeInfo.name}\n                        </span>\n                        <div className=\"flex items-center\">\n                          {[...Array(5)].map((_, i) => (\n                            <span\n                              key={i}\n                              className={`text-sm ${\n                                i < (accommodation.rating || 0)\n                                  ? \"text-accent\"\n                                  : \"text-gray-300\"\n                              }`}\n                            >\n                              ‚≠ê\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-600\">Check-in:</span>\n                          <div className=\"font-medium\">\n                            {format(\n                              parseISO(accommodation.checkIn),\n                              \"MMM d, yyyy\"\n                            )}\n                          </div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Check-out:</span>\n                          <div className=\"font-medium\">\n                            {format(\n                              parseISO(accommodation.checkOut),\n                              \"MMM d, yyyy\"\n                            )}\n                          </div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Nights:</span>\n                          <div className=\"font-medium\">{nights}</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Total Cost:</span>\n                          <div className=\"font-medium\">\n                            {accommodation.cost.toLocaleString()}{\" \"}\n                            {accommodation.currency}\n                          </div>\n                        </div>\n                      </div>\n\n\n                      {accommodation.notes && (\n                        <p className=\"text-sm text-gray-600 mt-3\">\n                          {accommodation.notes}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() =>\n                        setEditingAccommodation({\n                          dayIndex: day.dayIndex,\n                          accommodation,\n                        })\n                      }\n                      className=\"p-2 text-gray-400 hover:text-primary hover:bg-accent hover:bg-opacity-10 rounded-lg transition-colors\"\n                    >\n                      <svg\n                        className=\"w-5 h-5\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                        />\n                      </svg>\n                    </button>\n                    <button\n                      onClick={() => removeAccommodation(day.dayIndex)}\n                      className=\"p-2 rounded-lg transition-colors\"\n                      style={{color: '#b1ab86'}}\n                      onMouseEnter={(e) => {\n                        (e.target as HTMLElement).style.color = '#0a400c';\n                        (e.target as HTMLElement).style.backgroundColor = '#fefae0';\n                      }}\n                      onMouseLeave={(e) => {\n                        (e.target as HTMLElement).style.color = '#b1ab86';\n                        (e.target as HTMLElement).style.backgroundColor = 'transparent';\n                      }}\n                    >\n                      <svg\n                        className=\"w-5 h-5\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth={2}\n                          d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                        />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-4xl\">üè®</span>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              No accommodations added\n            </h3>\n            <p className=\"text-gray-600 mb-6\">\n              Add hotels, Airbnbs, or other places you'll be staying\n            </p>\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"bg-gradient-to-r from-primary to-secondary text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition-all duration-200\"\n            >\n              Add Your First Accommodation\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6324, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/lib/friend-service.ts"],"sourcesContent":["import { createClient } from './auth';\nimport { UserProfile, Friend, TripCollaborator, FriendRequest, TripInvitation } from '@/types/friends';\n\nconst supabase = createClient();\n\n// User Profile Functions\nexport async function getCurrentUserProfile(): Promise<UserProfile | null> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return null;\n\n  const { data, error } = await (supabase as any)\n    .from('user_profiles')\n    .select('*')\n    .eq('id', user.id)\n    .single();\n\n  if (error) {\n    return null;\n  }\n\n  return data;\n}\n\nexport async function updateUserProfile(updates: Partial<UserProfile>): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('user_profiles')\n    .update(updates)\n    .eq('id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to update profile: ${error.message}`);\n  }\n}\n\nexport async function searchUsers(query: string): Promise<UserProfile[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return [];\n\n  const { data, error } = await (supabase as any)\n    .from('user_profiles')\n    .select('*')\n    .or(`full_name.ilike.%${query}%,email.ilike.%${query}%,username.ilike.%${query}%`)\n    .neq('id', user.id)\n    .limit(10);\n\n  if (error) {\n    return [];\n  }\n\n  return data || [];\n}\n\n// Friend Functions\nexport async function sendFriendRequest(friendId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('friends')\n    .insert({\n      user_id: user.id,\n      friend_id: friendId,\n      status: 'pending'\n    });\n\n  if (error) {\n    if ((error as any).code === '23505' || error.message?.includes('friends_user_id_friend_id_key')) {\n      const duplicateError = new Error('FRIEND_REQUEST_ALREADY_EXISTS');\n      (duplicateError as any).code = 'FRIEND_REQUEST_ALREADY_EXISTS';\n      throw duplicateError;\n    }\n    throw new Error(`Failed to send friend request: ${error.message}`);\n  }\n}\n\nexport async function acceptFriendRequest(requestId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  // Update the original request to accepted\n  const { error: updateError } = await (supabase as any)\n    .from('friends')\n    .update({ status: 'accepted' })\n    .eq('id', requestId)\n    .eq('friend_id', user.id);\n\n  if (updateError) {\n    throw new Error(`Failed to accept friend request: ${updateError.message}`);\n  }\n\n  // Create the reciprocal friendship\n  const { data: originalRequest } = await (supabase as any)\n    .from('friends')\n    .select('user_id, friend_id')\n    .eq('id', requestId)\n    .single();\n\n  if (originalRequest) {\n    const { error: reciprocalError } = await (supabase as any)\n      .from('friends')\n      .insert({\n        user_id: user.id,\n        friend_id: originalRequest.user_id,\n        status: 'accepted'\n      });\n\n    if (reciprocalError && !reciprocalError.message.includes('duplicate')) {\n      // Could not create reciprocal friendship\n    }\n  }\n}\n\nexport async function declineFriendRequest(requestId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('friends')\n    .delete()\n    .eq('id', requestId)\n    .eq('friend_id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to decline friend request: ${error.message}`);\n  }\n}\n\nexport async function removeFriend(friendId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  // Remove both directions of the friendship\n  const { error: error1 } = await (supabase as any)\n    .from('friends')\n    .delete()\n    .eq('user_id', user.id)\n    .eq('friend_id', friendId);\n\n  const { error: error2 } = await (supabase as any)\n    .from('friends')\n    .delete()\n    .eq('user_id', friendId)\n    .eq('friend_id', user.id);\n\n  if (error1 || error2) {\n    throw new Error('Failed to remove friend');\n  }\n}\n\nexport async function getFriends(): Promise<Friend[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return [];\n\n  try {\n    const { data, error } = await (supabase as any)\n      .from('friends')\n      .select(`\n        *,\n        friend_profile:user_profiles!friends_friend_id_fkey(*)\n      `)\n      .eq('user_id', user.id)\n      .eq('status', 'accepted');\n\n    if (error) {\n      // Check if it's a missing table error\n      if (error.message?.includes('relation \"public.friends\" does not exist') || \n          error.message?.includes('relation \"public.user_profiles\" does not exist')) {\n        return [];\n      }\n      return [];\n    }\n\n    return data || [];\n  } catch (error) {\n    return [];\n  }\n}\n\nexport async function getFriendRequests(): Promise<FriendRequest[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return [];\n\n  try {\n    const { data, error } = await (supabase as any)\n      .from('friends')\n      .select(`\n        id,\n        status,\n        created_at,\n        from_user:user_profiles!friends_user_id_fkey(*),\n        to_user:user_profiles!friends_friend_id_fkey(*)\n      `)\n      .eq('friend_id', user.id)\n      .eq('status', 'pending');\n\n    if (error) {\n      // Check if it's a missing table error\n      if (error.message?.includes('relation \"public.friends\" does not exist')) {\n        throw new Error('FRIENDS_TABLE_MISSING');\n      }\n      return [];\n    }\n\n    return data || [];\n  } catch (error) {\n    if ((error as Error).message === 'FRIENDS_TABLE_MISSING') {\n      throw error; // Re-throw so NotificationBell can detect it\n    }\n    return [];\n  }\n}\n\n// Trip Collaboration Functions\nexport async function inviteToTrip(tripId: string, userId: string, role: 'editor' | 'viewer' = 'viewer'): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('trip_collaborators')\n    .insert({\n      trip_id: tripId,\n      user_id: userId,\n      role: role,\n      invited_by: user.id,\n      status: 'pending'\n    });\n\n  if (error) {\n    if ((error as any).code === '23505' || error.message?.includes('trip_collaborators_trip_id_user_id_key')) {\n      const duplicateError = new Error('TRIP_COLLABORATOR_ALREADY_INVITED');\n      (duplicateError as any).code = 'TRIP_COLLABORATOR_ALREADY_INVITED';\n      throw duplicateError;\n    }\n    throw new Error(`Failed to invite user to trip: ${error.message}`);\n  }\n}\n\nexport async function acceptTripInvitation(invitationId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data, error } = await (supabase as any)\n    .from('trip_collaborators')\n    .update({ status: 'accepted' })\n    .eq('id', invitationId)\n    .eq('user_id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to accept trip invitation: ${error.message}`);\n  }\n}\n\nexport async function declineTripInvitation(invitationId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('trip_collaborators')\n    .update({ status: 'declined' })\n    .eq('id', invitationId)\n    .eq('user_id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to decline trip invitation: ${error.message}`);\n  }\n}\n\nexport async function removeFromTrip(tripId: string, userId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('trip_collaborators')\n    .delete()\n    .eq('trip_id', tripId)\n    .eq('user_id', userId);\n\n  if (error) {\n    throw new Error(`Failed to remove user from trip: ${error.message}`);\n  }\n}\n\nexport async function getTripCollaborators(tripId: string): Promise<TripCollaborator[]> {\n  const { data, error } = await (supabase as any)\n    .from('trip_collaborators')\n    .select(`\n      *,\n      user_profile:user_profiles!trip_collaborators_user_id_fkey(*),\n      inviter_profile:user_profiles!trip_collaborators_invited_by_fkey(*)\n    `)\n    .eq('trip_id', tripId)\n    .eq('status', 'accepted');\n\n  if (error) {\n    return [];\n  }\n\n  return data || [];\n}\n\nexport async function getTripInvitations(): Promise<TripInvitation[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return [];\n\n  try {\n    const { data, error } = await (supabase as any)\n      .from('trip_collaborators')\n      .select(`\n        id,\n        role,\n        status,\n        created_at,\n        trip:trips(id, title, destination, start_date, end_date)\n      `)\n      .eq('user_id', user.id)\n      .eq('status', 'pending');\n\n    if (error) {\n      // Check if it's a missing table error\n      if (error.message?.includes('relation \"public.trip_collaborators\" does not exist') || \n          error.message?.includes('relation \"public.user_profiles\" does not exist')) {\n        throw new Error('FRIENDS_TABLE_MISSING');\n      }\n      return [];\n    }\n\n    return data || [];\n  } catch (error) {\n    if ((error as Error).message === 'FRIENDS_TABLE_MISSING') {\n      throw error; // Re-throw so NotificationBell can detect it\n    }\n    return [];\n  }\n}\n\nexport async function updateCollaboratorRole(tripId: string, userId: string, role: 'editor' | 'viewer'): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('trip_collaborators')\n    .update({ role })\n    .eq('trip_id', tripId)\n    .eq('user_id', userId);\n\n  if (error) {\n    throw new Error(`Failed to update collaborator role: ${error.message}`);\n  }\n}\n\n// Check if user can edit trip\nexport async function canEditTrip(tripId: string): Promise<boolean> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return false;\n\n  // Check if user is the owner\n  const { data: trip } = await (supabase as any)\n    .from('trips')\n    .select('user_id')\n    .eq('id', tripId)\n    .single();\n\n  if (trip && trip.user_id === user.id) return true;\n\n  // Check if user is a collaborator with editor role\n  const { data: collaborator } = await (supabase as any)\n    .from('trip_collaborators')\n    .select('role')\n    .eq('trip_id', tripId)\n    .eq('user_id', user.id)\n    .eq('status', 'accepted')\n    .single();\n\n  return collaborator && (collaborator.role === 'editor' || collaborator.role === 'owner');\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6604, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/TripCollaborators.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { \n  getTripCollaborators, \n  getFriends, \n  inviteToTrip, \n  removeFromTrip, \n  updateCollaboratorRole \n} from '@/lib/friend-service';\nimport { TripCollaborator, Friend } from '@/types/friends';\n\ninterface TripCollaboratorsProps {\n  tripId: string;\n  isOwner: boolean;\n  onClose: () => void;\n}\n\nexport default function TripCollaborators({ tripId, isOwner, onClose }: TripCollaboratorsProps) {\n  const [collaborators, setCollaborators] = useState<TripCollaborator[]>([]);\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [selectedFriend, setSelectedFriend] = useState<string>('');\n  const [selectedRole, setSelectedRole] = useState<'editor' | 'viewer'>('viewer');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    loadData();\n  }, [tripId]);\n\n  const loadData = async () => {\n    try {\n      const [collaboratorsData, friendsData] = await Promise.all([\n        getTripCollaborators(tripId),\n        getFriends()\n      ]);\n      setCollaborators(collaboratorsData);\n      \n      // Filter out friends who are already collaborators\n      const collaboratorIds = collaboratorsData.map(c => c.user_id);\n      const availableFriends = friendsData.filter(f => !collaboratorIds.includes(f.friend_id));\n      setFriends(availableFriends);\n    } catch (error) {\n      console.error('Error loading collaborators:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleInviteFriend = async () => {\n    if (!selectedFriend) return;\n\n    try {\n      await inviteToTrip(tripId, selectedFriend, selectedRole);\n      setShowInviteModal(false);\n      setSelectedFriend('');\n      setSelectedRole('viewer');\n      await loadData();\n      alert('Invitation sent!');\n    } catch (error) {\n      console.error('Error inviting friend:', error);\n      if ((error as any)?.code === 'TRIP_COLLABORATOR_ALREADY_INVITED') {\n        alert('This user has already been invited to the trip.');\n      } else {\n        alert('Failed to send invitation');\n      }\n    }\n  };\n\n  const handleRemoveCollaborator = async (userId: string) => {\n    if (window.confirm('Are you sure you want to remove this collaborator?')) {\n      try {\n        await removeFromTrip(tripId, userId);\n        await loadData();\n      } catch (error) {\n        console.error('Error removing collaborator:', error);\n        alert('Failed to remove collaborator');\n      }\n    }\n  };\n\n  const handleUpdateRole = async (userId: string, newRole: 'editor' | 'viewer') => {\n    try {\n      await updateCollaboratorRole(tripId, userId, newRole);\n      setCollaborators(collaborators.map(c => \n        c.user_id === userId ? { ...c, role: newRole } : c\n      ));\n    } catch (error) {\n      console.error('Error updating role:', error);\n      alert('Failed to update role');\n    }\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'owner': return 'bg-primary bg-opacity-10 text-primary';\n      case 'editor': return 'bg-secondary bg-opacity-10 text-secondary';\n      case 'viewer': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n        <div className=\"bg-white rounded-2xl p-6 w-full max-w-2xl mx-4\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading collaborators...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Trip Collaborators</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Invite Button */}\n        {isOwner && friends.length > 0 && (\n          <div className=\"mb-6\">\n            <button\n              onClick={() => setShowInviteModal(true)}\n              className=\"bg-gradient-to-r from-primary to-secondary text-white px-4 py-2 rounded-lg font-medium hover:opacity-90 transition-all\"\n            >\n              + Invite Friends\n            </button>\n          </div>\n        )}\n\n        {/* Collaborators List */}\n        <div className=\"space-y-4\">\n          {collaborators.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No collaborators yet</h3>\n              <p className=\"text-gray-600\">Invite friends to collaborate on this trip!</p>\n            </div>\n          ) : (\n            collaborators.map((collaborator) => (\n              <div key={collaborator.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-xl\">\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center\">\n                    <span className=\"text-white font-semibold text-sm\">\n                      {collaborator.user_profile?.full_name?.charAt(0) || \n                       collaborator.user_profile?.email?.charAt(0) || '?'}\n                    </span>\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-gray-900\">\n                      {collaborator.user_profile?.full_name || 'Unknown User'}\n                    </h4>\n                    <p className=\"text-sm text-gray-600\">{collaborator.user_profile?.email}</p>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-3\">\n                  {/* Role Badge/Selector */}\n                  {isOwner && collaborator.role !== 'owner' ? (\n                    <select\n                      value={collaborator.role}\n                      onChange={(e) => handleUpdateRole(collaborator.user_id, e.target.value as 'editor' | 'viewer')}\n                      className=\"text-sm px-3 py-1 rounded-full border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                    >\n                      <option value=\"viewer\">Viewer</option>\n                      <option value=\"editor\">Editor</option>\n                    </select>\n                  ) : (\n                    <span className={`px-3 py-1 rounded-full text-sm font-medium ${getRoleColor(collaborator.role)}`}>\n                      {collaborator.role.charAt(0).toUpperCase() + collaborator.role.slice(1)}\n                    </span>\n                  )}\n                  \n                  {/* Remove Button */}\n                  {isOwner && collaborator.role !== 'owner' && (\n                    <button\n                      onClick={() => handleRemoveCollaborator(collaborator.user_id)}\n                      className=\"p-1 rounded transition-colors\"\n                      style={{color: '#b1ab86'}}\n                      onMouseEnter={(e) => (e.target as HTMLElement).style.color = '#0a400c'}\n                      onMouseLeave={(e) => (e.target as HTMLElement).style.color = '#b1ab86'}\n                      title=\"Remove collaborator\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Invite Modal */}\n        {showInviteModal && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-60\">\n            <div className=\"bg-white rounded-xl p-6 w-full max-w-md mx-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Invite Friend</h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Select Friend\n                  </label>\n                  <select\n                    value={selectedFriend}\n                    onChange={(e) => setSelectedFriend(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">Choose a friend...</option>\n                    {friends.map((friend) => (\n                      <option key={friend.id} value={friend.friend_id}>\n                        {friend.friend_profile?.full_name || friend.friend_profile?.email}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Role\n                  </label>\n                  <select\n                    value={selectedRole}\n                    onChange={(e) => setSelectedRole(e.target.value as 'editor' | 'viewer')}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  >\n                    <option value=\"viewer\">Viewer - Can view the trip</option>\n                    <option value=\"editor\">Editor - Can view and edit the trip</option>\n                  </select>\n                </div>\n              </div>\n              \n              <div className=\"flex space-x-3 mt-6\">\n                <button\n                  onClick={() => setShowInviteModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleInviteFriend}\n                  disabled={!selectedFriend}\n                  className=\"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Send Invite\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7169, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/TripOverview.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Trip } from \"@/types/itinerary\";\nimport { format, differenceInDays, parseISO } from \"date-fns\";\nimport TripCollaborators from \"./TripCollaborators\";\n\ninterface TripOverviewProps {\n  trip: Trip;\n  onUpdateTrip: (updatedTrip: Partial<Trip>) => void;\n}\n\nexport default function TripOverview({\n  trip,\n  onUpdateTrip,\n}: TripOverviewProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [showCollaborators, setShowCollaborators] = useState(false);\n  const [editData, setEditData] = useState({\n    title: trip.title,\n    description: trip.description || \"\",\n    budget: trip.budget || 0,\n  });\n\n  const duration =\n    differenceInDays(parseISO(trip.end_date), parseISO(trip.start_date)) + 1;\n  const totalExpenses = trip.expenses.reduce(\n    (sum, expense) => sum + expense.amount,\n    0\n  );\n  const remainingBudget = (trip.budget || 0) - totalExpenses;\n  const packedItems = trip.packingList.filter((item) => item.packed).length;\n  const totalItems = trip.packingList.length;\n  const completedActivities = trip.itinerary.reduce(\n    (count, day) =>\n      count + day.activities.filter((activity) => activity.completed).length,\n    0\n  );\n  const totalActivities = trip.itinerary.reduce(\n    (count, day) => count + day.activities.length,\n    0\n  );\n\n  const handleSave = () => {\n    onUpdateTrip(editData);\n    setIsEditing(false);\n  };\n\n  const getBudgetStatus = () => {\n    const percentage = (totalExpenses / (trip.budget || 1)) * 100;\n    if (percentage > 100)\n      return {\n        color: \"text-accent\",\n        bg: \"bg-accent bg-opacity-10\",\n        status: \"Over Budget!\",\n      };\n    if (percentage > 80)\n      return {\n        color: \"text-secondary\",\n        bg: \"bg-secondary bg-opacity-10\",\n        status: \"Close to Limit\",\n      };\n    return {\n      color: \"text-primary\",\n      bg: \"bg-primary bg-opacity-10\",\n      status: \"On Track\",\n    };\n  };\n\n  const budgetStatus = getBudgetStatus();\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Trip Header Card */}\n      <div className=\"glass rounded-lg p-8 shadow-lg\">\n        {isEditing ? (\n          <div className=\"space-y-6\">\n            <input\n              type=\"text\"\n              value={editData.title}\n              onChange={(e) =>\n                setEditData({ ...editData, title: e.target.value })\n              }\n              className=\"w-full text-3xl font-bold text-primary bg-transparent border-b-2 border-primary border-opacity-30 focus:border-primary outline-none pb-2\"\n              placeholder=\"Trip title\"\n            />\n            <textarea\n              value={editData.description}\n              onChange={(e) =>\n                setEditData({ ...editData, description: e.target.value })\n              }\n              className=\"w-full text-secondary bg-transparent border border-secondary border-opacity-20 rounded-lg p-4 focus:border-primary outline-none resize-none\"\n              rows={3}\n              placeholder=\"Trip description\"\n            />\n            <div className=\"flex items-center space-x-4\">\n              <label className=\"text-sm font-semibold text-gray-700\">\n                Budget:\n              </label>\n              <input\n                type=\"number\"\n                value={editData.budget}\n                onChange={(e) =>\n                  setEditData({ ...editData, budget: Number(e.target.value) })\n                }\n                className=\"px-4 py-2 border border-secondary border-opacity-20 rounded-lg focus:border-primary outline-none\"\n                placeholder=\"0\"\n              />\n              <span className=\"text-secondary\">{trip.currency}</span>\n            </div>\n            <div className=\"flex space-x-4\">\n              <button\n                onClick={handleSave}\n                className=\"btn-primary px-6 py-2 rounded-lg font-semibold transition-all duration-200\"\n              >\n                Save Changes\n              </button>\n              <button\n                onClick={() => setIsEditing(false)}\n                className=\"glass text-secondary px-6 py-2 rounded-lg font-semibold transition-all duration-200\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex justify-between items-start mb-4\">\n              <div>\n                <h2 className=\"text-3xl font-bold text-primary mb-2\">\n                  {trip.title}\n                </h2>\n                <p className=\"text-secondary text-lg leading-relaxed\">\n                  {trip.description}\n                </p>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => setShowCollaborators(true)}\n                  className=\"p-2 text-gray-400 hover:text-primary hover:bg-accent hover:bg-opacity-10 rounded-xl transition-colors\"\n                  title=\"Manage collaborators\"\n                >\n                  <svg\n                    className=\"w-5 h-5\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\"\n                    />\n                  </svg>\n                </button>\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"p-2 text-gray-400 hover:text-primary hover:bg-accent hover:bg-opacity-10 rounded-xl transition-colors\"\n                >\n                  <svg\n                    className=\"w-5 h-5\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                    />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-primary\">\n                  {duration}\n                </div>\n                <div className=\"text-sm text-gray-600\">Days</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-secondary\">\n                  {trip.travelers}\n                </div>\n                <div className=\"text-sm text-gray-600\">Travelers</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold\" style={{color: '#819067'}}>\n                  {format(parseISO(trip.start_date), \"EEE, MMM d\")}\n                </div>\n                <div className=\"text-sm text-gray-600\">Start Date</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-orange-600\">\n                  {format(parseISO(trip.end_date), \"EEE, MMM d\")}\n                </div>\n                <div className=\"text-sm text-gray-600\">End Date</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Cover Image Section */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-white/20\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">\n          Trip Cover Image\n        </h3>\n        <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n          {trip.cover_image ? (\n            <div className=\"flex-1 relative\">\n              <img\n                src={trip.cover_image}\n                alt={trip.title}\n                className=\"w-full h-48 object-cover rounded-xl shadow-md\"\n              />\n              <button\n                onClick={() =>\n                  document.getElementById(\"cover-image-input\")?.click()\n                }\n                className=\"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full hover:opacity-90 transition-colors\"\n                title=\"Change cover image\"\n              >\n                <svg\n                  className=\"w-5 h-5\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                  />\n                </svg>\n              </button>\n            </div>\n          ) : (\n            <div\n              className=\"flex-1 w-full h-48 bg-gradient-to-br from-accent to-secondary rounded-xl flex items-center justify-center cursor-pointer hover:opacity-90 transition-colors\"\n              onClick={() =>\n                document.getElementById(\"cover-image-input\")?.click()\n              }\n            >\n              <div className=\"text-center\">\n                <svg\n                  className=\"w-12 h-12 text-primary mx-auto mb-2\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                  />\n                </svg>\n                <p className=\"text-primary font-medium\">\n                  Click to upload cover image\n                </p>\n              </div>\n            </div>\n          )}\n          <input\n            id=\"cover-image-input\"\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={async (e) => {\n              const file = e.target.files?.[0];\n              if (file) {\n                try {\n                  const { uploadTripCoverImage } = await import(\n                    \"@/lib/trip-service\"\n                  );\n                  const coverUrl = await uploadTripCoverImage(trip.id, file);\n                  onUpdateTrip({ cover_image: coverUrl });\n                } catch (error) {\n                  alert(\"Failed to upload cover image\");\n                }\n              }\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {/* Budget Card */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Budget</h3>\n            <div\n              className=\"px-3 py-1 rounded-full text-xs font-bold bg-white/90 text-primary border-2 border-primary shadow-lg backdrop-blur-sm\"\n            >\n              {budgetStatus.status}\n            </div>\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Total Budget</span>\n              <span className=\"font-semibold\">\n                {trip.budget?.toLocaleString()} {trip.currency}\n              </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Spent</span>\n              <span className=\"font-semibold\" style={{color: '#0a400c'}}>\n                {totalExpenses.toLocaleString()} {trip.currency}\n              </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Remaining</span>\n              <span\n                className=\"font-semibold\"\n                style={{color: remainingBudget >= 0 ? '#819067' : '#0a400c'}}\n              >\n                {remainingBudget.toLocaleString()} {trip.currency}\n              </span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2 mt-3\">\n              <div\n                className=\"h-2 rounded-full transition-all duration-300\"\n                style={{\n                  backgroundColor: totalExpenses > (trip.budget || 0) ? '#0a400c' : '#819067',\n                  width: `${Math.min(\n                    (totalExpenses / (trip.budget || 1)) * 100,\n                    100\n                  )}%`\n                }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Packing Progress */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Packing</h3>\n            <span className=\"text-2xl\">üß≥</span>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-primary mb-2\">\n              {packedItems}/{totalItems}\n            </div>\n            <div className=\"text-sm text-gray-600 mb-3\">Items Packed</div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div\n                className=\"bg-gradient-to-r from-primary to-secondary h-2 rounded-full transition-all duration-300\"\n                style={{\n                  width: `${\n                    totalItems > 0 ? (packedItems / totalItems) * 100 : 0\n                  }%`,\n                }}\n              ></div>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              {totalItems > 0\n                ? Math.round((packedItems / totalItems) * 100)\n                : 0}\n              % Complete\n            </div>\n          </div>\n        </div>\n\n        {/* Activities Progress */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Activities</h3>\n            <span className=\"text-2xl\">üóìÔ∏è</span>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-secondary mb-2\">\n              {completedActivities}/{totalActivities}\n            </div>\n            <div className=\"text-sm text-gray-600 mb-3\">Completed</div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div\n                className=\"bg-gradient-to-r from-secondary to-accent h-2 rounded-full transition-all duration-300\"\n                style={{\n                  width: `${\n                    totalActivities > 0\n                      ? (completedActivities / totalActivities) * 100\n                      : 0\n                  }%`,\n                }}\n              ></div>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              {totalActivities > 0\n                ? Math.round((completedActivities / totalActivities) * 100)\n                : 0}\n              % Complete\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">\n          Recent Updates\n        </h3>\n        <div className=\"text-center py-8\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg\n              className=\"w-8 h-8 text-gray-400\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n          <p className=\"text-gray-600 text-sm\">No recent activity</p>\n          <p className=\"text-gray-500 text-xs mt-1\">\n            Activity will appear here as you update your trip\n          </p>\n        </div>\n      </div>\n\n      {/* Collaborators Modal */}\n      {showCollaborators && (\n        <TripCollaborators\n          tripId={trip.id}\n          isOwner={true}\n          onClose={() => setShowCollaborators(false)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8137, "column": 0}, "map": {"version":3,"sources":["file:///Users/bengideondokiburra/All%20Git%20Clones/Travel%20Planner/triptimeline/src/app/itinerary/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAuth } from \"@/components/AuthProvider\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState, use } from \"react\";\nimport { parseISO } from \"date-fns\";\nimport DashboardHeader from \"@/components/DashboardHeader\";\nimport VerticalItinerary from \"@/components/VerticalItinerary\";\nimport PackingList from \"@/components/PackingList\";\nimport ExpenseTracker from \"@/components/ExpenseTracker\";\nimport AccommodationManager from \"@/components/AccommodationManager\";\nimport TripOverview from \"@/components/TripOverview\";\nimport {\n  Trip,\n  ItineraryDay,\n  Activity,\n  ActivityInput,\n  PackingItem,\n  Expense,\n  Accommodation,\n} from \"@/types/itinerary\";\n\nexport default function ItineraryPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const resolvedParams = use(params);\n  const [trip, setTrip] = useState<Trip | null>(null);\n  const [activeTab, setActiveTab] = useState<\n    \"overview\" | \"itinerary\" | \"packing\" | \"expenses\" | \"accommodation\"\n  >(\"itinerary\");\n\n  useEffect(() => {\n    if (!loading && !user) {\n      router.push(\"/auth/login\");\n    }\n  }, [user, loading, router]);\n\n  // Load trip data from database\n  useEffect(() => {\n    async function loadTrip() {\n      if (!resolvedParams.id) return;\n\n      try {\n        const { getTrip } = await import(\"@/lib/trip-service\");\n        const tripData = await getTrip(resolvedParams.id);\n\n        if (tripData) {\n          // Apply any localStorage edits to the trip data\n          try {\n            const tripKey = `trip_${resolvedParams.id}_edits`;\n            const savedEdits = JSON.parse(\n              localStorage.getItem(tripKey) || \"{}\"\n            );\n\n            if (Object.keys(savedEdits).length > 0) {\n              const updatedItinerary = [...tripData.itinerary];\n\n              Object.entries(savedEdits).forEach(([key, edits]) => {\n                if (key.startsWith(\"day_\")) {\n                  const dayIndex = parseInt(key.replace(\"day_\", \"\"));\n                  if (updatedItinerary[dayIndex] && typeof edits === \"object\") {\n                    updatedItinerary[dayIndex] = {\n                      ...updatedItinerary[dayIndex],\n                      ...(edits as Partial<ItineraryDay>),\n                    };\n                  }\n                }\n              });\n\n              tripData.itinerary = updatedItinerary;\n            }\n          } catch (error) {\n            // Could not load edits from localStorage\n          }\n\n          setTrip(tripData);\n        } else {\n          // Trip not found, create empty structure\n          const emptyTrip: Trip = {\n            id: resolvedParams.id,\n            title: \"My Trip\",\n            destination: \"Destination\",\n            start_date: new Date().toISOString().split(\"T\")[0],\n            end_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n              .toISOString()\n              .split(\"T\")[0],\n            description: \"Plan your amazing journey\",\n            budget: 0,\n            currency: \"USD\",\n            travelers: 1,\n            packingList: [],\n            expenses: [],\n            itinerary: [],\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n          };\n          setTrip(emptyTrip);\n        }\n      } catch (error) {\n        // Fallback to empty trip\n        const emptyTrip: Trip = {\n          id: resolvedParams.id,\n          title: \"My Trip\",\n          destination: \"Destination\",\n          start_date: new Date().toISOString().split(\"T\")[0],\n          end_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n            .toISOString()\n            .split(\"T\")[0],\n          description: \"Plan your amazing journey\",\n          budget: 0,\n          currency: \"USD\",\n          travelers: 1,\n          packingList: [],\n          expenses: [],\n          itinerary: [],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString(),\n        };\n        setTrip(emptyTrip);\n      }\n    }\n\n    if (user) {\n      loadTrip();\n    }\n  }, [resolvedParams.id, user]);\n\n  const updateTrip = async (updatedTrip: Partial<Trip>) => {\n    if (trip) {\n      setTrip({ ...trip, ...updatedTrip });\n\n      // Save to database\n      try {\n        const { updateTrip: updateTripDB } = await import(\"@/lib/trip-service\");\n        await updateTripDB(trip.id, updatedTrip);\n      } catch (error) {\n        // Error updating trip\n      }\n    }\n  };\n\n  const addNewDay = () => {\n    if (!trip) return;\n\n    const newDayNumber = trip.itinerary.length + 1;\n    const tripStartDate = parseISO(trip.start_date);\n    const newDayDate = new Date(tripStartDate);\n    newDayDate.setDate(tripStartDate.getDate() + newDayNumber - 1);\n\n    const newDay: ItineraryDay = {\n      day: newDayNumber,\n      date: newDayDate.toISOString().split(\"T\")[0],\n      activities: [],\n      notes: \"\",\n      actualSpent: 0,\n    };\n\n    const updatedItinerary = [...trip.itinerary, newDay];\n    updateTrip({ itinerary: updatedItinerary });\n  };\n\n  const tabs = [\n    { id: \"overview\", name: \"Overview\", icon: \"üìä\" },\n    { id: \"itinerary\", name: \"Itinerary\", icon: \"üóìÔ∏è\" },\n    { id: \"packing\", name: \"Packing\", icon: \"üß≥\" },\n    { id: \"expenses\", name: \"Expenses\", icon: \"üí∞\" },\n    { id: \"accommodation\", name: \"Hotels\", icon: \"üè®\" },\n  ] as const;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-bg flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-secondary\">Loading itinerary...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user || !trip) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-bg\">\n      <DashboardHeader user={user} />\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8 text-center\">\n          <div className=\"inline-block glass px-6 py-2 rounded-full text-sm font-bold text-primary mb-4 shadow-md\">\n            {trip?.destination.toUpperCase()}\n          </div>\n          <div className=\"glass rounded-2xl p-6 max-w-2xl mx-auto shadow-md border border-secondary border-opacity-20\">\n            <h1 className=\"text-4xl font-bold text-primary tracking-wider mb-2\">\n              {trip?.title || \"TRIP PLANNER\"}\n            </h1>\n            <p className=\"text-secondary\">{trip?.description}</p>\n          </div>\n        </div>\n\n        {/* Navigation Tabs */}\n        <div className=\"mb-8\">\n          <div className=\"glass rounded-xl p-2 shadow-md border border-secondary border-opacity-20 max-w-4xl mx-auto\">\n            <nav className=\"flex space-x-2\" aria-label=\"Tabs\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`\n                    flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200\n                    ${\n                      activeTab === tab.id\n                        ? \"btn-primary text-white shadow-md transform scale-105\"\n                        : \"text-secondary hover:text-primary hover:bg-accent hover:bg-opacity-10\"\n                    }\n                  `}\n                >\n                  <span className=\"mr-2 text-lg\">{tab.icon}</span>\n                  <span className=\"hidden sm:inline\">{tab.name}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"mb-8\">\n          {activeTab === \"overview\" && trip && (\n            <TripOverview trip={trip} onUpdateTrip={updateTrip} />\n          )}\n\n          {activeTab === \"itinerary\" && trip && (\n            <VerticalItinerary\n              itinerary={trip.itinerary}\n              tripId={trip.id}\n              onAddActivity={async (\n                dayIndex: number,\n                activityInput: ActivityInput\n              ) => {\n                try {\n                  const { addActivity } = await import(\"@/lib/trip-service\");\n                  const created = await addActivity(\n                    trip.id,\n                    dayIndex + 1,\n                    activityInput\n                  );\n\n                  const updatedItinerary = [...trip.itinerary];\n                  if (!updatedItinerary[dayIndex].activities) {\n                    updatedItinerary[dayIndex].activities = [];\n                  }\n                  updatedItinerary[dayIndex].activities.push(created);\n                  updateTrip({ itinerary: updatedItinerary });\n                } catch (error) {\n                  // Error adding activity\n                }\n              }}\n              onEditActivity={async (\n                dayIndex: number,\n                activityId: string,\n                activityInput: ActivityInput\n              ) => {\n                try {\n                  const { updateActivity } = await import(\"@/lib/trip-service\");\n                  const updated = await updateActivity(\n                    trip.id,\n                    dayIndex + 1,\n                    activityId,\n                    activityInput\n                  );\n\n                  const itineraryCopy = [...trip.itinerary];\n                  const activityIndex = itineraryCopy[\n                    dayIndex\n                  ].activities.findIndex((a) => a.id === activityId);\n                  if (activityIndex !== -1) {\n                    itineraryCopy[dayIndex].activities[activityIndex] = updated;\n                    updateTrip({ itinerary: itineraryCopy });\n                  }\n                } catch (error) {\n                  // Error updating activity\n                }\n              }}\n              onDeleteActivity={async (\n                dayIndex: number,\n                activityId: string\n              ) => {\n                try {\n                  const { deleteActivity } = await import(\"@/lib/trip-service\");\n                  await deleteActivity(trip.id, dayIndex + 1, activityId);\n\n                  const itineraryCopy = [...trip.itinerary];\n                  itineraryCopy[dayIndex].activities = itineraryCopy[\n                    dayIndex\n                  ].activities.filter((a) => a.id !== activityId);\n                  updateTrip({ itinerary: itineraryCopy });\n                } catch (error) {\n                  // Error deleting activity\n                }\n              }}\n              onSaveNotes={async (dayIndex: number, notes: string) => {\n                try {\n                  const { updateTripDay } = await import(\"@/lib/trip-service\");\n                  await updateTripDay(trip.id, dayIndex + 1, { notes });\n\n                  const updatedItinerary = [...trip.itinerary];\n                  updatedItinerary[dayIndex] = {\n                    ...updatedItinerary[dayIndex],\n                    notes,\n                  };\n                  updateTrip({ itinerary: updatedItinerary });\n                } catch (error) {\n                  // Error saving notes\n                }\n              }}\n              onSaveExpense={async (dayIndex: number, expense) => {\n                try {\n                  const expenseData = {\n                    id: crypto.randomUUID(),\n                    title: expense.title,\n                    amount: expense.amount,\n                    currency: expense.currency,\n                    category: expense.category as any,\n                    date: expense.date,\n                    description: \"\",\n                    shared: false,\n                  };\n                  const { addExpense, getTrip } = await import(\n                    \"@/lib/trip-service\"\n                  );\n                  await addExpense(trip.id, expenseData);\n\n                  // Refresh trip data to show updated expenses\n                  const updatedTrip = await getTrip(trip.id);\n                  if (updatedTrip) {\n                    updateTrip(updatedTrip);\n                  }\n                } catch (error) {\n                  // Error saving expense\n                }\n              }}\n              onUpdateDay={async (\n                dayIndex: number,\n                updatedDay: Partial<ItineraryDay>\n              ) => {\n                // Update local state immediately for better UX\n                const updatedItinerary = [...trip.itinerary];\n                updatedItinerary[dayIndex] = {\n                  ...updatedItinerary[dayIndex],\n                  ...updatedDay,\n                };\n                updateTrip({ itinerary: updatedItinerary });\n\n                // Save to database\n                try {\n                  const { updateTripDay } = await import(\"@/lib/trip-service\");\n                  await updateTripDay(trip.id, dayIndex + 1, updatedDay);\n                } catch (error) {\n                  // Error updating day in database\n                }\n              }}\n              onAddDay={addNewDay}\n              onDeleteDay={async (dayIndex: number) => {\n                try {\n                  const dayToDelete = trip.itinerary[dayIndex];\n\n                  // Delete from database first\n                  const { deleteTripDay } = await import(\"@/lib/trip-service\");\n                  await deleteTripDay(trip.id, dayToDelete.day);\n\n                  // Remove from local state\n                  const updatedItinerary = [...trip.itinerary];\n                  updatedItinerary.splice(dayIndex, 1);\n\n                  // Renumber the remaining days\n                  const renumberedItinerary = updatedItinerary.map(\n                    (day, index) => ({\n                      ...day,\n                      day: index + 1,\n                    })\n                  );\n\n                  updateTrip({ itinerary: renumberedItinerary });\n                } catch (error) {\n                  // Error deleting day\n                }\n              }}\n            />\n          )}\n\n          {activeTab === \"packing\" && trip && (\n            <PackingList\n              packingList={trip.packingList}\n              onUpdatePackingList={async (packingList) => {\n                setTrip({ ...trip, packingList });\n                try {\n                  const { savePackingList } = await import(\n                    \"@/lib/trip-service\"\n                  );\n                  await savePackingList(trip.id, packingList);\n                } catch (error) {\n                  // Error saving packing list\n                }\n              }}\n            />\n          )}\n\n          {activeTab === \"expenses\" && trip && (\n            <ExpenseTracker\n              expenses={trip.expenses}\n              budget={trip.budget || 0}\n              currency={trip.currency}\n              onUpdateExpenses={(expenses) => updateTrip({ expenses })}\n            />\n          )}\n\n          {activeTab === \"accommodation\" && trip && (\n            <AccommodationManager\n              tripId={trip.id}\n              itinerary={trip.itinerary}\n              onUpdateItinerary={(itinerary) => updateTrip({ itinerary })}\n            />\n          )}\n        </div>\n\n        {/* Back Button */}\n        <div className=\"text-center\">\n          <button\n            onClick={() => router.push(\"/dashboard\")}\n            className=\"btn-primary px-8 py-3 rounded-lg font-semibold focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            ‚Üê Back to Dashboard\n          </button>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}