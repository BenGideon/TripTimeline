{"version":3,"sources":["../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/app/itinerary/%5Bid%5D/page.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/VerticalItinerary.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/MediaCarousel.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/PackingList.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/ExpenseTracker.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/AccommodationManager.tsx","../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/components/TripOverview.tsx"],"sourcesContent":["'use client';\n\nimport { useAuth } from '@/components/AuthProvider';\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState, use } from 'react';\nimport DashboardHeader from '@/components/DashboardHeader';\nimport VerticalItinerary from '@/components/VerticalItinerary';\nimport PackingList from '@/components/PackingList';\nimport ExpenseTracker from '@/components/ExpenseTracker';\nimport AccommodationManager from '@/components/AccommodationManager';\nimport TripOverview from '@/components/TripOverview';\nimport { Trip, ItineraryDay, Activity, ActivityInput, PackingItem, Expense, Accommodation } from '@/types/itinerary';\n\nexport default function ItineraryPage({ params }: { params: Promise<{ id: string }> }) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const resolvedParams = use(params);\n  const [trip, setTrip] = useState<Trip | null>(null);\n  const [activeTab, setActiveTab] = useState<'overview' | 'itinerary' | 'packing' | 'expenses' | 'accommodation'>('itinerary');\n\n  useEffect(() => {\n    if (!loading && !user) {\n      router.push('/auth/login');\n    }\n  }, [user, loading, router]);\n\n  // Load trip data from database\n  useEffect(() => {\n    async function loadTrip() {\n      if (!resolvedParams.id) return;\n      \n      try {\n        const { getTrip } = await import('@/lib/trip-service');\n        const tripData = await getTrip(resolvedParams.id);\n        \n        if (tripData) {\n          // Apply any localStorage edits to the trip data\n          try {\n            const tripKey = `trip_${resolvedParams.id}_edits`;\n            const savedEdits = JSON.parse(localStorage.getItem(tripKey) || '{}');\n            \n            if (Object.keys(savedEdits).length > 0) {\n              const updatedItinerary = [...tripData.itinerary];\n              \n              Object.entries(savedEdits).forEach(([key, edits]) => {\n                if (key.startsWith('day_')) {\n                  const dayIndex = parseInt(key.replace('day_', ''));\n                  if (updatedItinerary[dayIndex] && typeof edits === 'object') {\n                    updatedItinerary[dayIndex] = { ...updatedItinerary[dayIndex], ...(edits as Partial<ItineraryDay>) };\n                  }\n                }\n              });\n              \n              tripData.itinerary = updatedItinerary;\n            }\n          } catch (error) {\n            // Could not load edits from localStorage\n          }\n          \n          setTrip(tripData);\n        } else {\n          // Trip not found, create empty structure\n          const emptyTrip: Trip = {\n            id: resolvedParams.id,\n            title: 'My Trip',\n            destination: 'Destination',\n            start_date: new Date().toISOString().split('T')[0],\n            end_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n            description: 'Plan your amazing journey',\n            budget: 0,\n            currency: 'USD',\n            travelers: 1,\n            packingList: [],\n            expenses: [],\n            itinerary: [],\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          };\n          setTrip(emptyTrip);\n        }\n      } catch (error) {\n        // Fallback to empty trip\n        const emptyTrip: Trip = {\n          id: resolvedParams.id,\n          title: 'My Trip',\n          destination: 'Destination',\n          start_date: new Date().toISOString().split('T')[0],\n          end_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n          description: 'Plan your amazing journey',\n          budget: 0,\n          currency: 'USD',\n          travelers: 1,\n          packingList: [],\n          expenses: [],\n          itinerary: [],\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        };\n        setTrip(emptyTrip);\n      }\n    }\n\n    if (user) {\n      loadTrip();\n    }\n  }, [resolvedParams.id, user]);\n\n  const updateTrip = async (updatedTrip: Partial<Trip>) => {\n    if (trip) {\n      setTrip({ ...trip, ...updatedTrip });\n      \n      // Save to database\n      try {\n        const { updateTrip: updateTripDB } = await import('@/lib/trip-service');\n        await updateTripDB(trip.id, updatedTrip);\n      } catch (error) {\n        // Error updating trip\n      }\n    }\n  };\n\n  const addNewDay = () => {\n    if (!trip) return;\n    \n    const newDayNumber = trip.itinerary.length + 1;\n    const tripStartDate = new Date(trip.start_date);\n    const newDayDate = new Date(tripStartDate);\n    newDayDate.setDate(tripStartDate.getDate() + newDayNumber - 1);\n    \n    const newDay: ItineraryDay = {\n      day: newDayNumber,\n      date: newDayDate.toISOString().split('T')[0],\n      activities: [],\n      notes: '',\n      actualSpent: 0\n    };\n    \n    const updatedItinerary = [...trip.itinerary, newDay];\n    updateTrip({ itinerary: updatedItinerary });\n  };\n\n  const tabs = [\n    { id: 'overview', name: 'Overview', icon: 'üìä' },\n    { id: 'itinerary', name: 'Itinerary', icon: 'üóìÔ∏è' },\n    { id: 'packing', name: 'Packing', icon: 'üß≥' },\n    { id: 'expenses', name: 'Expenses', icon: 'üí∞' },\n    { id: 'accommodation', name: 'Hotels', icon: 'üè®' },\n  ] as const;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading itinerary...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user || !trip) {\n    return null;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50\">\n      <DashboardHeader user={user} />\n      \n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"mb-8 text-center\">\n          <div className=\"inline-block bg-yellow-300/80 backdrop-blur-sm px-6 py-2 rounded-full text-sm font-bold text-gray-800 mb-4 shadow-lg border border-yellow-400/30\">\n            {trip?.destination.toUpperCase()}\n          </div>\n          <div className=\"border-2 border-purple-400 bg-white/90 backdrop-blur-sm rounded-3xl p-6 max-w-2xl mx-auto shadow-2xl\">\n            <h1 className=\"text-4xl font-bold text-gray-900 tracking-wider mb-2\">\n              {trip?.title || 'TRIP PLANNER'}\n            </h1>\n            <p className=\"text-gray-600\">{trip?.description}</p>\n          </div>\n        </div>\n\n        {/* Navigation Tabs */}\n        <div className=\"mb-8\">\n          <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-2 shadow-lg border border-white/20 max-w-4xl mx-auto\">\n            <nav className=\"flex space-x-2\" aria-label=\"Tabs\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`\n                    flex-1 flex items-center justify-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200\n                    ${activeTab === tab.id\n                      ? 'bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg transform scale-105'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'\n                    }\n                  `}\n                >\n                  <span className=\"mr-2 text-lg\">{tab.icon}</span>\n                  <span className=\"hidden sm:inline\">{tab.name}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"mb-8\">\n          {activeTab === 'overview' && trip && (\n            <TripOverview trip={trip} onUpdateTrip={updateTrip} />\n          )}\n          \n          {activeTab === 'itinerary' && trip && (\n            <VerticalItinerary \n              itinerary={trip.itinerary}\n              tripId={trip.id}\n              onAddActivity={async (dayIndex: number, activityInput: ActivityInput) => {\n                try {\n                  const { addActivity } = await import('@/lib/trip-service');\n                  const created = await addActivity(trip.id, dayIndex + 1, activityInput);\n\n                  const updatedItinerary = [...trip.itinerary];\n                  if (!updatedItinerary[dayIndex].activities) {\n                    updatedItinerary[dayIndex].activities = [];\n                  }\n                  updatedItinerary[dayIndex].activities.push(created);\n                  updateTrip({ itinerary: updatedItinerary });\n                } catch (error) {\n                  // Error adding activity\n                }\n              }}\n              onEditActivity={async (dayIndex: number, activityId: string, activityInput: ActivityInput) => {\n                try {\n                  const { updateActivity } = await import('@/lib/trip-service');\n                  const updated = await updateActivity(trip.id, dayIndex + 1, activityId, activityInput);\n\n                  const itineraryCopy = [...trip.itinerary];\n                  const activityIndex = itineraryCopy[dayIndex].activities.findIndex(a => a.id === activityId);\n                  if (activityIndex !== -1) {\n                    itineraryCopy[dayIndex].activities[activityIndex] = updated;\n                    updateTrip({ itinerary: itineraryCopy });\n                  }\n                } catch (error) {\n                  // Error updating activity\n                }\n              }}\n              onDeleteActivity={async (dayIndex: number, activityId: string) => {\n                try {\n                  const { deleteActivity } = await import('@/lib/trip-service');\n                  await deleteActivity(trip.id, dayIndex + 1, activityId);\n\n                  const itineraryCopy = [...trip.itinerary];\n                  itineraryCopy[dayIndex].activities = itineraryCopy[dayIndex].activities.filter(a => a.id !== activityId);\n                  updateTrip({ itinerary: itineraryCopy });\n                } catch (error) {\n                  // Error deleting activity\n                }\n              }}\n              onSaveNotes={async (dayIndex: number, notes: string) => {\n                try {\n                  const { updateTripDay } = await import('@/lib/trip-service');\n                  await updateTripDay(trip.id, dayIndex + 1, { notes });\n                  \n                  const updatedItinerary = [...trip.itinerary];\n                  updatedItinerary[dayIndex] = { ...updatedItinerary[dayIndex], notes };\n                  updateTrip({ itinerary: updatedItinerary });\n                } catch (error) {\n                  // Error saving notes\n                }\n              }}\n              onSaveExpense={async (dayIndex: number, expense) => {\n                try {\n                  const expenseData = {\n                    id: crypto.randomUUID(),\n                    title: expense.title,\n                    amount: expense.amount,\n                    currency: expense.currency,\n                    category: expense.category as any,\n                    date: expense.date,\n                    description: '',\n                    shared: false\n                  };\n                  const { addExpense, getTrip } = await import('@/lib/trip-service');\n                  await addExpense(trip.id, expenseData);\n                  \n                  // Refresh trip data to show updated expenses\n                  const updatedTrip = await getTrip(trip.id);\n                  if (updatedTrip) {\n                    updateTrip(updatedTrip);\n                  }\n                } catch (error) {\n                  // Error saving expense\n                }\n              }}\n              onUpdateDay={async (dayIndex: number, updatedDay: Partial<ItineraryDay>) => {\n                \n                // Update local state immediately for better UX\n                const updatedItinerary = [...trip.itinerary];\n                updatedItinerary[dayIndex] = { ...updatedItinerary[dayIndex], ...updatedDay };\n                updateTrip({ itinerary: updatedItinerary });\n                \n                // Save to database\n                try {\n                  const { updateTripDay } = await import('@/lib/trip-service');\n                  await updateTripDay(trip.id, dayIndex + 1, updatedDay);\n                } catch (error) {\n                  // Error updating day in database\n                }\n              }}\n              onAddDay={addNewDay}\n              onDeleteDay={async (dayIndex: number) => {\n                try {\n                  const dayToDelete = trip.itinerary[dayIndex];\n                  \n                  // Delete from database first\n                  const { deleteTripDay } = await import('@/lib/trip-service');\n                  await deleteTripDay(trip.id, dayToDelete.day);\n                  \n                  // Remove from local state\n                  const updatedItinerary = [...trip.itinerary];\n                  updatedItinerary.splice(dayIndex, 1);\n                  \n                  // Renumber the remaining days\n                  const renumberedItinerary = updatedItinerary.map((day, index) => ({\n                    ...day,\n                    day: index + 1\n                  }));\n                  \n                  updateTrip({ itinerary: renumberedItinerary });\n                } catch (error) {\n                  // Error deleting day\n                }\n              }}\n            />\n          )}\n          \n          {activeTab === 'packing' && trip && (\n            <PackingList \n              packingList={trip.packingList}\n              onUpdatePackingList={async (packingList) => {\n                setTrip({ ...trip, packingList });\n                try {\n                  const { savePackingList } = await import('@/lib/trip-service');\n                  await savePackingList(trip.id, packingList);\n                } catch (error) {\n                  // Error saving packing list\n                }\n              }} \n            />\n          )}\n          \n          {activeTab === 'expenses' && trip && (\n            <ExpenseTracker \n              expenses={trip.expenses} \n              budget={trip.budget || 0}\n              currency={trip.currency}\n              onUpdateExpenses={(expenses) => updateTrip({ expenses })} \n            />\n          )}\n          \n          {activeTab === 'accommodation' && trip && (\n            <AccommodationManager \n              itinerary={trip.itinerary}\n              onUpdateItinerary={(itinerary) => updateTrip({ itinerary })} \n            />\n          )}\n        </div>\n\n        {/* Back Button */}\n        <div className=\"text-center\">\n          <button\n            onClick={() => router.push('/dashboard')}\n            className=\"bg-gradient-to-r from-gray-600 to-gray-700 text-white px-8 py-3 rounded-xl font-semibold hover:from-gray-700 hover:to-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            ‚Üê Back to Dashboard\n          </button>\n        </div>\n      </main>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { ItineraryDay, Activity, ActivityInput } from '@/types/itinerary';\nimport { format } from 'date-fns';\nimport MediaCarousel from './MediaCarousel';\n\ninterface VerticalItineraryProps {\n  itinerary: ItineraryDay[];\n  tripId?: string;\n  onAddActivity: (dayIndex: number, activity: ActivityInput) => Promise<void> | void;\n  onEditActivity: (dayIndex: number, activityId: string, activity: ActivityInput) => Promise<void> | void;\n  onDeleteActivity: (dayIndex: number, activityId: string) => Promise<void> | void;\n  onSaveNotes?: (dayIndex: number, notes: string) => Promise<void> | void;\n  onSaveExpense?: (dayIndex: number, expense: { title: string; amount: number; category: string; currency: string; date: string }) => Promise<void> | void;\n  onUpdateDay?: (dayIndex: number, updatedDay: Partial<ItineraryDay>) => void | Promise<void>;\n  onAddDay?: () => void;\n  onDeleteDay?: (dayIndex: number) => void;\n}\n\nexport default function VerticalItinerary({\n  itinerary,\n  tripId,\n  onAddActivity,\n  onEditActivity,\n  onDeleteActivity,\n  onSaveNotes,\n  onSaveExpense,\n  onUpdateDay,\n  onAddDay,\n  onDeleteDay\n}: VerticalItineraryProps) {\n  const [expandedDays, setExpandedDays] = useState<Set<number>>(new Set([0])); // First day expanded by default\n  const [editingDay, setEditingDay] = useState<{dayIndex: number, field: 'title' | 'notes'} | null>(null);\n  const [editValue, setEditValue] = useState('');\n  const [activityModal, setActivityModal] = useState<{ dayIndex: number; activity?: Activity } | null>(null);\n  const [activityTitle, setActivityTitle] = useState('');\n  const [activityTime, setActivityTime] = useState('');\n  const [activityCategory, setActivityCategory] = useState<Activity['category']>('sightseeing');\n  const [activityType, setActivityType] = useState<Activity['type']>('morning');\n  const [activityLocation, setActivityLocation] = useState('');\n  const [activityDescription, setActivityDescription] = useState('');\n  const [activityCost, setActivityCost] = useState('');\n  const [notesModal, setNotesModal] = useState<{ dayIndex: number } | null>(null);\n  const [notesValue, setNotesValue] = useState('');\n  const [expenseModal, setExpenseModal] = useState<{ dayIndex: number } | null>(null);\n  const [expenseTitle, setExpenseTitle] = useState('');\n  const [expenseAmount, setExpenseAmount] = useState('');\n  const [expenseCategory, setExpenseCategory] = useState<'food' | 'transport' | 'accommodation' | 'shopping' | 'activities' | 'other'>('food');\n  const [isActivitySaving, setIsActivitySaving] = useState(false);\n  const [isNotesSaving, setIsNotesSaving] = useState(false);\n  const [isExpenseSaving, setIsExpenseSaving] = useState(false);\n  const [draggedDayIndex, setDraggedDayIndex] = useState<number | null>(null);\n  const [dragOverDayIndex, setDragOverDayIndex] = useState<number | null>(null);\n  const [mediaUploadDayIndex, setMediaUploadDayIndex] = useState<number | null>(null);\n  const [isMediaUploading, setIsMediaUploading] = useState(false);\n  const [dayMedia, setDayMedia] = useState<{ [key: number]: any[] }>({});\n  const [currentMediaIndex, setCurrentMediaIndex] = useState<{ [key: number]: number }>({});\n\n  // Load media for all days on mount\n  useEffect(() => {\n    const loadAllMedia = async () => {\n      if (!tripId || itinerary.length === 0) return;\n      \n      try {\n        const { getMediaForDay } = await import('@/lib/trip-service');\n        const mediaMap: { [key: number]: any[] } = {};\n        \n        for (let dayIndex = 0; dayIndex < itinerary.length; dayIndex++) {\n          const media = await getMediaForDay(tripId, dayIndex + 1);\n          mediaMap[dayIndex] = media;\n        }\n        \n        setDayMedia(mediaMap);\n      } catch (error) {\n        // Error loading media\n      }\n    };\n    \n    loadAllMedia();\n  }, [tripId, itinerary.length]);\n\n  const resetActivityForm = () => {\n    setActivityTitle('');\n    setActivityTime('');\n    setActivityCategory('sightseeing');\n    setActivityType('morning');\n    setActivityLocation('');\n    setActivityDescription('');\n    setActivityCost('');\n    setIsActivitySaving(false);\n  };\n\n  const openActivityModal = (dayIndex: number, activity?: Activity) => {\n    setIsActivitySaving(false);\n\n    if (activity) {\n      setActivityModal({ dayIndex, activity });\n      setActivityTitle(activity.title);\n      setActivityTime(activity.time || '');\n      setActivityCategory(activity.category);\n      setActivityType(activity.type || 'morning');\n      setActivityLocation(activity.location || '');\n      setActivityDescription(activity.description || '');\n      setActivityCost(activity.cost !== undefined && activity.cost !== null ? String(activity.cost) : '');\n    } else {\n      resetActivityForm();\n      setActivityModal({ dayIndex });\n    }\n  };\n\n  const closeActivityModal = () => {\n    setActivityModal(null);\n    resetActivityForm();\n  };\n\n  const handleSubmitActivity = async () => {\n    if (!activityModal || activityTitle.trim() === '') return;\n\n    const trimmedTitle = activityTitle.trim();\n    const trimmedTime = activityTime.trim();\n    const costValue = activityCost.trim() === '' ? undefined : Number(activityCost);\n    const safeCost = costValue !== undefined && !Number.isNaN(costValue) ? costValue : undefined;\n\n    const payload: ActivityInput = {\n      title: trimmedTitle,\n      time: trimmedTime,\n      type: activityType,\n      category: activityCategory,\n      description: activityDescription.trim() || undefined,\n      location: activityLocation.trim() || undefined,\n      cost: safeCost,\n    };\n\n    setIsActivitySaving(true);\n\n    try {\n      if (activityModal.activity) {\n        await onEditActivity(activityModal.dayIndex, activityModal.activity.id, payload);\n      } else {\n        await onAddActivity(activityModal.dayIndex, payload);\n      }\n      closeActivityModal();\n    } catch (error) {\n      // Error saving activity\n    } finally {\n      setIsActivitySaving(false);\n    }\n  };\n\n  const handleDeleteActivity = async (dayIndex: number, activityId: string) => {\n    const confirmDelete = window.confirm('Delete this activity?');\n    if (!confirmDelete) return;\n\n    try {\n      await onDeleteActivity(dayIndex, activityId);\n    } catch (error) {\n      // Error deleting activity\n    }\n  };\n\n  const openNotesModal = (dayIndex: number) => {\n    setNotesModal({ dayIndex });\n    setNotesValue(itinerary[dayIndex]?.notes || '');\n  };\n\n  const closeNotesModal = () => {\n    setNotesModal(null);\n    setNotesValue('');\n  };\n\n  const handleSaveNotes = async () => {\n    if (!notesModal) return;\n    setIsNotesSaving(true);\n\n    try {\n      if (onSaveNotes) {\n        await onSaveNotes(notesModal.dayIndex, notesValue);\n      } else if (onUpdateDay) {\n        await onUpdateDay(notesModal.dayIndex, { notes: notesValue });\n      }\n      closeNotesModal();\n    } catch (error) {\n      // Error saving notes\n    } finally {\n      setIsNotesSaving(false);\n    }\n  };\n\n  const openExpenseModal = (dayIndex: number) => {\n    setExpenseModal({ dayIndex });\n    setExpenseTitle('');\n    setExpenseAmount('');\n    setExpenseCategory('food');\n  };\n\n  const closeExpenseModal = () => {\n    setExpenseModal(null);\n    setExpenseTitle('');\n    setExpenseAmount('');\n    setExpenseCategory('food');\n  };\n\n  const handleSaveExpense = async () => {\n    if (!expenseModal || !expenseTitle.trim() || !expenseAmount.trim()) return;\n    setIsExpenseSaving(true);\n\n    try {\n      const amount = parseFloat(expenseAmount);\n      if (isNaN(amount) || amount < 0) {\n        return;\n      }\n\n      if (onSaveExpense) {\n        await onSaveExpense(expenseModal.dayIndex, {\n          title: expenseTitle.trim(),\n          amount,\n          category: expenseCategory,\n          currency: 'USD',\n          date: new Date().toISOString().split('T')[0]\n        });\n      }\n      closeExpenseModal();\n    } catch (error) {\n      // Error saving expense\n    } finally {\n      setIsExpenseSaving(false);\n    }\n  };\n\n  const handleMediaUpload = async (dayIndex: number, file: File) => {\n    if (!tripId) {\n      return;\n    }\n\n    setIsMediaUploading(true);\n    try {\n      const { uploadMedia, getMediaForDay } = await import('@/lib/trip-service');\n      const mediaType = file.type.startsWith('video') ? 'video' : 'image';\n\n      await uploadMedia(tripId, dayIndex + 1, file, mediaType, file.name);\n\n      const media = await getMediaForDay(tripId, dayIndex + 1);\n      setDayMedia(prev => ({ ...prev, [dayIndex]: media }));\n    } catch (error) {\n      // Error uploading media\n    } finally {\n      setIsMediaUploading(false);\n    }\n  };\n\n  const toggleDay = (dayIndex: number) => {\n    const newExpanded = new Set(expandedDays);\n    if (newExpanded.has(dayIndex)) {\n      newExpanded.delete(dayIndex);\n    } else {\n      newExpanded.add(dayIndex);\n    }\n    setExpandedDays(newExpanded);\n  };\n\n  const handleDragStart = (dayIndex: number) => {\n    setDraggedDayIndex(dayIndex);\n  };\n\n  const handleDragOver = (e: React.DragEvent, dayIndex: number) => {\n    e.preventDefault();\n    setDragOverDayIndex(dayIndex);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverDayIndex(null);\n  };\n\n  const handleDrop = async (e: React.DragEvent, dropIndex: number) => {\n    e.preventDefault();\n    setDragOverDayIndex(null);\n\n    if (draggedDayIndex === null || draggedDayIndex === dropIndex) {\n      return;\n    }\n\n    const newItinerary = [...itinerary];\n    const draggedDay = newItinerary[draggedDayIndex];\n    newItinerary.splice(draggedDayIndex, 1);\n    newItinerary.splice(dropIndex, 0, draggedDay);\n\n    const renumberedItinerary = newItinerary.map((day, index) => ({\n      ...day,\n      day: index + 1\n    }));\n\n    if (onUpdateDay) {\n      for (let i = 0; i < renumberedItinerary.length; i++) {\n        const day = renumberedItinerary[i];\n        if (day.day !== itinerary[i].day) {\n          await onUpdateDay(i, { day: day.day });\n        }\n      }\n    }\n\n    setDraggedDayIndex(null);\n  };\n\n  const getDayTitle = (day: ItineraryDay) => {\n    // Use custom title if set, otherwise generate dynamic titles\n    if (day.customTitle) {\n      return day.customTitle;\n    }\n    if (day.activities.length > 0) {\n      const mainActivity = day.activities[0];\n      return mainActivity.location || mainActivity.title;\n    }\n    return `Day ${day.day}`;\n  };\n\n  const getDayDescription = (day: ItineraryDay) => {\n    // Show day notes if they exist, otherwise show default message\n    return day.notes || 'Explore and enjoy your day!';\n  };\n\n  const getActivityTypeIcon = (type: string) => {\n    switch (type) {\n      case 'transport': return '‚úàÔ∏è';\n      case 'accommodation': return 'üè®';\n      case 'sightseeing': return 'üóæ';\n      case 'food': return 'üçú';\n      case 'shopping': return 'üõçÔ∏è';\n      case 'entertainment': return 'üé≠';\n      default: return 'üìç';\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'transport': return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'accommodation': return 'bg-purple-100 text-purple-800 border-purple-200';\n      case 'sightseeing': return 'bg-green-100 text-green-800 border-green-200';\n      case 'food': return 'bg-orange-100 text-orange-800 border-orange-200';\n      case 'shopping': return 'bg-pink-100 text-pink-800 border-pink-200';\n      case 'entertainment': return 'bg-indigo-100 text-indigo-800 border-indigo-200';\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const startEditingDay = (dayIndex: number, field: 'title' | 'notes', currentValue: string) => {\n    setEditingDay({ dayIndex, field });\n    setEditValue(currentValue);\n  };\n\n  const saveEditingDay = () => {\n    if (editingDay && onUpdateDay) {\n      if (editingDay.field === 'title') {\n        // Update the day's custom title\n        onUpdateDay(editingDay.dayIndex, { customTitle: editValue });\n      } else if (editingDay.field === 'notes') {\n        onUpdateDay(editingDay.dayIndex, { notes: editValue });\n      }\n    }\n    setEditingDay(null);\n    setEditValue('');\n  };\n\n  const cancelEditingDay = () => {\n    setEditingDay(null);\n    setEditValue('');\n  };\n\n  // Show empty state if no days exist\n  if (itinerary.length === 0) {\n    return (\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"text-center py-16\">\n          <div className=\"w-32 h-32 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-8\">\n            <div className=\"text-6xl\">üìÖ</div>\n          </div>\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Start Planning Your Journey!</h3>\n          <p className=\"text-gray-600 mb-8 max-w-md mx-auto\">\n            Create your first day to begin building your amazing itinerary. Add activities, plan your schedule, and make memories!\n          </p>\n          {onAddDay && (\n            <button\n              onClick={onAddDay}\n              className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1\"\n            >\n              ‚ú® Add Your First Day\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      {/* Timeline Container */}\n      <div className=\"relative\">\n        {/* Vertical Line */}\n        <div className=\"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-purple-400 via-blue-400 to-green-400 rounded-full shadow-sm\"></div>\n\n        {/* Timeline Items */}\n        <div className=\"space-y-8\">\n          {itinerary.map((day, dayIndex) => {\n            const isExpanded = expandedDays.has(dayIndex);\n            const isLast = dayIndex === itinerary.length - 1;\n\n            return (\n              <div key={dayIndex} className=\"relative\">\n                {/* Timeline Dot */}\n                <div className=\"absolute left-6 w-5 h-5 bg-white border-4 border-purple-500 rounded-full shadow-lg z-10 hover:scale-110 transition-transform duration-200\"></div>\n\n                {/* Day Card */}\n                <div className=\"ml-20\">\n                  <div\n                    draggable\n                    onDragStart={() => handleDragStart(dayIndex)}\n                    onDragOver={(e) => handleDragOver(e, dayIndex)}\n                    onDragLeave={handleDragLeave}\n                    onDrop={(e) => handleDrop(e, dayIndex)}\n                    className={`bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-move ${\n                      draggedDayIndex === dayIndex ? 'opacity-50' : ''\n                    } ${\n                      dragOverDayIndex === dayIndex && draggedDayIndex !== dayIndex ? 'border-purple-500 border-2 bg-purple-50' : ''\n                    }`}\n                  >\n                    {/* Day Header - Always Visible */}\n                    <div \n                      className=\"p-6 cursor-pointer hover:bg-gray-50/50 transition-colors\"\n                      onClick={() => toggleDay(dayIndex)}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg\">\n                            {day.day}\n                          </div>\n                          <div>\n                            {editingDay?.dayIndex === dayIndex && editingDay?.field === 'title' ? (\n                              <div className=\"flex items-center space-x-2\">\n                                <input\n                                  type=\"text\"\n                                  value={editValue}\n                                  onChange={(e) => setEditValue(e.target.value)}\n                                  onKeyDown={(e) => {\n                                    if (e.key === 'Enter') saveEditingDay();\n                                    if (e.key === 'Escape') cancelEditingDay();\n                                  }}\n                                  className=\"text-xl font-bold text-gray-900 bg-white border border-purple-300 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                                  autoFocus\n                                />\n                                <button\n                                  onClick={saveEditingDay}\n                                  className=\"text-green-600 hover:text-green-700 p-1\"\n                                >\n                                  ‚úì\n                                </button>\n                                <button\n                                  onClick={cancelEditingDay}\n                                  className=\"text-red-600 hover:text-red-700 p-1\"\n                                >\n                                  ‚úï\n                                </button>\n                              </div>\n                            ) : (\n                              <h3 \n                                className=\"text-xl font-bold text-gray-900 flex items-center cursor-pointer hover:text-purple-600 transition-colors group\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  const currentTitle = getDayTitle(day);\n                                  startEditingDay(dayIndex, 'title', currentTitle);\n                                }}\n                              >\n                                üìç {getDayTitle(day)}\n                                <span className=\"ml-2 opacity-0 group-hover:opacity-100 text-sm text-purple-500 transition-opacity\">‚úèÔ∏è</span>\n                              </h3>\n                            )}\n                            <p className=\"text-gray-600 text-sm\">\n                              {format(new Date(day.date), 'EEEE, MMMM d, yyyy')}\n                            </p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex items-center space-x-4\">\n                          {/* Activity Count */}\n                          <div className=\"flex items-center space-x-2\">\n                            <span className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full\">\n                              {day.activities.length} {day.activities.length === 1 ? 'Activity' : 'Activities'}\n                            </span>\n                            {day.accommodation && (\n                              <span className=\"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full\">\n                                üè® Hotel\n                              </span>\n                            )}\n                            {/* Delete Day Button */}\n                            {onDeleteDay && itinerary.length > 1 && (\n                              <button\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  if (window.confirm(`Are you sure you want to delete ${getDayTitle(day)}?`)) {\n                                    onDeleteDay(dayIndex);\n                                  }\n                                }}\n                                className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-full transition-colors\"\n                                title=\"Delete Day\"\n                              >\n                                üóëÔ∏è\n                              </button>\n                            )}\n                          </div>\n                          \n                          {/* Expand/Collapse Icon */}\n                          <svg \n                            className={`w-6 h-6 text-gray-400 transition-transform duration-200 ${isExpanded ? 'rotate-180' : ''}`}\n                            fill=\"none\" \n                            stroke=\"currentColor\" \n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                          </svg>\n                        </div>\n                      </div>\n\n                      {/* Brief Description - Always Visible */}\n                      <div className=\"mt-4\">\n                        {editingDay?.dayIndex === dayIndex && editingDay?.field === 'notes' ? (\n                          <div className=\"flex items-start space-x-2\">\n                            <textarea\n                              value={editValue}\n                              onChange={(e) => setEditValue(e.target.value)}\n                              onKeyDown={(e) => {\n                                if (e.key === 'Enter' && e.ctrlKey) saveEditingDay();\n                                if (e.key === 'Escape') cancelEditingDay();\n                              }}\n                              className=\"flex-1 px-3 py-2 text-gray-700 bg-white border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                              rows={2}\n                              autoFocus\n                            />\n                            <div className=\"flex space-x-1 pt-2\">\n                              <button\n                                onClick={saveEditingDay}\n                                className=\"text-green-600 hover:text-green-700 p-1\"\n                              >\n                                ‚úì\n                              </button>\n                              <button\n                                onClick={cancelEditingDay}\n                                className=\"text-red-600 hover:text-red-700 p-1\"\n                              >\n                                ‚úï\n                              </button>\n                            </div>\n                          </div>\n                        ) : (\n                          <p\n                            className=\"text-gray-700 leading-relaxed cursor-pointer hover:text-purple-600 transition-colors group\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              startEditingDay(dayIndex, 'notes', getDayDescription(day));\n                            }}\n                          >\n                            {getDayDescription(day)}\n                            <span className=\"ml-2 opacity-0 group-hover:opacity-100 text-sm text-purple-500 transition-opacity\">‚úèÔ∏è</span>\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Expanded Content */}\n                    {isExpanded && (\n                      <div className=\"border-t border-gray-100\">\n                        {/* Media Gallery as Hero Section */}\n                        {dayMedia[dayIndex] && dayMedia[dayIndex].length > 0 ? (\n                          <div className=\"p-6 bg-gray-900 border-b border-gray-200\">\n                            <MediaCarousel\n                              media={dayMedia[dayIndex]}\n                              dayIndex={dayIndex}\n                              currentIndex={currentMediaIndex[dayIndex] || 0}\n                              onIndexChange={(idx, mediaIdx) => {\n                                setCurrentMediaIndex(prev => ({ ...prev, [idx]: mediaIdx }));\n                              }}\n                              onDelete={async (mediaId) => {\n                                try {\n                                  const { deleteMedia } = await import('@/lib/trip-service');\n                                  await deleteMedia(mediaId);\n                                  setDayMedia(prev => ({\n                                    ...prev,\n                                    [dayIndex]: prev[dayIndex].filter(m => m.id !== mediaId)\n                                  }));\n                                  setCurrentMediaIndex(prev => ({ ...prev, [dayIndex]: 0 }));\n                                } catch (error) {\n                                  throw error;\n                                }\n                              }}\n                            />\n                          </div>\n                        ) : (\n                          <div className=\"h-64 bg-gradient-to-r from-purple-400 via-pink-400 to-orange-400 relative overflow-hidden\">\n                            <div className=\"absolute inset-0 bg-black/20\"></div>\n                            <div className=\"absolute inset-0 flex items-center justify-center\">\n                              <div className=\"text-center text-white\">\n                                <div className=\"text-6xl mb-4\">üóæ</div>\n                                <h4 className=\"text-2xl font-bold\">Day {day.day} Adventure</h4>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Day Notes Section */}\n                        {day.notes && (\n                          <div className=\"p-6 bg-blue-50 border-b border-blue-100\">\n                            <h5 className=\"font-semibold text-gray-900 mb-2 flex items-center\">\n                              üìù Day Notes\n                            </h5>\n                            <p className=\"text-gray-700 text-sm leading-relaxed whitespace-pre-wrap\">{day.notes}</p>\n                          </div>\n                        )}\n\n                        {/* Media Upload Button */}\n                        <div className=\"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-blue-100\">\n                          <label className=\"flex items-center justify-center w-full px-4 py-3 border-2 border-dashed border-blue-300 rounded-xl cursor-pointer hover:border-blue-500 hover:bg-blue-100 transition-colors\">\n                            <div className=\"flex items-center space-x-2\">\n                              <span className=\"text-2xl\">üì∏</span>\n                              <span className=\"text-sm font-medium text-gray-700\">Upload Photo or Video</span>\n                            </div>\n                            <input\n                              type=\"file\"\n                              accept=\"image/*,video/*\"\n                              multiple\n                              className=\"hidden\"\n                              onChange={(e) => {\n                                if (e.target.files) {\n                                  Array.from(e.target.files).forEach(file => {\n                                    handleMediaUpload(dayIndex, file);\n                                  });\n                                }\n                              }}\n                              disabled={isMediaUploading}\n                            />\n                          </label>\n                        </div>\n\n                        {/* Activities Section */}\n                        <div className=\"p-6 space-y-6\">\n                          {day.activities.length > 0 ? (\n                            day.activities.map((activity) => (\n                              <div key={activity.id} className=\"border border-gray-200 rounded-xl p-4 hover:border-purple-300 transition-colors\">\n                                <div className=\"flex items-start justify-between mb-3\">\n                                  <div className=\"flex items-center space-x-3\">\n                                    <div className=\"text-2xl\">{getActivityTypeIcon(activity.category)}</div>\n                                    <div>\n                                      <h5 className=\"font-semibold text-gray-900\">{activity.title}</h5>\n                                      <p className=\"text-sm text-gray-600\">{activity.time}</p>\n                                    </div>\n                                  </div>\n                                  <div className=\"flex items-center space-x-2\">\n                                    <span className={`px-3 py-1 text-xs font-medium rounded-full border ${getCategoryColor(activity.category)}`}>\n                                      {activity.category}\n                                    </span>\n                                    {activity.cost !== undefined && activity.cost !== null && (\n                                      <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">\n                                        ${activity.cost}\n                                      </span>\n                                    )}\n                                    <button\n                                      onClick={() => openActivityModal(dayIndex, activity)}\n                                      className=\"p-2 text-purple-500 hover:text-purple-700 hover:bg-purple-50 rounded-full transition-colors\"\n                                      title=\"Edit Activity\"\n                                    >\n                                      ‚úèÔ∏è\n                                    </button>\n                                    <button\n                                      onClick={() => handleDeleteActivity(dayIndex, activity.id)}\n                                      className=\"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-full transition-colors\"\n                                      title=\"Delete Activity\"\n                                    >\n                                      üóëÔ∏è\n                                    </button>\n                                  </div>\n                                </div>\n                                \n                                {activity.description && (\n                                  <p className=\"text-gray-700 text-sm leading-relaxed mb-3\">{activity.description}</p>\n                                )}\n                                \n                                {activity.location && (\n                                  <div className=\"flex items-center text-sm text-gray-600\">\n                                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                    </svg>\n                                    {activity.location}\n                                  </div>\n                                )}\n                              </div>\n                            ))\n                          ) : (\n                            <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-xl\">\n                              <div className=\"text-4xl mb-4\">üìù</div>\n                              <h5 className=\"font-medium text-gray-900 mb-2\">No activities planned</h5>\n                              <p className=\"text-gray-600 text-sm mb-4\">Add activities to make the most of this day</p>\n                                  <button\n                                onClick={() => openActivityModal(dayIndex)}\n                                className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-xl font-medium hover:from-purple-700 hover:to-blue-700 transition-all duration-200\"\n                              >\n                                + Add Activity\n                              </button>\n                            </div>\n                          )}\n\n                          {/* Accommodation Section */}\n                          {day.accommodation && (\n                            <div className=\"bg-purple-50 border border-purple-200 rounded-xl p-4\">\n                              <h5 className=\"font-semibold text-gray-900 mb-2 flex items-center\">\n                                üè® Accommodation\n                              </h5>\n                              <div className=\"space-y-2\">\n                                <p className=\"font-medium text-gray-900\">{day.accommodation.name}</p>\n                                <p className=\"text-sm text-gray-600\">{day.accommodation.address}</p>\n                                <div className=\"flex items-center space-x-4 text-sm\">\n                                  <span className=\"text-gray-600\">\n                                    Check-in: {format(new Date(day.accommodation.checkIn), 'MMM d')}\n                                  </span>\n                                  <span className=\"text-gray-600\">\n                                    Check-out: {format(new Date(day.accommodation.checkOut), 'MMM d')}\n                                  </span>\n                                  <span className=\"text-green-600 font-medium\">\n                                    ${day.accommodation.cost}\n                                  </span>\n                                </div>\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Day Stats */}\n                          <div className=\"grid grid-cols-3 gap-4 pt-4 border-t border-gray-100\">\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold text-purple-600\">\n                                ${day.actualSpent || 0}\n                              </div>\n                              <div className=\"text-xs text-gray-600\">Spent</div>\n                            </div>\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold text-blue-600\">\n                                {day.activities.reduce((sum, activity) => sum + (activity.duration || 0), 0)}m\n                              </div>\n                              <div className=\"text-xs text-gray-600\">Duration</div>\n                            </div>\n                            <div className=\"text-center\">\n                              <div className=\"text-lg font-bold text-green-600\">\n                                {day.activities.filter(activity => activity.completed).length}/{day.activities.length}\n                              </div>\n                              <div className=\"text-xs text-gray-600\">Complete</div>\n                            </div>\n                          </div>\n\n                          {/* Quick Actions */}\n                          <div className=\"flex space-x-3 pt-4\">\n                            <button\n                              onClick={() => openActivityModal(dayIndex)}\n                              className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-xl font-medium hover:from-purple-700 hover:to-blue-700 transition-all duration-200\"\n                            >\n                              + Add Activity\n                            </button>\n                            <button\n                              onClick={() => openNotesModal(dayIndex)}\n                              className=\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-xl font-medium hover:bg-gray-200 transition-colors\"\n                            >\n                              üìù Add Notes\n                            </button>\n                            <button\n                              onClick={() => openExpenseModal(dayIndex)}\n                              className=\"flex-1 bg-green-100 text-green-700 py-2 px-4 rounded-xl font-medium hover:bg-green-200 transition-colors\"\n                            >\n                              üí∞ Add Expense\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Add Another Day Button */}\n        {onAddDay && (\n          <div className=\"relative ml-20 mt-8\">\n            <div className=\"absolute left-[-52px] w-5 h-5 bg-purple-500 border-4 border-white rounded-full shadow-lg\"></div>\n            <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-300\">\n              <div className=\"text-center\">\n                <div className=\"text-4xl mb-4\">‚ûï</div>\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Add Another Day</h3>\n                <p className=\"text-gray-600 mb-4\">Continue your adventure with more activities!</p>\n                <button\n                  onClick={onAddDay}\n                  className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n                >\n                  + Add Day {itinerary.length + 1}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* End of Timeline */}\n        <div className=\"relative ml-20 mt-8\">\n          <div className=\"absolute left-[-52px] w-5 h-5 bg-green-500 border-4 border-white rounded-full shadow-lg\"></div>\n          <div className=\"bg-gradient-to-r from-green-500 to-emerald-500 text-white p-6 rounded-2xl shadow-lg\">\n            <div className=\"text-center\">\n              <div className=\"text-4xl mb-4\">üéâ</div>\n              <h3 className=\"text-xl font-bold mb-2\">Journey Complete!</h3>\n              <p className=\"text-green-100\">What an amazing adventure you've had!</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Add Activity Modal */}\n      {activityModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                {activityModal.activity ? 'Edit Activity' : 'Add Activity'} ¬∑ Day {activityModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeActivityModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Title *</label>\n                <input\n                  type=\"text\"\n                  value={activityTitle}\n                  onChange={(e) => setActivityTitle(e.target.value)}\n                  placeholder=\"e.g., Morning Hike\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Time & Location</label>\n                <input\n                  type=\"text\"\n                  value={activityTime}\n                  onChange={(e) => setActivityTime(e.target.value)}\n                  placeholder=\"e.g., 9:00 AM ¬∑ Zion National Park\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Type of Day</label>\n                  <select\n                    value={activityType}\n                    onChange={(e) => setActivityType(e.target.value as Activity['type'])}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"morning\">Morning</option>\n                    <option value=\"afternoon\">Afternoon</option>\n                    <option value=\"evening\">Evening</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Category</label>\n                  <select\n                    value={activityCategory}\n                    onChange={(e) => setActivityCategory(e.target.value as Activity['category'])}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"sightseeing\">Sightseeing</option>\n                    <option value=\"food\">Food</option>\n                    <option value=\"transport\">Transport</option>\n                    <option value=\"accommodation\">Accommodation</option>\n                    <option value=\"shopping\">Shopping</option>\n                    <option value=\"entertainment\">Entertainment</option>\n                    <option value=\"other\">Other</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location</label>\n                <input\n                  type=\"text\"\n                  value={activityLocation}\n                  onChange={(e) => setActivityLocation(e.target.value)}\n                  placeholder=\"Optional location details\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                <textarea\n                  value={activityDescription}\n                  onChange={(e) => setActivityDescription(e.target.value)}\n                  rows={3}\n                  placeholder=\"Share details to remember\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estimated Cost</label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  value={activityCost}\n                  onChange={(e) => setActivityCost(e.target.value)}\n                  placeholder=\"Optional cost\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                />\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeActivityModal}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSubmitActivity}\n                  className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={activityTitle.trim() === '' || isActivitySaving}\n                >\n                  {isActivitySaving ? 'Saving...' : 'Save Activity'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Notes Modal */}\n      {notesModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                üìù Day Notes ¬∑ Day {notesModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeNotesModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Notes</label>\n                <textarea\n                  value={notesValue}\n                  onChange={(e) => setNotesValue(e.target.value)}\n                  rows={5}\n                  placeholder=\"Add notes about this day...\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeNotesModal}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveNotes}\n                  className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={isNotesSaving}\n                >\n                  {isNotesSaving ? 'Saving...' : 'Save Notes'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Expense Modal */}\n      {expenseModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-2xl max-w-lg w-full p-6 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                üí∞ Add Expense ¬∑ Day {expenseModal.dayIndex + 1}\n              </h2>\n              <button\n                onClick={closeExpenseModal}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description *</label>\n                <input\n                  type=\"text\"\n                  value={expenseTitle}\n                  onChange={(e) => setExpenseTitle(e.target.value)}\n                  placeholder=\"e.g., Lunch at restaurant\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  autoFocus\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Amount *</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={expenseAmount}\n                    onChange={(e) => setExpenseAmount(e.target.value)}\n                    placeholder=\"0.00\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Category</label>\n                  <select\n                    value={expenseCategory}\n                    onChange={(e) => setExpenseCategory(e.target.value as any)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all bg-white/80\"\n                  >\n                    <option value=\"food\">üçΩÔ∏è Food</option>\n                    <option value=\"transport\">üöó Transport</option>\n                    <option value=\"accommodation\">üè® Accommodation</option>\n                    <option value=\"shopping\">üõçÔ∏è Shopping</option>\n                    <option value=\"activities\">üé≠ Activities</option>\n                    <option value=\"other\">üìå Other</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={closeExpenseModal}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveExpense}\n                  className=\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={!expenseTitle.trim() || !expenseAmount.trim() || isExpenseSaving}\n                >\n                  {isExpenseSaving ? 'Saving...' : 'Add Expense'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\n\ninterface MediaCarouselProps {\n  media: any[];\n  dayIndex: number;\n  currentIndex: number;\n  onIndexChange: (dayIndex: number, index: number) => void;\n  onDelete?: (mediaId: string) => Promise<void>;\n}\n\nexport default function MediaCarousel({\n  media,\n  dayIndex,\n  currentIndex,\n  onIndexChange,\n  onDelete,\n}: MediaCarouselProps) {\n  const [touchStart, setTouchStart] = useState(0);\n  const [touchEnd, setTouchEnd] = useState(0);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  if (!media || media.length === 0) {\n    return null;\n  }\n\n  const currentMedia = media[currentIndex || 0];\n  const totalMedia = media.length;\n\n  const handlePrevious = () => {\n    const newIndex = currentIndex > 0 ? currentIndex - 1 : totalMedia - 1;\n    onIndexChange(dayIndex, newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = currentIndex < totalMedia - 1 ? currentIndex + 1 : 0;\n    onIndexChange(dayIndex, newIndex);\n  };\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    setTouchStart(e.targetTouches[0].clientX);\n  };\n\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    setTouchEnd(e.changedTouches[0].clientX);\n    handleSwipe();\n  };\n\n  const handleSwipe = () => {\n    if (touchStart - touchEnd > 50) {\n      handleNext();\n    }\n    if (touchEnd - touchStart > 50) {\n      handlePrevious();\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!onDelete || !currentMedia) return;\n    \n    if (confirm('Delete this photo/video?')) {\n      setIsDeleting(true);\n      try {\n        await onDelete(currentMedia.id);\n      } catch (error) {\n        console.error('Error deleting media:', error);\n        alert('Failed to delete media');\n      } finally {\n        setIsDeleting(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative w-full bg-gray-900 rounded-lg overflow-hidden\">\n      {/* Main Image/Video */}\n      <div\n        className=\"relative w-full aspect-video bg-black\"\n        onTouchStart={handleTouchStart}\n        onTouchEnd={handleTouchEnd}\n      >\n        {currentMedia.type === 'image' ? (\n          <img\n            src={currentMedia.url}\n            alt={currentMedia.title}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <video\n            src={currentMedia.url}\n            className=\"w-full h-full object-cover\"\n            controls\n          />\n        )}\n\n        {/* Left Arrow */}\n        <button\n          onClick={handlePrevious}\n          className=\"absolute left-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full transition-all z-10\"\n        >\n          ‚Äπ\n        </button>\n\n        {/* Right Arrow */}\n        <button\n          onClick={handleNext}\n          className=\"absolute right-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 text-white p-3 rounded-full transition-all z-10\"\n        >\n          ‚Ä∫\n        </button>\n\n        {/* Counter */}\n        <div className=\"absolute top-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm font-medium\">\n          {currentIndex + 1} / {totalMedia}\n        </div>\n\n        {/* Delete Button */}\n        {onDelete && (\n          <button\n            onClick={handleDelete}\n            disabled={isDeleting}\n            className=\"absolute top-4 left-4 bg-red-500/80 hover:bg-red-600 text-white p-2 rounded-full transition-all z-10 disabled:opacity-50\"\n            title=\"Delete this photo/video\"\n          >\n            üóëÔ∏è\n          </button>\n        )}\n      </div>\n\n      {/* Thumbnail Strip */}\n      {totalMedia > 1 && (\n        <div className=\"flex gap-2 p-3 bg-gray-800 overflow-x-auto\">\n          {media.map((item, index) => (\n            <button\n              key={item.id}\n              onClick={() => onIndexChange(dayIndex, index)}\n              className={`flex-shrink-0 w-12 h-12 rounded-md overflow-hidden transition-all ${\n                index === currentIndex\n                  ? 'ring-2 ring-white opacity-100'\n                  : 'opacity-60 hover:opacity-80'\n              }`}\n            >\n              {item.type === 'image' ? (\n                <img\n                  src={item.url}\n                  alt={item.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-gray-700 flex items-center justify-center\">\n                  <span className=\"text-white text-xl\">‚ñ∂</span>\n                </div>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { PackingItem } from '@/types/itinerary';\n\ninterface PackingListProps {\n  packingList: PackingItem[];\n  onUpdatePackingList: (packingList: PackingItem[]) => void;\n}\n\nexport default function PackingList({ packingList, onUpdatePackingList }: PackingListProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newItem, setNewItem] = useState({\n    name: '',\n    category: 'other' as PackingItem['category'],\n    quantity: 1,\n    essential: false,\n    notes: ''\n  });\n  const [filter, setFilter] = useState<'all' | 'packed' | 'unpacked' | 'essential'>('all');\n\n  const categories = [\n    { id: 'clothing', name: 'Clothing', icon: 'üëï', color: 'bg-blue-100 text-blue-800' },\n    { id: 'electronics', name: 'Electronics', icon: 'üì±', color: 'bg-purple-100 text-purple-800' },\n    { id: 'toiletries', name: 'Toiletries', icon: 'üß¥', color: 'bg-green-100 text-green-800' },\n    { id: 'documents', name: 'Documents', icon: 'üìÑ', color: 'bg-yellow-100 text-yellow-800' },\n    { id: 'medications', name: 'Medications', icon: 'üíä', color: 'bg-red-100 text-red-800' },\n    { id: 'accessories', name: 'Accessories', icon: 'üëú', color: 'bg-pink-100 text-pink-800' },\n    { id: 'other', name: 'Other', icon: 'üì¶', color: 'bg-gray-100 text-gray-800' },\n  ];\n\n  const getCategoryInfo = (categoryId: string) => \n    categories.find(cat => cat.id === categoryId) || categories[categories.length - 1];\n\n  const togglePacked = (itemId: string) => {\n    const updatedList = packingList.map(item =>\n      item.id === itemId ? { ...item, packed: !item.packed } : item\n    );\n    onUpdatePackingList(updatedList);\n  };\n\n  const addItem = () => {\n    if (!newItem.name.trim()) return;\n    \n    const item: PackingItem = {\n      id: Date.now().toString(),\n      ...newItem,\n      name: newItem.name.trim(),\n      packed: false\n    };\n    \n    onUpdatePackingList([...packingList, item]);\n    setNewItem({ name: '', category: 'other', quantity: 1, essential: false, notes: '' });\n    setShowAddForm(false);\n  };\n\n  const removeItem = (itemId: string) => {\n    onUpdatePackingList(packingList.filter(item => item.id !== itemId));\n  };\n\n  const filteredItems = packingList.filter(item => {\n    switch (filter) {\n      case 'packed': return item.packed;\n      case 'unpacked': return !item.packed;\n      case 'essential': return item.essential;\n      default: return true;\n    }\n  });\n\n  const groupedItems = categories.reduce((acc, category) => {\n    acc[category.id] = filteredItems.filter(item => item.category === category.id);\n    return acc;\n  }, {} as Record<string, PackingItem[]>);\n\n  const packedCount = packingList.filter(item => item.packed).length;\n  const totalCount = packingList.length;\n  const essentialCount = packingList.filter(item => item.essential && !item.packed).length;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header Stats */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Packing List</h2>\n            <p className=\"text-gray-600\">Keep track of everything you need</p>\n          </div>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            + Add Item\n          </button>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-6\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-sm font-medium text-gray-700\">\n              Progress: {packedCount}/{totalCount} items packed\n            </span>\n            <span className=\"text-sm font-medium text-purple-600\">\n              {totalCount > 0 ? Math.round((packedCount / totalCount) * 100) : 0}%\n            </span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n            <div \n              className=\"bg-gradient-to-r from-purple-500 to-blue-500 h-3 rounded-full transition-all duration-500\"\n              style={{ width: `${totalCount > 0 ? (packedCount / totalCount) * 100 : 0}%` }}\n            ></div>\n          </div>\n          {essentialCount > 0 && (\n            <p className=\"text-sm text-red-600 mt-2\">\n              ‚ö†Ô∏è {essentialCount} essential item{essentialCount > 1 ? 's' : ''} still need{essentialCount === 1 ? 's' : ''} to be packed\n            </p>\n          )}\n        </div>\n\n        {/* Filter Buttons */}\n        <div className=\"flex flex-wrap gap-2\">\n          {[\n            { id: 'all', name: 'All Items', count: packingList.length },\n            { id: 'unpacked', name: 'To Pack', count: packingList.length - packedCount },\n            { id: 'packed', name: 'Packed', count: packedCount },\n            { id: 'essential', name: 'Essential', count: packingList.filter(item => item.essential).length },\n          ].map(filterOption => (\n            <button\n              key={filterOption.id}\n              onClick={() => setFilter(filterOption.id as any)}\n              className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n                filter === filterOption.id\n                  ? 'bg-purple-600 text-white shadow-lg'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {filterOption.name} ({filterOption.count})\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Add Item Modal */}\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-md w-full p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add Packing Item</h3>\n              <button\n                onClick={() => setShowAddForm(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <input\n                type=\"text\"\n                value={newItem.name}\n                onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}\n                placeholder=\"Item name\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              />\n\n              <select\n                value={newItem.category}\n                onChange={(e) => setNewItem({ ...newItem, category: e.target.value as PackingItem['category'] })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              >\n                {categories.map(category => (\n                  <option key={category.id} value={category.id}>\n                    {category.icon} {category.name}\n                  </option>\n                ))}\n              </select>\n\n              <input\n                type=\"number\"\n                value={newItem.quantity}\n                onChange={(e) => setNewItem({ ...newItem, quantity: Math.max(1, parseInt(e.target.value) || 1) })}\n                placeholder=\"Quantity\"\n                min=\"1\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              />\n\n              <textarea\n                value={newItem.notes}\n                onChange={(e) => setNewItem({ ...newItem, notes: e.target.value })}\n                placeholder=\"Notes (optional)\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none\"\n              />\n\n              <label className=\"flex items-center space-x-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={newItem.essential}\n                  onChange={(e) => setNewItem({ ...newItem, essential: e.target.checked })}\n                  className=\"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500\"\n                />\n                <span className=\"text-sm font-medium text-gray-700\">Mark as essential</span>\n              </label>\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={addItem}\n                  className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200\"\n                >\n                  Add Item\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Packing Items by Category */}\n      <div className=\"space-y-6\">\n        {categories.map(category => {\n          const items = groupedItems[category.id];\n          if (items.length === 0) return null;\n\n          return (\n            <div key={category.id} className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-2xl\">{category.icon}</span>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{category.name}</h3>\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${category.color}`}>\n                    {items.filter(item => item.packed).length}/{items.length}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                {items.map(item => (\n                  <div\n                    key={item.id}\n                    className={`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 ${\n                      item.packed\n                        ? 'bg-green-50 border-green-200 opacity-75'\n                        : item.essential\n                        ? 'bg-red-50 border-red-200'\n                        : 'bg-gray-50 border-gray-200 hover:border-purple-300'\n                    }`}\n                  >\n                    <div className=\"flex items-center space-x-4\">\n                      <button\n                        onClick={() => togglePacked(item.id)}\n                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${\n                          item.packed\n                            ? 'bg-green-500 border-green-500 text-white'\n                            : 'border-gray-300 hover:border-purple-500'\n                        }`}\n                      >\n                        {item.packed && (\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                          </svg>\n                        )}\n                      </button>\n\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className={`font-medium ${item.packed ? 'line-through text-gray-500' : 'text-gray-900'}`}>\n                            {item.name}\n                          </span>\n                          {item.essential && (\n                            <span className=\"px-2 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full\">\n                              Essential\n                            </span>\n                          )}\n                          {item.quantity > 1 && (\n                            <span className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full\">\n                              x{item.quantity}\n                            </span>\n                          )}\n                        </div>\n                        {item.notes && (\n                          <p className=\"text-sm text-gray-500 mt-1\">{item.notes}</p>\n                        )}\n                      </div>\n                    </div>\n\n                    <button\n                      onClick={() => removeItem(item.id)}\n                      className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {filteredItems.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <span className=\"text-4xl\">üß≥</span>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No items found</h3>\n          <p className=\"text-gray-600 mb-6\">\n            {filter === 'all' ? 'Start by adding items to your packing list' : `No ${filter} items to show`}\n          </p>\n          {filter === 'all' && (\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200\"\n            >\n              Add Your First Item\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { Expense } from '@/types/itinerary';\nimport { format } from 'date-fns';\n\ninterface ExpenseTrackerProps {\n  expenses: Expense[];\n  budget: number;\n  currency: string;\n  onUpdateExpenses: (expenses: Expense[]) => void;\n}\n\nexport default function ExpenseTracker({ expenses, budget, currency, onUpdateExpenses }: ExpenseTrackerProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newExpense, setNewExpense] = useState({\n    title: '',\n    amount: 0,\n    category: 'other' as Expense['category'],\n    date: new Date().toISOString().split('T')[0],\n    description: '',\n  });\n  const [filter, setFilter] = useState<'all' | Expense['category']>('all');\n\n  const categories = [\n    { id: 'accommodation', name: 'Accommodation', icon: 'üè®', color: 'bg-blue-100 text-blue-800' },\n    { id: 'food', name: 'Food & Drinks', icon: 'üçΩÔ∏è', color: 'bg-green-100 text-green-800' },\n    { id: 'transport', name: 'Transport', icon: 'üöó', color: 'bg-yellow-100 text-yellow-800' },\n    { id: 'activities', name: 'Activities', icon: 'üéØ', color: 'bg-purple-100 text-purple-800' },\n    { id: 'shopping', name: 'Shopping', icon: 'üõçÔ∏è', color: 'bg-pink-100 text-pink-800' },\n    { id: 'other', name: 'Other', icon: 'üì¶', color: 'bg-gray-100 text-gray-800' },\n  ];\n\n  const getCategoryInfo = (categoryId: string) => \n    categories.find(cat => cat.id === categoryId) || categories[categories.length - 1];\n\n  const addExpense = () => {\n    if (!newExpense.title.trim() || newExpense.amount <= 0) return;\n    \n    const expense: Expense = {\n      id: Date.now().toString(),\n      ...newExpense,\n      currency,\n      title: newExpense.title.trim()\n    };\n    \n    onUpdateExpenses([...expenses, expense]);\n    setNewExpense({\n      title: '',\n      amount: 0,\n      category: 'other',\n      date: new Date().toISOString().split('T')[0],\n      description: '',\n    });\n    setShowAddForm(false);\n  };\n\n  const removeExpense = async (expenseId: string) => {\n    // Remove from local state first\n    const updatedExpenses = expenses.filter(expense => expense.id !== expenseId);\n    onUpdateExpenses(updatedExpenses);\n    \n    // Delete from database\n    try {\n      const { deleteExpense } = await import('@/lib/trip-service');\n      await deleteExpense(expenseId);\n      console.log('Expense deleted successfully');\n    } catch (error) {\n      console.error('Error deleting expense:', error);\n    }\n  };\n\n  const filteredExpenses = expenses.filter(expense => \n    filter === 'all' || expense.category === filter\n  );\n\n  const totalSpent = expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  const remaining = budget - totalSpent;\n  const spentPercentage = budget > 0 ? (totalSpent / budget) * 100 : 0;\n\n  const expensesByCategory = categories.map(category => ({\n    ...category,\n    total: expenses\n      .filter(expense => expense.category === category.id)\n      .reduce((sum, expense) => sum + expense.amount, 0),\n    count: expenses.filter(expense => expense.category === category.id).length\n  })).filter(category => category.count > 0);\n\n  const getBudgetStatus = () => {\n    if (spentPercentage > 100) return { color: 'text-red-600', bg: 'bg-red-500', status: 'Over Budget!' };\n    if (spentPercentage > 80) return { color: 'text-yellow-600', bg: 'bg-yellow-500', status: 'Close to Limit' };\n    return { color: 'text-green-600', bg: 'bg-green-500', status: 'On Track' };\n  };\n\n  const budgetStatus = getBudgetStatus();\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Budget Overview */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Expense Tracker</h2>\n            <p className=\"text-gray-600\">Monitor your spending and stay on budget</p>\n          </div>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            + Add Expense\n          </button>\n        </div>\n\n        {/* Budget Progress */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-gray-900 mb-1\">\n              {budget.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm text-gray-600\">Total Budget</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-red-600 mb-1\">\n              {totalSpent.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm text-gray-600\">Total Spent</div>\n          </div>\n          <div className=\"text-center\">\n            <div className={`text-3xl font-bold mb-1 ${remaining >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n              {remaining.toLocaleString()} {currency}\n            </div>\n            <div className=\"text-sm text-gray-600\">Remaining</div>\n          </div>\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between items-center mb-2\">\n            <span className=\"text-sm font-medium text-gray-700\">Budget Usage</span>\n            <span className={`text-sm font-medium ${budgetStatus.color}`}>\n              {Math.round(spentPercentage)}% ‚Ä¢ {budgetStatus.status}\n            </span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n            <div \n              className={`h-3 rounded-full transition-all duration-500 ${budgetStatus.bg}`}\n              style={{ width: `${Math.min(spentPercentage, 100)}%` }}\n            ></div>\n          </div>\n        </div>\n\n        {/* Category Breakdown */}\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n          {expensesByCategory.map(category => (\n            <div key={category.id} className=\"text-center p-3 bg-gray-50 rounded-xl\">\n              <div className=\"text-2xl mb-1\">{category.icon}</div>\n              <div className=\"text-sm font-medium text-gray-900\">\n                {category.total.toLocaleString()} {currency}\n              </div>\n              <div className=\"text-xs text-gray-600\">{category.name}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Add Expense Modal */}\n      {showAddForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-md w-full p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add Expense</h3>\n              <button\n                onClick={() => setShowAddForm(false)}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <input\n                type=\"text\"\n                value={newExpense.title}\n                onChange={(e) => setNewExpense({ ...newExpense, title: e.target.value })}\n                placeholder=\"Expense title\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              />\n\n              <div className=\"flex space-x-3\">\n                <input\n                  type=\"number\"\n                  value={newExpense.amount || ''}\n                  onChange={(e) => setNewExpense({ ...newExpense, amount: parseFloat(e.target.value) || 0 })}\n                  placeholder=\"Amount\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                />\n                <div className=\"px-4 py-3 bg-gray-100 rounded-xl text-gray-700 font-medium\">\n                  {currency}\n                </div>\n              </div>\n\n              <select\n                value={newExpense.category}\n                onChange={(e) => setNewExpense({ ...newExpense, category: e.target.value as Expense['category'] })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              >\n                {categories.map(category => (\n                  <option key={category.id} value={category.id}>\n                    {category.icon} {category.name}\n                  </option>\n                ))}\n              </select>\n\n              <input\n                type=\"date\"\n                value={newExpense.date}\n                onChange={(e) => setNewExpense({ ...newExpense, date: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              />\n\n              <textarea\n                value={newExpense.description}\n                onChange={(e) => setNewExpense({ ...newExpense, description: e.target.value })}\n                placeholder=\"Description (optional)\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none\"\n              />\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={addExpense}\n                  className=\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200\"\n                >\n                  Add Expense\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Filter Buttons */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/20\">\n        <div className=\"flex flex-wrap gap-2\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n              filter === 'all'\n                ? 'bg-green-600 text-white shadow-lg'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            All Expenses ({expenses.length})\n          </button>\n          {categories.map(category => {\n            const count = expenses.filter(expense => expense.category === category.id).length;\n            if (count === 0) return null;\n            \n            return (\n              <button\n                key={category.id}\n                onClick={() => setFilter(category.id as Expense['category'])}\n                className={`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${\n                  filter === category.id\n                    ? 'bg-green-600 text-white shadow-lg'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {category.icon} {category.name} ({count})\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Expenses List */}\n      <div className=\"space-y-4\">\n        {filteredExpenses.length > 0 ? (\n          filteredExpenses\n            .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n            .map(expense => {\n              const categoryInfo = getCategoryInfo(expense.category);\n              return (\n                <div\n                  key={expense.id}\n                  className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-200\"\n                >\n                  <div className=\"flex justify-between items-start\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className=\"text-3xl\">{categoryInfo.icon}</div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"text-lg font-semibold text-gray-900\">{expense.title}</h3>\n                        <div className=\"flex items-center space-x-4 mt-1\">\n                          <span className={`px-3 py-1 rounded-full text-xs font-medium ${categoryInfo.color}`}>\n                            {categoryInfo.name}\n                          </span>\n                          <span className=\"text-sm text-gray-600\">\n                            {format(new Date(expense.date), 'MMM d, yyyy')}\n                          </span>\n                        </div>\n                        {expense.description && (\n                          <p className=\"text-sm text-gray-600 mt-2\">{expense.description}</p>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"text-right\">\n                        <div className=\"text-2xl font-bold text-gray-900\">\n                          {expense.amount.toLocaleString()} {expense.currency}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => removeExpense(expense.id)}\n                        className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                      >\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-4xl\">üí∞</span>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No expenses found</h3>\n            <p className=\"text-gray-600 mb-6\">\n              {filter === 'all' ? 'Start tracking your trip expenses' : `No ${getCategoryInfo(filter).name.toLowerCase()} expenses to show`}\n            </p>\n            {filter === 'all' && (\n              <button\n                onClick={() => setShowAddForm(true)}\n                className=\"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200\"\n              >\n                Add Your First Expense\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { ItineraryDay, Accommodation } from '@/types/itinerary';\nimport { format, differenceInDays } from 'date-fns';\n\ninterface AccommodationManagerProps {\n  itinerary: ItineraryDay[];\n  onUpdateItinerary: (itinerary: ItineraryDay[]) => void;\n}\n\nexport default function AccommodationManager({ itinerary, onUpdateItinerary }: AccommodationManagerProps) {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingAccommodation, setEditingAccommodation] = useState<{ dayIndex: number; accommodation: Accommodation } | null>(null);\n  const [newAccommodation, setNewAccommodation] = useState({\n    name: '',\n    type: 'hotel' as Accommodation['type'],\n    address: '',\n    checkIn: '',\n    checkOut: '',\n    cost: 0,\n    currency: 'USD',\n    rating: 5,\n    amenities: [] as string[],\n    notes: '',\n    bookingReference: '',\n    contactInfo: ''\n  });\n\n  const accommodationTypes = [\n    { id: 'hotel', name: 'Hotel', icon: 'üè®' },\n    { id: 'airbnb', name: 'Airbnb', icon: 'üè†' },\n    { id: 'hostel', name: 'Hostel', icon: 'üè¢' },\n    { id: 'resort', name: 'Resort', icon: 'üèñÔ∏è' },\n    { id: 'apartment', name: 'Apartment', icon: 'üè†' },\n    { id: 'other', name: 'Other', icon: 'üèòÔ∏è' },\n  ];\n\n  const commonAmenities = [\n    'WiFi', 'Parking', 'Pool', 'Gym', 'Spa', 'Restaurant', 'Room Service',\n    'Air Conditioning', 'Kitchen', 'Laundry', 'Pet Friendly', 'Business Center',\n    'Airport Shuttle', 'Breakfast Included', 'Beach Access', 'Balcony'\n  ];\n\n  const getTypeInfo = (type: string) => \n    accommodationTypes.find(t => t.id === type) || accommodationTypes[0];\n\n  const addAccommodation = () => {\n    if (!newAccommodation.name.trim() || !newAccommodation.checkIn || !newAccommodation.checkOut) return;\n    \n    const accommodation: Accommodation = {\n      id: Date.now().toString(),\n      ...newAccommodation,\n      name: newAccommodation.name.trim(),\n      photos: []\n    };\n\n    // Find the day that matches the check-in date\n    const checkInDate = new Date(newAccommodation.checkIn).toISOString().split('T')[0];\n    const dayIndex = itinerary.findIndex(day => day.date === checkInDate);\n    \n    if (dayIndex !== -1) {\n      const updatedItinerary = [...itinerary];\n      updatedItinerary[dayIndex] = {\n        ...updatedItinerary[dayIndex],\n        accommodation\n      };\n      onUpdateItinerary(updatedItinerary);\n    }\n    \n    resetForm();\n  };\n\n  const updateAccommodation = () => {\n    if (!editingAccommodation) return;\n    \n    const updatedItinerary = [...itinerary];\n    updatedItinerary[editingAccommodation.dayIndex] = {\n      ...updatedItinerary[editingAccommodation.dayIndex],\n      accommodation: editingAccommodation.accommodation\n    };\n    onUpdateItinerary(updatedItinerary);\n    setEditingAccommodation(null);\n  };\n\n  const removeAccommodation = (dayIndex: number) => {\n    const updatedItinerary = [...itinerary];\n    delete updatedItinerary[dayIndex].accommodation;\n    onUpdateItinerary(updatedItinerary);\n  };\n\n  const resetForm = () => {\n    setNewAccommodation({\n      name: '',\n      type: 'hotel',\n      address: '',\n      checkIn: '',\n      checkOut: '',\n      cost: 0,\n      currency: 'USD',\n      rating: 5,\n      amenities: [],\n      notes: '',\n      bookingReference: '',\n      contactInfo: ''\n    });\n    setShowAddForm(false);\n  };\n\n  const toggleAmenity = (amenity: string, isEditing = false) => {\n    if (isEditing && editingAccommodation) {\n      const amenities = editingAccommodation.accommodation.amenities.includes(amenity)\n        ? editingAccommodation.accommodation.amenities.filter(a => a !== amenity)\n        : [...editingAccommodation.accommodation.amenities, amenity];\n      \n      setEditingAccommodation({\n        ...editingAccommodation,\n        accommodation: { ...editingAccommodation.accommodation, amenities }\n      });\n    } else {\n      const amenities = newAccommodation.amenities.includes(amenity)\n        ? newAccommodation.amenities.filter(a => a !== amenity)\n        : [...newAccommodation.amenities, amenity];\n      \n      setNewAccommodation({ ...newAccommodation, amenities });\n    }\n  };\n\n  const accommodationsWithDays = itinerary\n    .map((day, index) => ({ ...day, dayIndex: index }))\n    .filter(day => day.accommodation);\n\n  const totalAccommodationCost = accommodationsWithDays.reduce((sum, day) => \n    sum + (day.accommodation?.cost || 0), 0\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Accommodation</h2>\n            <p className=\"text-gray-600\">Manage your hotels and places to stay</p>\n          </div>\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n          >\n            + Add Accommodation\n          </button>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"text-center p-4 bg-blue-50 rounded-xl\">\n            <div className=\"text-2xl font-bold text-blue-600 mb-1\">\n              {accommodationsWithDays.length}\n            </div>\n            <div className=\"text-sm text-gray-600\">Bookings</div>\n          </div>\n          <div className=\"text-center p-4 bg-green-50 rounded-xl\">\n            <div className=\"text-2xl font-bold text-green-600 mb-1\">\n              {totalAccommodationCost.toLocaleString()} USD\n            </div>\n            <div className=\"text-sm text-gray-600\">Total Cost</div>\n          </div>\n          <div className=\"text-center p-4 bg-purple-50 rounded-xl\">\n            <div className=\"text-2xl font-bold text-purple-600 mb-1\">\n              {accommodationsWithDays.reduce((sum, day) => {\n                const accommodation = day.accommodation!;\n                return sum + differenceInDays(new Date(accommodation.checkOut), new Date(accommodation.checkIn));\n              }, 0)}\n            </div>\n            <div className=\"text-sm text-gray-600\">Total Nights</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Add/Edit Accommodation Modal */}\n      {(showAddForm || editingAccommodation) && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 border border-white/20\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">\n                {editingAccommodation ? 'Edit Accommodation' : 'Add Accommodation'}\n              </h3>\n              <button\n                onClick={() => {\n                  setShowAddForm(false);\n                  setEditingAccommodation(null);\n                }}\n                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              >\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Basic Info */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input\n                  type=\"text\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.name : newAccommodation.name}\n                  onChange={(e) => editingAccommodation \n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, name: e.target.value }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, name: e.target.value })\n                  }\n                  placeholder=\"Accommodation name\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n\n                <select\n                  value={editingAccommodation ? editingAccommodation.accommodation.type : newAccommodation.type}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, type: e.target.value as Accommodation['type'] }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, type: e.target.value as Accommodation['type'] })\n                  }\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  {accommodationTypes.map(type => (\n                    <option key={type.id} value={type.id}>\n                      {type.icon} {type.name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <textarea\n                value={editingAccommodation ? editingAccommodation.accommodation.address : newAccommodation.address}\n                onChange={(e) => editingAccommodation\n                  ? setEditingAccommodation({\n                      ...editingAccommodation,\n                      accommodation: { ...editingAccommodation.accommodation, address: e.target.value }\n                    })\n                  : setNewAccommodation({ ...newAccommodation, address: e.target.value })\n                }\n                placeholder=\"Address\"\n                rows={2}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n              />\n\n              {/* Dates and Cost */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <input\n                  type=\"date\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.checkIn : newAccommodation.checkIn}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, checkIn: e.target.value }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, checkIn: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n\n                <input\n                  type=\"date\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.checkOut : newAccommodation.checkOut}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, checkOut: e.target.value }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, checkOut: e.target.value })\n                  }\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n\n                <input\n                  type=\"number\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.cost : newAccommodation.cost}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, cost: parseFloat(e.target.value) || 0 }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, cost: parseFloat(e.target.value) || 0 })\n                  }\n                  placeholder=\"Total cost\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              {/* Rating */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Rating</label>\n                <div className=\"flex space-x-2\">\n                  {[1, 2, 3, 4, 5].map(star => (\n                    <button\n                      key={star}\n                      type=\"button\"\n                      onClick={() => editingAccommodation\n                        ? setEditingAccommodation({\n                            ...editingAccommodation,\n                            accommodation: { ...editingAccommodation.accommodation, rating: star }\n                          })\n                        : setNewAccommodation({ ...newAccommodation, rating: star })\n                      }\n                      className={`text-2xl transition-colors ${\n                        star <= (editingAccommodation ? editingAccommodation.accommodation.rating || 0 : newAccommodation.rating)\n                          ? 'text-yellow-400'\n                          : 'text-gray-300'\n                      }`}\n                    >\n                      ‚≠ê\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Amenities */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">Amenities</label>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\n                  {commonAmenities.map(amenity => (\n                    <label key={amenity} className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={(editingAccommodation ? editingAccommodation.accommodation.amenities : newAccommodation.amenities).includes(amenity)}\n                        onChange={() => toggleAmenity(amenity, !!editingAccommodation)}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700\">{amenity}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              {/* Additional Info */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <input\n                  type=\"text\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.bookingReference || '' : newAccommodation.bookingReference}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, bookingReference: e.target.value }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, bookingReference: e.target.value })\n                  }\n                  placeholder=\"Booking reference\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n\n                <input\n                  type=\"text\"\n                  value={editingAccommodation ? editingAccommodation.accommodation.contactInfo || '' : newAccommodation.contactInfo}\n                  onChange={(e) => editingAccommodation\n                    ? setEditingAccommodation({\n                        ...editingAccommodation,\n                        accommodation: { ...editingAccommodation.accommodation, contactInfo: e.target.value }\n                      })\n                    : setNewAccommodation({ ...newAccommodation, contactInfo: e.target.value })\n                  }\n                  placeholder=\"Contact info\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n\n              <textarea\n                value={editingAccommodation ? editingAccommodation.accommodation.notes || '' : newAccommodation.notes}\n                onChange={(e) => editingAccommodation\n                  ? setEditingAccommodation({\n                      ...editingAccommodation,\n                      accommodation: { ...editingAccommodation.accommodation, notes: e.target.value }\n                    })\n                  : setNewAccommodation({ ...newAccommodation, notes: e.target.value })\n                }\n                placeholder=\"Notes\"\n                rows={3}\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n              />\n\n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  onClick={() => {\n                    setShowAddForm(false);\n                    setEditingAccommodation(null);\n                  }}\n                  className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={editingAccommodation ? updateAccommodation : addAccommodation}\n                  className=\"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-200\"\n                >\n                  {editingAccommodation ? 'Update' : 'Add'} Accommodation\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Accommodations List */}\n      <div className=\"space-y-6\">\n        {accommodationsWithDays.length > 0 ? (\n          accommodationsWithDays.map(day => {\n            const accommodation = day.accommodation!;\n            const typeInfo = getTypeInfo(accommodation.type);\n            const nights = differenceInDays(new Date(accommodation.checkOut), new Date(accommodation.checkIn));\n\n            return (\n              <div\n                key={day.dayIndex}\n                className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 hover:shadow-xl transition-all duration-200\"\n              >\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div className=\"flex items-start space-x-4\">\n                    <div className=\"text-4xl\">{typeInfo.icon}</div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-1\">{accommodation.name}</h3>\n                      <p className=\"text-gray-600 mb-2\">{accommodation.address}</p>\n                      \n                      <div className=\"flex items-center space-x-4 mb-3\">\n                        <span className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full\">\n                          {typeInfo.name}\n                        </span>\n                        <div className=\"flex items-center\">\n                          {[...Array(5)].map((_, i) => (\n                            <span\n                              key={i}\n                              className={`text-sm ${i < (accommodation.rating || 0) ? 'text-yellow-400' : 'text-gray-300'}`}\n                            >\n                              ‚≠ê\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                        <div>\n                          <span className=\"text-gray-600\">Check-in:</span>\n                          <div className=\"font-medium\">{format(new Date(accommodation.checkIn), 'MMM d, yyyy')}</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Check-out:</span>\n                          <div className=\"font-medium\">{format(new Date(accommodation.checkOut), 'MMM d, yyyy')}</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Nights:</span>\n                          <div className=\"font-medium\">{nights}</div>\n                        </div>\n                        <div>\n                          <span className=\"text-gray-600\">Total Cost:</span>\n                          <div className=\"font-medium\">{accommodation.cost.toLocaleString()} {accommodation.currency}</div>\n                        </div>\n                      </div>\n\n                      {accommodation.amenities.length > 0 && (\n                        <div className=\"mt-3\">\n                          <span className=\"text-sm text-gray-600\">Amenities:</span>\n                          <div className=\"flex flex-wrap gap-1 mt-1\">\n                            {accommodation.amenities.slice(0, 6).map(amenity => (\n                              <span key={amenity} className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\">\n                                {amenity}\n                              </span>\n                            ))}\n                            {accommodation.amenities.length > 6 && (\n                              <span className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\">\n                                +{accommodation.amenities.length - 6} more\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      )}\n\n                      {accommodation.notes && (\n                        <p className=\"text-sm text-gray-600 mt-3\">{accommodation.notes}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => setEditingAccommodation({ dayIndex: day.dayIndex, accommodation })}\n                      className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                      </svg>\n                    </button>\n                    <button\n                      onClick={() => removeAccommodation(day.dayIndex)}\n                      className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div className=\"text-center py-12\">\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-4xl\">üè®</span>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No accommodations added</h3>\n            <p className=\"text-gray-600 mb-6\">Add hotels, Airbnbs, or other places you'll be staying</p>\n            <button\n              onClick={() => setShowAddForm(true)}\n              className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-200\"\n            >\n              Add Your First Accommodation\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { Trip } from '@/types/itinerary';\nimport { format, differenceInDays } from 'date-fns';\nimport TripCollaborators from './TripCollaborators';\n\ninterface TripOverviewProps {\n  trip: Trip;\n  onUpdateTrip: (updatedTrip: Partial<Trip>) => void;\n}\n\nexport default function TripOverview({ trip, onUpdateTrip }: TripOverviewProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [showCollaborators, setShowCollaborators] = useState(false);\n  const [editData, setEditData] = useState({\n    title: trip.title,\n    description: trip.description || '',\n    budget: trip.budget || 0,\n  });\n\n  const duration = differenceInDays(new Date(trip.end_date), new Date(trip.start_date)) + 1;\n  const totalExpenses = trip.expenses.reduce((sum, expense) => sum + expense.amount, 0);\n  const remainingBudget = (trip.budget || 0) - totalExpenses;\n  const packedItems = trip.packingList.filter(item => item.packed).length;\n  const totalItems = trip.packingList.length;\n  const completedActivities = trip.itinerary.reduce((count, day) => \n    count + day.activities.filter(activity => activity.completed).length, 0\n  );\n  const totalActivities = trip.itinerary.reduce((count, day) => count + day.activities.length, 0);\n\n  const handleSave = () => {\n    onUpdateTrip(editData);\n    setIsEditing(false);\n  };\n\n  const getBudgetStatus = () => {\n    const percentage = totalExpenses / (trip.budget || 1) * 100;\n    if (percentage > 100) return { color: 'text-red-600', bg: 'bg-red-100', status: 'Over Budget!' };\n    if (percentage > 80) return { color: 'text-yellow-600', bg: 'bg-yellow-100', status: 'Close to Limit' };\n    return { color: 'text-green-600', bg: 'bg-green-100', status: 'On Track' };\n  };\n\n  const budgetStatus = getBudgetStatus();\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Trip Header Card */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-white/20\">\n        {isEditing ? (\n          <div className=\"space-y-6\">\n            <input\n              type=\"text\"\n              value={editData.title}\n              onChange={(e) => setEditData({ ...editData, title: e.target.value })}\n              className=\"w-full text-3xl font-bold text-gray-900 bg-transparent border-b-2 border-purple-300 focus:border-purple-500 outline-none pb-2\"\n              placeholder=\"Trip title\"\n            />\n            <textarea\n              value={editData.description}\n              onChange={(e) => setEditData({ ...editData, description: e.target.value })}\n              className=\"w-full text-gray-600 bg-transparent border border-gray-300 rounded-xl p-4 focus:border-purple-500 outline-none resize-none\"\n              rows={3}\n              placeholder=\"Trip description\"\n            />\n            <div className=\"flex items-center space-x-4\">\n              <label className=\"text-sm font-semibold text-gray-700\">Budget:</label>\n              <input\n                type=\"number\"\n                value={editData.budget}\n                onChange={(e) => setEditData({ ...editData, budget: Number(e.target.value) })}\n                className=\"px-4 py-2 border border-gray-300 rounded-xl focus:border-purple-500 outline-none\"\n                placeholder=\"0\"\n              />\n              <span className=\"text-gray-600\">{trip.currency}</span>\n            </div>\n            <div className=\"flex space-x-4\">\n              <button\n                onClick={handleSave}\n                className=\"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-2 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200\"\n              >\n                Save Changes\n              </button>\n              <button\n                onClick={() => setIsEditing(false)}\n                className=\"bg-gray-500 text-white px-6 py-2 rounded-xl font-semibold hover:bg-gray-600 transition-all duration-200\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <div className=\"flex justify-between items-start mb-4\">\n              <div>\n                <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">{trip.title}</h2>\n                <p className=\"text-gray-600 text-lg leading-relaxed\">{trip.description}</p>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => setShowCollaborators(true)}\n                  className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-colors\"\n                  title=\"Manage collaborators\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\" />\n                  </svg>\n                </button>\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-xl transition-colors\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-purple-600\">{duration}</div>\n                <div className=\"text-sm text-gray-600\">Days</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">{trip.travelers}</div>\n                <div className=\"text-sm text-gray-600\">Travelers</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">{format(new Date(trip.start_date), 'EEE, MMM d')}</div>\n                <div className=\"text-sm text-gray-600\">Start Date</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-orange-600\">{format(new Date(trip.end_date), 'EEE, MMM d')}</div>\n                <div className=\"text-sm text-gray-600\">End Date</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Cover Image Section */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-white/20\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-4\">Trip Cover Image</h3>\n        <div className=\"flex flex-col md:flex-row gap-6 items-start\">\n          {trip.cover_image ? (\n            <div className=\"flex-1 relative\">\n              <img src={trip.cover_image} alt={trip.title} className=\"w-full h-48 object-cover rounded-xl shadow-md\" />\n              <button\n                onClick={() => document.getElementById('cover-image-input')?.click()}\n                className=\"absolute bottom-2 right-2 bg-purple-600 text-white p-2 rounded-full hover:bg-purple-700 transition-colors\"\n                title=\"Change cover image\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                </svg>\n              </button>\n            </div>\n          ) : (\n            <div className=\"flex-1 w-full h-48 bg-gradient-to-br from-purple-200 to-pink-200 rounded-xl flex items-center justify-center cursor-pointer hover:from-purple-300 hover:to-pink-300 transition-colors\" onClick={() => document.getElementById('cover-image-input')?.click()}>\n              <div className=\"text-center\">\n                <svg className=\"w-12 h-12 text-purple-600 mx-auto mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <p className=\"text-purple-700 font-medium\">Click to upload cover image</p>\n              </div>\n            </div>\n          )}\n          <input\n            id=\"cover-image-input\"\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={async (e) => {\n              const file = e.target.files?.[0];\n              if (file) {\n                try {\n                  const { uploadTripCoverImage } = await import('@/lib/trip-service');\n                  const coverUrl = await uploadTripCoverImage(trip.id, file);\n                  onUpdateTrip({ cover_image: coverUrl });\n                } catch (error) {\n                  alert('Failed to upload cover image');\n                }\n              }\n            }}\n          />\n        </div>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {/* Budget Card */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Budget</h3>\n            <div className={`px-3 py-1 rounded-full text-xs font-medium ${budgetStatus.bg} ${budgetStatus.color}`}>\n              {budgetStatus.status}\n            </div>\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Total Budget</span>\n              <span className=\"font-semibold\">{trip.budget?.toLocaleString()} {trip.currency}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Spent</span>\n              <span className=\"font-semibold text-red-600\">{totalExpenses.toLocaleString()} {trip.currency}</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-sm text-gray-600\">Remaining</span>\n              <span className={`font-semibold ${remainingBudget >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                {remainingBudget.toLocaleString()} {trip.currency}\n              </span>\n            </div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2 mt-3\">\n              <div \n                className={`h-2 rounded-full transition-all duration-300 ${\n                  totalExpenses > (trip.budget || 0) ? 'bg-red-500' : 'bg-gradient-to-r from-green-500 to-emerald-500'\n                }`}\n                style={{ width: `${Math.min((totalExpenses / (trip.budget || 1)) * 100, 100)}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* Packing Progress */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Packing</h3>\n            <span className=\"text-2xl\">üß≥</span>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-purple-600 mb-2\">\n              {packedItems}/{totalItems}\n            </div>\n            <div className=\"text-sm text-gray-600 mb-3\">Items Packed</div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${totalItems > 0 ? (packedItems / totalItems) * 100 : 0}%` }}\n              ></div>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              {totalItems > 0 ? Math.round((packedItems / totalItems) * 100) : 0}% Complete\n            </div>\n          </div>\n        </div>\n\n        {/* Activities Progress */}\n        <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Activities</h3>\n            <span className=\"text-2xl\">üóìÔ∏è</span>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-blue-600 mb-2\">\n              {completedActivities}/{totalActivities}\n            </div>\n            <div className=\"text-sm text-gray-600 mb-3\">Completed</div>\n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${totalActivities > 0 ? (completedActivities / totalActivities) * 100 : 0}%` }}\n              ></div>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              {totalActivities > 0 ? Math.round((completedActivities / totalActivities) * 100) : 0}% Complete\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"bg-white/90 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20\">\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Recent Updates</h3>\n        <div className=\"text-center py-8\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <p className=\"text-gray-600 text-sm\">No recent activity</p>\n          <p className=\"text-gray-500 text-xs mt-1\">Activity will appear here as you update your trip</p>\n        </div>\n      </div>\n\n      {/* Collaborators Modal */}\n      {showCollaborators && (\n        <TripCollaborators \n          tripId={trip.id} \n          isOwner={true}\n          onClose={() => setShowCollaborators(false)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}