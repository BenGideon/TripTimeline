{"version":3,"sources":["../../../../../../../All%20Git%20Clones/Travel%20Planner/triptimeline/src/lib/trip-service.ts"],"sourcesContent":["import { createClient } from './auth';\nimport { DbTrip, DbTripDay, DbEvent, DbPackingItem, DbExpense } from './supabase-client';\nimport { Trip, ItineraryDay, Activity, ActivityInput, PackingItem, Expense } from '@/types/itinerary';\n\n// Create a shared Supabase client instance\nconst supabase = createClient();\n\nconst parseFlexibleTime = (input?: string | null): string | null => {\n  if (!input) return null;\n\n  const trimmed = input.trim().toLowerCase();\n  if (!trimmed) return null;\n\n  const match = trimmed.match(/^(\\d{1,2})(?::(\\d{2}))?\\s*(am|pm)?$/i);\n  if (!match) return null;\n\n  let hours = parseInt(match[1], 10);\n  const minutes = match[2] ? parseInt(match[2], 10) : 0;\n  const meridiem = match[3]?.toLowerCase();\n\n  if (Number.isNaN(hours) || Number.isNaN(minutes) || minutes < 0 || minutes > 59) {\n    return null;\n  }\n\n  if (meridiem === 'am') {\n    hours = hours % 12;\n  } else if (meridiem === 'pm') {\n    hours = (hours % 12) + 12;\n  }\n\n  if (hours < 0 || hours > 23) {\n    return null;\n  }\n\n  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;\n};\n\nconst inferActivityType = (time?: string | null): Activity['type'] => {\n  if (!time) return 'morning';\n\n  const [hoursString] = time.split(':');\n  const hours = parseInt(hoursString, 10);\n  if (Number.isNaN(hours)) return 'morning';\n\n  if (hours >= 17) return 'evening';\n  if (hours >= 12) return 'afternoon';\n  return 'morning';\n};\n\n// Helper function to create trip days\nasync function createTripDays(tripId: string, startDate: string, endDate: string): Promise<void> {\n  const start = new Date(startDate);\n  const end = new Date(endDate);\n  const dayCount = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n  \n  const tripDays = [];\n  for (let i = 0; i < dayCount; i++) {\n    const dayDate = new Date(start);\n    dayDate.setDate(start.getDate() + i);\n    \n    const title = i === 0 ? 'Arrival Day' : \n                  i === dayCount - 1 ? 'Departure Day' : \n                  `Day ${i + 1}`;\n    \n    tripDays.push({\n      trip_id: tripId,\n      date: dayDate.toISOString().split('T')[0],\n      day_index: i + 1,\n      title: title\n    });\n  }\n  \n  const { error } = await (supabase as any)\n    .from('trip_days')\n    .insert(tripDays);\n  \n  if (error) {\n    if (error.message && error.message.includes('duplicate key')) {\n      return;\n    }\n    throw new Error(`Failed to create trip days: ${error.message}`);\n  }\n}\n\n// Convert database types to app types\nfunction dbTripToTrip(dbTrip: DbTrip, days: ItineraryDay[], packingList: PackingItem[], expenses: Expense[]): Trip {\n  return {\n    id: dbTrip.id,\n    title: dbTrip.title,\n    destination: dbTrip.destination,\n    start_date: dbTrip.start_date,\n    end_date: dbTrip.end_date,\n    description: dbTrip.description || '',\n    budget: dbTrip.budget || 0,\n    currency: dbTrip.currency,\n    travelers: 1, // Default, can be added to DB later\n    packingList,\n    expenses,\n    itinerary: days,\n    created_at: dbTrip.created_at,\n    updated_at: dbTrip.updated_at\n  };\n}\n\nfunction dbEventToActivity(dbEvent: DbEvent): Activity {\n  const normalizedTime = parseFlexibleTime(dbEvent.start_time) ?? dbEvent.start_time ?? '';\n\n  return {\n    id: dbEvent.id,\n    title: dbEvent.title,\n    time: normalizedTime,\n    description: dbEvent.notes ?? undefined,\n    location: dbEvent.location_name ?? undefined,\n    type: inferActivityType(normalizedTime),\n    category: (dbEvent.category as Activity['category']) || 'other',\n    cost: dbEvent.cost_amount ?? undefined,\n    duration: 60,\n    notes: dbEvent.notes ?? undefined,\n    completed: false\n  };\n}\n\nfunction dbPackingItemToPackingItem(dbItem: DbPackingItem): PackingItem {\n  return {\n    id: dbItem.id,\n    name: dbItem.name,\n    category: (dbItem.category as any) || 'other',\n    quantity: 1,\n    packed: dbItem.is_checked,\n    essential: dbItem.priority === 1,\n    notes: ''\n  };\n}\n\nfunction dbExpenseToExpense(dbExpense: DbExpense): Expense {\n  return {\n    id: dbExpense.id,\n    title: dbExpense.label,\n    amount: dbExpense.amount,\n    currency: dbExpense.currency,\n    category: (dbExpense.category as any) || 'other',\n    date: dbExpense.created_at.split('T')[0],\n    description: '',\n    shared: false\n  };\n}\n\n// Trip CRUD operations\nexport async function createTrip(tripData: Omit<Trip, 'id' | 'created_at' | 'updated_at' | 'itinerary' | 'packingList' | 'expenses'>): Promise<string> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated - please log in again');\n  }\n\n  const { data, error } = await (supabase as any)\n    .from('trips')\n    .insert({\n      user_id: user.id,\n      title: tripData.title,\n      destination: tripData.destination,\n      start_date: tripData.start_date,\n      end_date: tripData.end_date,\n      description: tripData.description,\n      currency: tripData.currency\n      // Note: budget and travelers fields may not exist in DB yet\n    })\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Database error: ${error.message}`);\n  }\n  \n  if (!data) {\n    throw new Error('No data returned from trip creation');\n  }\n  \n  // Manually create trip days since the database trigger might not exist\n  try {\n    await createTripDays(data.id, tripData.start_date, tripData.end_date);\n  } catch (dayError) {\n    // Don't fail the entire trip creation if day creation fails\n    // Trip days will be created on-demand when needed\n  }\n  \n  return data.id;\n}\n\nexport async function getTrip(tripId: string): Promise<Trip | null> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return null;\n  }\n\n  // Get trip - check if user is owner OR collaborator\n  const { data: trip, error: tripError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .eq('id', tripId)\n    .single();\n\n  if (tripError || !trip) return null;\n\n  // Check if user is owner or accepted collaborator\n  if (trip.user_id !== user.id) {\n    const { data: collaborator } = await (supabase as any)\n      .from('trip_collaborators')\n      .select('id')\n      .eq('trip_id', tripId)\n      .eq('user_id', user.id)\n      .eq('status', 'accepted')\n      .single();\n    \n    if (!collaborator) return null; // User is not owner or collaborator\n  }\n\n  // Get trip days\n  const { data: dbDays, error: daysError } = await (supabase as any)\n    .from('trip_days')\n    .select('*')\n    .eq('trip_id', tripId)\n    .order('day_index');\n\n  if (daysError) throw daysError;\n\n  // Get events for each day\n  const days: ItineraryDay[] = [];\n  for (const dbDay of dbDays || []) {\n    const { data: dbEvents, error: eventsError } = await (supabase as any)\n      .from('events')\n      .select('*')\n      .eq('trip_day_id', dbDay.id)\n      .order('order_index');\n\n    if (eventsError) throw eventsError;\n\n    const activities = (dbEvents || []).map(dbEventToActivity);\n    \n    days.push({\n      day: dbDay.day_index,\n      date: dbDay.date,\n      activities,\n      notes: dbDay.notes || '',\n      actualSpent: 0,\n      customTitle: dbDay.title\n    });\n  }\n\n  // Get packing items\n  const { data: dbPackingItems, error: packingError } = await (supabase as any)\n    .from('packing_items')\n    .select('*')\n    .eq('trip_id', tripId);\n\n  if (packingError) throw packingError;\n\n  const packingList = (dbPackingItems || []).map(dbPackingItemToPackingItem);\n\n  // Get expenses\n  const { data: dbExpenses, error: expensesError } = await (supabase as any)\n    .from('expenses')\n    .select('*')\n    .eq('trip_id', tripId);\n\n  if (expensesError) throw expensesError;\n\n  const expenses = (dbExpenses || []).map(dbExpenseToExpense);\n\n  return dbTripToTrip(trip, days, packingList, expenses);\n}\n\nexport async function getUserTrips(): Promise<Trip[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return [];\n  }\n\n  // Get trips owned by user\n  const { data: ownedTrips, error: ownedError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .eq('user_id', user.id)\n    .order('created_at', { ascending: false });\n\n  if (ownedError) throw ownedError;\n\n  // Get trips where user is an accepted collaborator\n  const { data: collaboratorTrips, error: collabError } = await (supabase as any)\n    .from('trips')\n    .select('*')\n    .in('id', \n      (await (supabase as any)\n        .from('trip_collaborators')\n        .select('trip_id')\n        .eq('user_id', user.id)\n        .eq('status', 'accepted')\n      ).data?.map((c: any) => c.trip_id) || []\n    )\n    .order('created_at', { ascending: false });\n\n  if (collabError && collabError.code !== 'PGRST116') throw collabError; // Ignore \"no rows\" error\n\n  // Combine and deduplicate trips\n  const allTrips = [...(ownedTrips || []), ...(collaboratorTrips || [])];\n  const uniqueTrips = Array.from(new Map(allTrips.map((t: DbTrip) => [t.id, t])).values());\n\n  // For now, return trips without full details (for performance)\n  return uniqueTrips.map((trip: DbTrip) => dbTripToTrip(trip, [], [], []));\n}\n\nexport async function updateTripDay(tripId: string, dayIndex: number, updates: Partial<ItineraryDay>): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    return;\n  }\n\n  // Find the trip day\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('*')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    \n    // Try to create the missing trip day\n    try {\n      // Get trip info to calculate the date\n      const { data: trip } = await (supabase as any)\n        .from('trips')\n        .select('start_date')\n        .eq('id', tripId)\n        .single();\n      \n      if (trip) {\n        // Instead of creating the trip day, let's just skip the update\n        // The day will be created when the trip is properly initialized\n        return; // Skip the update instead of failing\n      } else {\n        throw new Error('Trip not found');\n      }\n    } catch (createError) {\n      throw new Error(`Trip day not found and could not be created: ${createError}`);\n    }\n  }\n\n  // Update the trip day\n  const updateData: any = {};\n  if (updates.customTitle !== undefined) {\n    updateData.title = updates.customTitle;\n  }\n  if (updates.notes !== undefined) {\n    updateData.notes = updates.notes;\n  }\n\n  if (Object.keys(updateData).length > 0) {\n    const { error } = await (supabase as any)\n      .from('trip_days')\n      .update(updateData)\n      .eq('id', tripDay?.id);\n\n    if (error) {\n      throw new Error(`Failed to update trip day: ${error.message || JSON.stringify(error)}`);\n    }\n  }\n}\n\nexport async function deleteTripDay(tripId: string, dayIndex: number): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    return;\n  }\n\n  const { error } = await (supabase as any)\n    .from('trip_days')\n    .delete()\n    .eq('id', tripDay.id);\n\n  if (error) {\n    throw new Error(`Failed to delete trip day: ${error.message}`);\n  }\n\n}\n\nexport async function addActivity(tripId: string, dayIndex: number, activity: ActivityInput): Promise<Activity> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const startTime = parseFlexibleTime(activity.time);\n\n  const { data, error } = await (supabase as any)\n    .from('events')\n    .insert({\n      trip_day_id: tripDay.id,\n      title: activity.title,\n      start_time: startTime,\n      category: activity.category || 'other',\n      location_name: activity.location ?? null,\n      cost_amount: activity.cost ?? null,\n      cost_currency: activity.cost ? 'USD' : null,\n      notes: activity.description ?? null,\n      order_index: 0\n    })\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Failed to add activity: ${error.message}`);\n  }\n\n  if (!data) {\n    throw new Error('No data returned when creating activity');\n  }\n\n  return dbEventToActivity(data as DbEvent);\n}\n\nexport async function updateActivity(\n  tripId: string,\n  dayIndex: number,\n  activityId: string,\n  updates: ActivityInput\n): Promise<Activity> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const startTime = parseFlexibleTime(updates.time);\n\n  const { data, error } = await (supabase as any)\n    .from('events')\n    .update({\n      title: updates.title,\n      start_time: startTime,\n      category: updates.category || 'other',\n      location_name: updates.location ?? null,\n      cost_amount: updates.cost ?? null,\n      notes: updates.description ?? null\n    })\n    .eq('id', activityId)\n    .eq('trip_day_id', tripDay.id)\n    .select()\n    .single();\n\n  if (error) {\n    throw new Error(`Failed to update activity: ${error.message}`);\n  }\n\n  if (!data) {\n    throw new Error('No data returned when updating activity');\n  }\n\n  return dbEventToActivity(data as DbEvent);\n}\n\nexport async function deleteActivity(tripId: string, dayIndex: number, activityId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const { error } = await (supabase as any)\n    .from('events')\n    .delete()\n    .eq('id', activityId)\n    .eq('trip_day_id', tripDay.id);\n\n  if (error) {\n    throw new Error(`Failed to delete activity: ${error.message}`);\n  }\n}\n\nexport async function deleteTrip(tripId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) {\n    throw new Error('User not authenticated');\n  }\n\n  // Delete the trip (cascade should handle related records)\n  const { error } = await (supabase as any)\n    .from('trips')\n    .delete()\n    .eq('id', tripId)\n    .eq('user_id', user.id); // Ensure user can only delete their own trips\n\n  if (error) {\n    throw new Error(`Failed to delete trip: ${error.message}`);\n  }\n\n}\n\nexport async function addPackingItem(tripId: string, item: PackingItem): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('packing_items')\n    .insert({\n      trip_id: tripId,\n      name: item.name,\n      category: item.category,\n      is_checked: item.packed,\n      priority: item.essential ? 1 : 2\n    });\n\n  if (error) throw error;\n}\n\nexport async function savePackingList(tripId: string, packingList: PackingItem[]): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  // Delete all existing packing items for this trip\n  await (supabase as any)\n    .from('packing_items')\n    .delete()\n    .eq('trip_id', tripId);\n\n  // Insert new packing items\n  if (packingList.length > 0) {\n    const itemsToInsert = packingList.map(item => ({\n      trip_id: tripId,\n      name: item.name,\n      category: item.category,\n      is_checked: item.packed,\n      priority: item.essential ? 1 : 2\n    }));\n\n    const { error } = await (supabase as any)\n      .from('packing_items')\n      .insert(itemsToInsert);\n\n    if (error) throw error;\n  }\n}\n\nexport async function addExpense(tripId: string, expense: Expense): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n\n  const { error } = await (supabase as any)\n    .from('expenses')\n    .insert({\n      trip_id: tripId,\n      label: expense.title,\n      amount: expense.amount,\n      currency: expense.currency,\n      category: expense.category\n    });\n\n  if (error) {\n    throw new Error(`Failed to add expense: ${error.message || JSON.stringify(error)}`);\n  }\n}\n\nexport async function uploadMedia(\n  tripId: string,\n  dayIndex: number,\n  file: File,\n  mediaType: 'image' | 'video',\n  title?: string,\n  description?: string\n): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    throw new Error('Trip day not found');\n  }\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${tripId}/${tripDay.id}/${Date.now()}.${fileExt}`;\n  const storagePath = `media/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('trip-media')\n    .upload(storagePath, file, { upsert: false });\n\n  if (uploadError) {\n    throw new Error(`Failed to upload file: ${uploadError.message}`);\n  }\n\n  const { data } = supabase.storage\n    .from('trip-media')\n    .getPublicUrl(storagePath);\n\n  const mediaUrl = data.publicUrl;\n  const { error: dbError } = await (supabase as any)\n    .from('media')\n    .insert({\n      trip_day_id: tripDay.id,\n      type: mediaType,\n      url: mediaUrl,\n      title: title || file.name,\n      description: description || ''\n    });\n  if (dbError) {\n    throw new Error(`Failed to save media record: ${dbError.message || JSON.stringify(dbError)}`);\n  }\n\n}\n\nexport async function deleteMedia(mediaId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { data: media, error: fetchError } = await (supabase as any)\n    .from('media')\n    .select('url')\n    .eq('id', mediaId)\n    .single();\n\n  if (fetchError || !media) {\n    throw new Error('Media not found');\n  }\n\n  const url = new URL(media.url);\n  const filePath = url.pathname.split('/storage/v1/object/public/trip-media/')[1];\n\n  const { error: storageError } = await supabase.storage\n    .from('trip-media')\n    .remove([filePath]);\n\n  if (storageError) {\n    // File deletion from storage failed, but continue with DB deletion\n  }\n\n  const { error: dbError } = await (supabase as any)\n    .from('media')\n    .delete()\n    .eq('id', mediaId);\n\n  if (dbError) {\n    throw new Error(`Failed to delete media: ${dbError.message}`);\n  }\n\n}\n\nexport async function getMediaForDay(tripId: string, dayIndex: number): Promise<any[]> {\n  const { data: tripDay, error: findError } = await (supabase as any)\n    .from('trip_days')\n    .select('id')\n    .eq('trip_id', tripId)\n    .eq('day_index', dayIndex)\n    .single();\n\n  if (findError || !tripDay) {\n    return [];\n  }\n\n  const { data: media, error } = await (supabase as any)\n    .from('media')\n    .select('*')\n    .eq('trip_day_id', tripDay.id)\n    .order('created_at', { ascending: false });\n\n  if (error) {\n    return [];\n  }\n\n  return media || [];\n}\n\nexport async function updateTrip(tripId: string, updates: Partial<Trip>): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const updateData: any = {};\n  if (updates.title !== undefined) updateData.title = updates.title;\n  if (updates.description !== undefined) updateData.description = updates.description;\n  if (updates.budget !== undefined) updateData.budget = updates.budget;\n  if (updates.currency !== undefined) updateData.currency = updates.currency;\n  if (updates.start_date !== undefined) updateData.start_date = updates.start_date;\n  if (updates.end_date !== undefined) updateData.end_date = updates.end_date;\n\n  const { error } = await (supabase as any)\n    .from('trips')\n    .update(updateData)\n    .eq('id', tripId)\n    .eq('user_id', user.id);\n\n  if (error) {\n    throw new Error(`Failed to update trip: ${error.message}`);\n  }\n}\n\nexport async function deleteExpense(expenseId: string): Promise<void> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const { error } = await (supabase as any)\n    .from('expenses')\n    .delete()\n    .eq('id', expenseId);\n\n  if (error) {\n    throw new Error(`Failed to delete expense: ${error.message}`);\n  }\n\n}\n\nexport async function uploadTripCoverImage(tripId: string, file: File): Promise<string> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('User not authenticated');\n\n  const fileExt = file.name.split('.').pop();\n  const fileName = `${tripId}/cover-${Date.now()}.${fileExt}`;\n  const storagePath = `trip-covers/${fileName}`;\n\n  const { error: uploadError } = await supabase.storage\n    .from('trip-media')\n    .upload(storagePath, file, { upsert: true });\n\n  if (uploadError) {\n    throw new Error(`Failed to upload cover image: ${uploadError.message}`);\n  }\n\n  const { data } = supabase.storage\n    .from('trip-media')\n    .getPublicUrl(storagePath);\n\n  const coverImageUrl = data.publicUrl;\n\n  const { error: dbError } = await (supabase as any)\n    .from('trips')\n    .update({ cover_image: coverImageUrl })\n    .eq('id', tripId);\n\n  if (dbError) {\n    throw new Error(`Failed to save cover image: ${dbError.message}`);\n  }\n\n  return coverImageUrl;\n}\n"],"names":[],"mappings":"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"}